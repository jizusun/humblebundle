!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2294)}({0:function(e,t){e.exports=_},1:function(e,t){e.exports=jQuery},10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CURRENCY_CONSTANTS={SUPPORTED_CURRENCIES:["USD","EUR","GBP","AUD","CAD","PHP","RUB","TRY","NZD","CNY"],GBP_COUNTRIES:["GS","GG","SH","IM","BQ","UK","JE","GB"],EURO_COUNTRIES:["BE","FR","BG","BA","HR","DE","HU","FI","DK","NL","PT","NO","LI","LV","LT","LU","RO","PL","PM","VA","CH","GR","EE","AL","IT","CZ","CY","AT","AD","IE","ES","ME","MC","RS","MK","SK","MT","SI","SM","SE"],CHOICE_SUPPORTED_CURRENCIES:["AUD","CAD","USD","EUR","NZD","GBP","RUB","CNY"],CURRENCY_CODES:{PISOS:"PHP",RUBLES:"RUB",YUAN:"CNY",CA_DOLLARS:"CAD",EUROS:"EUR",AU_DOLLARS:"AUD",DOLLARS:"USD",POUNDS:"GBP",LIRAS:"TRY",NZ_DOLLARS:"NZD"},REGION_CURRENCY_MAPPING:{BE:"EUR",FR:"EUR",BG:"EUR",BA:"EUR",BQ:"GBP",FI:"EUR",RU:"RUB",NL:"EUR",NO:"EUR",NZ:"NZD",RO:"EUR",CH:"EUR",GS:"GBP",CN:"CNY",CA:"CAD",GG:"GBP",CZ:"EUR",CY:"EUR",GB:"GBP",EUROPE_EURO:"EUR",SK:"EUR",SI:"EUR",SH:"GBP",SM:"EUR",SE:"EUR",DK:"EUR",HR:"EUR",DE:"EUR",HU:"EUR",MK:"EUR",JE:"GBP",GR:"EUR",PT:"EUR",TR:"TRY",LI:"EUR",LV:"EUR",LT:"EUR",LU:"EUR",PH:"PHP",PL:"EUR",PM:"EUR",VA:"EUR",AD:"EUR",EE:"EUR",AL:"EUR",IT:"EUR",AU:"AUD",AT:"EUR",IE:"EUR",ES:"EUR",ME:"EUR",MC:"EUR",RS:"EUR",US:"USD",MT:"EUR",UK:"GBP",IM:"GBP",EUROPE_GBP:"GBP"},CURRENCY_NAMES:{TRY:"Turkey - Lira",USD:"United States - Dollars",AUD:"Australia - Dollars",GBP:"Europe (UK) - Pounds Sterling",NZD:"New Zealand - Dollars",RUB:"Russia - Rubles",CNY:"Chinese - Yuan",EUR:"Europe - Euros",PHP:"Philippines - Pisos",CAD:"Canada - Dollars"},CURRENCY_SYMBOLS:{TRY:"₺",USD:"$",AUD:"AU$",GBP:"£",NZD:"NZ$",RUB:"₽",CNY:"¥",EUR:"€",PHP:"₱",CAD:"CA$"},PRIMARY_CURRENCY_COUNTRIES:["AU","CA","PH","RU","TR","NZ","CN"],PRIMARY_CURRENCY_REGIONS:["US","EUROPE_EURO","EUROPE_GBP","AU","CA","PH","RU","TR","NZ","CN"]}},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRIPE_ELEMENTS_OPTIONS=t.RedirectToStripeCheckout=t.handleStripeAction=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(4);t.handleStripeAction=function(e,t,n){e.handleCardAction(t).then(function(e){e.error?n(e.error.message):r.default.ajax({type:"POST",url:"/return/stripe-confirm",data:{payment_intent_id:e.paymentIntent.id},dataType:"json",success:function(e){e.success?(0,a.redirectInDomain)(e.redirect_url):e.redirect_url?(0,a.redirectInDomain)(e.redirect_url):n("Unknown Error")}})})},t.RedirectToStripeCheckout=function(e,t){var n=Stripe(t);r.default.ajax({type:"POST",url:"/humbler/submit",data:e,dataType:"json",success:function(e){e.stripe_session_id?n.redirectToCheckout({sessionId:e.stripe_session_id}):e.redirect_url&&(0,a.redirectInDomain)(e.redirect_url)}})},t.STRIPE_ELEMENTS_OPTIONS={style:{base:{fontSize:"1em",textTransform:"uppercase",fontWeight:"bold",lineHeight:"1",fontFamily:"'Sofia Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif"}}}},106:function(e,t,n){var i,o,r;
/*!
 * jQuery UI Widget 1.12.0
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(1),n(36)],void 0===(r="function"==typeof(i=function(e){var t,n=0,i=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{(i=e._data(o,"events"))&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,i){var o,r,a,s={},l=t.split(".")[0],u=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)},e[l]=e[l]||{},o=e[l][t],r=e[l][t]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(i,function(t,i){e.isFunction(i)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}():s[t]=i}),r.prototype=e.widget.extend(a,{widgetEventPrefix:o&&a.widgetEventPrefix||t},s,{constructor:r,namespace:l,widgetName:t,widgetFullName:u}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var n,o,r=i.call(arguments,1),a=0,s=r.length;a<s;a++)for(n in r[a])o=r[a][n],r[a].hasOwnProperty(n)&&void 0!==o&&(e.isPlainObject(o)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],o):e.widget.extend({},o):t[n]=o);return t},e.widget.bridge=function(t,n){var o=n.prototype.widgetFullName||t;e.fn[t]=function(r){var a="string"==typeof r,s=i.call(arguments,1),l=this;return a?this.each(function(){var n,i=e.data(this,o);return"instance"===r?(l=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):(s.length&&(r=e.widget.extend.apply(null,[r].concat(s))),this.each(function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new n(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},t=(i=t.split(".")).shift(),i.length){for(o=a[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],i=this;function o(o,r){var a,s;for(s=0;s<o.length;s++)a=i.classesElementLookup[o[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),i.classesElementLookup[o[s]]=a,n.push(o[s]),r&&t.classes[o[s]]&&n.push(t.classes[o[s]])}return(t=e.extend({element:this.element,classes:this.options.classes||{}},t)).keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),n.join(" ")},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,r={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,a){function s(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?o.on(u,c,s):n.on(u,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,r,a=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){var a;"string"==typeof o&&(o={effect:o});var s=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o}),a=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&e.effects&&e.effects.effect[s]?i[t](o):s!==t&&i[s]?i[s](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}}),e.widget})?i.apply(t,o):i)||(e.exports=r)},1081:function(e,t){e.exports="<% if (_.size(purchase_history)) { %>\n  <div class=\"previous-purchase-list\">\n  <% if (_.size(purchase_history) == 1) { %>\n    <% var value = _.head(purchase_history) %>\n    <%- gtxt('Please note, you purchased this product {time} minutes ago.').format({time: value.minutes}) %> <a href=\"/receipt?s=thanks&uid=<%- value.uid %>&uidverify=<%- value.uidverify%>\"><%- gtxt('Click here to see its progress before trying again.') %></a>\n  <% } else { %>\n    <%- gtxt('Please note, you have recently started the following purchases of this product:') %>\n    <ul>\n    <% _.each(purchase_history, function(value) { %>\n      <li><%- gtxt('{time} minutes ago.').format({time: value.minutes}) %> <a href=\"/receipt?s=thanks&uid=<%- value.uid %>&uidverify=<%- value.uidverify%>\"><%- gtxt('Click here to see its progress before trying again.') %></a></li>\n    <% }); %>\n    </ul>\n  <% } %>\n  </div>\n<% } %>\n"},1082:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviousPurchasesView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(0)),a=l(n(1081)),s=n(14);function l(e){return e&&e.__esModule?e:{default:e}}(t.PreviousPurchasesView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){var e=new Date,t=this.model.get("purchase_history");r.default.each(t,function(t){var n=(0,s.makeHumbleDate)(t.time);t.minutes=Math.floor((e-n)/6e4)}),this.model.set("purchase_history",r.default.filter(t,function(e){return e.minutes<120}))}}]),t}()).prototype.template=r.default.template(a.default)},1083:function(e,t){e.exports='<div class="ui-slider-handle">\n  <div class="tri-left"></div>\n  <div class="tri-right"></div>\n</div>\n'},1084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderUIView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(1083));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SliderUIView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){this.listenTo(this.model,"change:sibling_split",this.updateSlider.bind(this))}},{key:"updateSlider",value:function(){this.rendered&&this.$el.slider("value",this.sliderIncrements*this.model.get("sibling_split"))}},{key:"onSlide",value:function(){var e=this.$el.slider("option","value")/this.sliderIncrements;isNaN(e)||e<0?e=0:e>1&&(e=1),this.model.setNewSplit(e)}},{key:"onRender",value:function(){this.$el.slider({range:"min",min:0,max:this.sliderIncrements,value:this.sliderIncrements*this.model.get("sibling_split")}),this.rendered=!0}}]),t}();l.prototype.events={"mousedown .ui-slider":"onSlide",slide:"onSlide",slidestop:"onSlide"},l.prototype.rendered=!1,l.prototype.sliderIncrements=1e3,l.prototype.template=r.default.template(a.default)},1085:function(e,t){e.exports='<label>\n  <span class="sr-only">Amount to give:</span>\n  <input type="text"\n         class="order-form-split-payee-amount-input"\n         value="<%- localizeMoney(inputMoney, MoneyFormatConstants.SHOW_ZERO_CENTS) %>"/>\n</label>\n'},1086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmountInputView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(0)),a=l(n(1085)),s=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.AmountInputView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){this.listenTo(this.model,"change:price",this.render.bind(this)),this.listenTo(this.model,"change:error",this.render.bind(this))}},{key:"amountEditedDirectly",value:function(){var e=this.$(".order-form-split-payee-amount-input").val(),t=(0,s.parseMoneyStringToFloat)(e);isNaN(t)&&(t=0);var n=new s.Money(t,this.model.parent.get("currency"));if(n.lte(this.model.parent.get("price")))this.model.setNewPrice(n);else{var i=this.model.parent.get("name")?this.model.parent.get("name")+" ":"";this.model.set("error","Amount cannot be greater than total "+i+"amount")}this.render()}},{key:"selectInputField",value:function(){this.$(".order-form-split-payee-amount-input").select()}},{key:"templateContext",value:function(){return{inputMoney:this.model.getCurrentMoney()}}}]),t}();u.prototype.events={change:"amountEditedDirectly","click .order-form-split-payee-amount-input":"selectInputField"},u.prototype.template=r.default.template(a.default)},1087:function(e,t){e.exports='<div class="order-form-split-payee-label js-subsplit-toggle">\n<% if (has_children) { %>\n  <div class="disclosure-triangle<%= expand_subsplits ? \' target-is-expanded\' :\'\' %>"></div>\n<% } %>\n<% if (is_cyoc) { %>\n  <a\n    class="order-form-split-payee-name js-order-form-split-payee-name js-show-charity-selector show-charity-selector"\n    style="<%= (has_children) ? \'cursor: pointer;\' :\'\' %>"\n    title="<%- splitName %>"\n    href="#"\n  >\n    <%- splitName %>\n  </a>\n<% } else { %>\n  <div\n    class="order-form-split-payee-name js-order-form-split-payee-name"\n    style="<%= (has_children) ? \'cursor: pointer;\' :\'\' %>"\n    title="<%- splitName %>"\n  >\n    <%- splitName %>\n  </div>\n<% } %>\n</div>\n<div class="order-form-slider-small">\n  <div class="order-form-split-payee-slider"></div>\n  <div class="order-form-amount-input-wrapper"></div>\n</div>\n'},1088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplitView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=h(n(3)),r=h(n(0)),a=n(9),s=h(n(1087)),l=n(1086),u=n(360),c=n(406),d=n(1084);function h(e){return e&&e.__esModule?e:{default:e}}var p=t.SplitView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.givingFund=e.givingFund,this.charityConstants=e.charityConstants,this.user=e.user,this.charities=e.charities,this.model.on("change:name",this.render.bind(this)),this.model.get("is_cyoc")&&(this.updateCyoc(),this.listenTo(this.user,"change:charity_id",this.updateCyoc.bind(this)))}},{key:"toggleCharitySelector",value:function(){this.model.get("is_cyoc")&&(this.modal||(this.modal=new c.CharitySelectionModal({pubSub:u.charityPubSub,page_size:u.ORDER_FORM_SEARCH_PAGE_SIZE,constants:this.charityConstants,isModal:!0,user:this.user,collection:this.charities})),this.modal.render(),this.modal.$(".js-charity-results").append(this.modal.charitySearchResultsView.render()))}},{key:"toggleSubsplit",value:function(){this.model.get("has_children")&&this.model.set("expand_subsplits",!this.model.get("expand_subsplits"))}},{key:"updateCyoc",value:function(){var e=this.charities.get(this.user.get("charity_id"));e?this.model.set({name:e.get("human_name"),featured:e.get("featured"),charity_chosen:!e.get("featured")}):console.error("No featured charity found"),this.modal&&this.modal.destroy()}},{key:"onRender",value:function(){this.sliderInputView||(this.sliderInputView=new l.AmountInputView({model:this.model})),this.sliderInputView.setElement(this.$(".order-form-amount-input-wrapper:first")),this.sliderInputView.render(),this.sliderUIView||(this.sliderUIView=new d.SliderUIView({model:this.model})),this.sliderUIView.setElement(this.$(".order-form-split-payee-slider:first")),this.sliderUIView.render()}},{key:"templateContext",value:function(){var e=this.model.get("name");switch(this.model.get("class")){case"humblebundle":e=(0,a.gtxt)("Humble Tip");break;case"publisher":e=(0,a.gtxt)("Publishers");break;case"developer":e=(0,a.gtxt)("Developers");break;case"charity":this.model.get("has_children")&&(e=(0,a.gtxt)("Charities"))}return{splitName:e}}}]),t}();p.prototype.events={"click .js-show-charity-selector":"toggleCharitySelector","click .js-subsplit-toggle":"toggleSubsplit"},p.prototype.template=r.default.template(s.default)},1089:function(e,t){e.exports="<%= error %>\n"},109:function(e,t,n){(e.exports=n(19)(!1)).push([e.i,'.jq-dropdown{position:absolute;z-index:1039;display:none}.jq-dropdown .jq-dropdown-menu,.jq-dropdown .jq-dropdown-panel{min-width:160px;max-width:360px;list-style:none;background:#fff;border:solid 1px #ddd;border-radius:4px;box-shadow:0 5px 10px rgba(0,0,0,0.2);overflow:visible;padding:4px 0;margin:0}.jq-dropdown .jq-dropdown-panel{padding:10px}.jq-dropdown.jq-dropdown-tip{margin-top:8px}.jq-dropdown.jq-dropdown-tip:before{position:absolute;top:-6px;left:9px;content:"";border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #ddd;display:inline-block}.jq-dropdown.jq-dropdown-tip:after{position:absolute;top:-5px;left:10px;content:"";border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #fff;display:inline-block}.jq-dropdown.jq-dropdown-tip.jq-dropdown-anchor-right:before{left:auto;right:9px}.jq-dropdown.jq-dropdown-tip.jq-dropdown-anchor-right:after{left:auto;right:10px}.jq-dropdown.jq-dropdown-scroll .jq-dropdown-menu,.jq-dropdown.jq-dropdown-scroll .jq-dropdown-panel{max-height:180px;overflow:auto}.jq-dropdown .jq-dropdown-menu li{list-style:none;padding:0 0;margin:0;line-height:18px}.jq-dropdown .jq-dropdown-menu li>a,.jq-dropdown .jq-dropdown-menu label{display:block;color:inherit;text-decoration:none;line-height:18px;padding:3px 15px;margin:0;white-space:nowrap}.jq-dropdown .jq-dropdown-menu li>a:hover,.jq-dropdown .jq-dropdown-menu label:hover{background-color:#f2f2f2;color:inherit;cursor:pointer}.jq-dropdown .jq-dropdown-menu .jq-dropdown-divider{font-size:1px;border-top:solid 1px #e5e5e5;padding:0;margin:5px 0}\n',""])},1090:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplitErrorView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(1089));function s(e){return e&&e.__esModule?e:{default:e}}(t.SplitErrorView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){this.listenTo(this.model,"change:error",this.render.bind(this))}},{key:"serializeData",value:function(){return{error:this.model.get("error")}}}]),t}()).prototype.template=r.default.template(a.default)},1091:function(e,t){e.exports='<div class="order-form-split-payee slider-container">\n  <div class="order-form-split"></div>\n</div>\n<div class="order-form-split-error"></div>\n<div class="order-form-subsplit<% if (!expand_subsplits) {%> u-display-none<% } %>">\n  <div class="subsplit-wrapper"></div>\n</div>\n'},1092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSliderView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(3)),r=c(n(0)),a=c(n(1091)),s=n(836),l=n(1090),u=n(1088);function c(e){return e&&e.__esModule?e:{default:e}}(t.SingleSliderView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.givingFund=e.givingFund,this.charityConstants=e.charityConstants,this.user=e.user,this.charities=e.charities,this.model.on("change:expand_subsplits",this.toggleSubsplits.bind(this))}},{key:"toggleSubsplits",value:function(){this.model.get("expand_subsplits")?(this.$childSplits.slideDown(200),this.$splitDisclosureTriangle.addClass("target-is-expanded")):(this.$childSplits.slideUp(200),this.$splitDisclosureTriangle.removeClass("target-is-expanded"))}},{key:"onRender",value:function(){var e=this;this.splitView||(this.splitView=new u.SplitView({model:this.model,charityConstants:this.charityConstants,user:this.user,charities:this.charities})),this.splitView.setElement(this.$(".order-form-split:first")),this.splitView.render(),this.splitErrorView||(this.splitErrorView=new l.SplitErrorView({model:this.model})),this.splitErrorView.setElement(this.$(".order-form-split-error:first")),this.splitErrorView.render(),this.childrenSliders||(this.childrenSliders=[],this.model.children.each(function(n){var i=new t({model:n,givingFund:e.givingFund,charityConstants:e.charityConstants,user:e.user,charities:e.charities});e.childrenSliders.push(i)}));var n=this.$(".subsplit-wrapper:first");if(r.default.each(this.childrenSliders,function(e){n.append(e.render().$el)}),this.model.get("subsplit")&&this.model.isCharityClass()){var i=new s.GivingFundDisclaimer({givingFund:this.givingFund,inContext:!0});this.$el.append(i.render().$el)}this.$childSplits=this.$(".order-form-subsplit"),this.$splitDisclosureTriangle=this.$(".order-form-split-payee-label .disclosure-triangle"),this.toggleSubsplits()}}]),t}()).prototype.template=r.default.template(a.default)},1093:function(e,t){e.exports='  <div class="order-form-tides-disclaimer">\n<% if (inContext) { %>\n    Administered by\n<% } else { %>\n    Charitable contributions administered by\n<% } %>\n    <a href="https://support.humblebundle.com/hc/articles/205501708" class="color-neutral-link" target="_blank">Tides Foundation</a>\n  </div>\n'},1094:function(e,t){e.exports='  <div class="order-form-ppgf-tides-disclaimer">\n<% if (inContext) { %>\n    Administered by\n<% } else { %>\n    Charitable contributions administered by\n<% } %>\n    <a href="https://support.humblebundle.com/hc/articles/205183597" class="color-neutral-link" target="_blank">PayPal Giving Fund</a> and <a href="https://support.humblebundle.com/hc/articles/205501708" class="color-neutral-link" target="_blank">Tides Foundation</a>\n  </div>\n'},1095:function(e,t){e.exports='  <div class="order-form-ppgf-disclaimer">\n<% if (inContext) { %>\n    Administered by\n<% } else { %>\n    Charitable contributions administered by\n<% } %>\n    <a href="https://support.humblebundle.com/hc/articles/205183597" class="color-neutral-link" target="_blank">PayPal Giving Fund</a>\n  </div>\n'},1096:function(e,t){e.exports='  <div class="order-form-ppgf-direct-disclaimer">\n<% if (inContext) { %>\n    Administered by\n<% } else { %>\n    Charitable contributions administered by\n<% } %>\n    <a href="https://support.humblebundle.com/hc/articles/205183597" class="color-neutral-link" target="_blank">PayPal Giving Fund</a> or paid directly to the organization.\n  </div>\n'},1097:function(e,t){e.exports='<% if (subsplit && subsplit.length > 1) { %>\n  <div class="order-form-split-header">\n    <a href="#" class="js-split-toggle">\n      <div class="disclosure-triangle<%= expand_subsplits ? \' target-is-expanded\' :\'\' %>"></div>\n      <p class="order-form-split-message js-order-admin-edit" data-entity-kind="product" data-machine-name="<%- productMachineName %>" data-anchor-name="#row_splits" data-link-position="after">\n        <%- gtxt(\'Choose where your money goes\') %>\n      </p>\n      <div class="u-order-form-redesign disclosure-triangle"></div>\n    </a>\n    <button type="button" class="order-form-split-reset-button js-split-reset-button"><%- gtxt(\'Reset\') %></button>\n  </div>\n\n  <div class=\'custom-values\'>\n    <div class=\'custom-values-inner\'>\n      <div class=\'splits-holder\'></div>\n    </div>\n  <% if (splitDisclaimer) { %>\n    <div class="order-form-split-disclaimer">\n      <%- splitDisclaimer %>\n    </div>\n  <% } %>\n    <div class="order-form-split-disclaimer js-upsell-disclaimer" style="display:none">\n      <%- gtxt(\'Payment allocations are only adjustable for your bundle purchase\') %>\n    </div>\n  </div>\n<% } else { %>\n  <% if (sliderReplacementText) { %>\n    <%= sliderReplacementText %>\n  <% } else { %>\n    <%- gtxt(\'All for one and one for all!\') %>\n  <% } %>\n<% } %>\n'},1098:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplitsView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(3)),r=c(n(1));n(359),n(358),n(357);var a=c(n(0)),s=c(n(1097)),l=n(836),u=n(1092);function c(e){return e&&e.__esModule?e:{default:e}}var d=t.SplitsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.charityConstants=e.charityConstants,this.charities=e.charities,this.user=e.user,this.givingFund=e.givingFund,this.listenTo(this.model,"change:expand_subsplits",this.renderSplitState.bind(this)),this.listenTo(this.model,"change:hasUpsell",this.renderUpsellState.bind(this))}},{key:"revertToDefaultSplit",value:function(e){e.preventDefault(),e.stopPropagation(),this.model.children.each(function(e){e.resetToDefaultSiblingSplit()})}},{key:"toggleSplits",value:function(e){e.preventDefault(),this.model.set("expand_subsplits",!this.model.get("expand_subsplits"))}},{key:"renderUpsellState",value:function(){this.model.get("hasUpsell")?this.$upsellDisclaimer.show():this.$upsellDisclaimer.hide()}},{key:"renderSplitState",value:function(){this.model.get("expand_subsplits")?(this.$customValues.slideDown(200),this.$resetButton.fadeIn(),this.$splitDisclosureTriangle.addClass("target-is-expanded")):(this.$customValues.slideUp(200),this.$resetButton.fadeOut(),this.$splitDisclosureTriangle.removeClass("target-is-expanded"))}},{key:"onRender",value:function(){var e=this;if(this.model.children.each(function(t){var n=new u.SingleSliderView({model:t,givingFund:e.givingFund,charityConstants:e.charityConstants,user:e.user,charities:e.charities});e.$(".splits-holder").append(n.render().$el)}),this.model.children.length||(0,r.default)(".js-slider-replacement-text").show(),!this.model.hasCharitySplit()){var t=new l.GivingFundDisclaimer({givingFund:this.givingFund,inContext:!1});this.$el.append(t.render().$el)}this.$splitDisclosureTriangle=this.$(".order-form-split-header .disclosure-triangle"),this.$customValues=this.$(".custom-values"),this.$resetButton=this.$(".js-split-reset-button"),this.$upsellDisclaimer=this.$(".js-upsell-disclaimer")}}]),t}();d.prototype.className="order-form-split-step",d.prototype.events={"click .js-split-reset-button":"revertToDefaultSplit","click .js-split-toggle":"toggleSplits"},d.prototype.template=a.default.template(s.default)},1099:function(e,t){e.exports='<% if (active) { %>\n  <div class="order-summary-monthly-upsell order-summary-row <% if (agreed_to_terms) { %> agreed <% } %>">\n    <div class="order-summary-item-image"><img src="<%= image_url %>"></div>\n    <div class="order-summary-item-description">\n      <div class="order-summary-item-name"><%= human_name %>*</div>\n      <div class="order-summary-item-terms">\n        <label class="js-terms-checkbox">\n        <input class="order-summary-terms-checkbox" type="checkbox"<% if (agreed_to_terms) { %> checked<% }%> />\n        <%- gtxt(\'I understand that Humble Bundle will automatically renew my plan on {renewal_date} when I will be charged {full_price}.\').format({\n          renewal_date: localizeDate(renewal_date, DateFormatConstants.COMPLETE_MONTH),\n          full_price: localizeMoney(full_price, MoneyFormatConstants.SHOW_ZERO_CENTS),\n        }) %>\n        </label>\n  <% if (error_message) { %>\n        <div class="order-summary-item-error"><%= error_message %></div>\n  <% } %>\n      </div>\n      <div class="js-remove-upsell order-summary-item-remove"><%- gtxt(\'Remove\') %></div>\n    </div>\n    <div class="order-summary-item-price">\n      <div class="order-summary-item-price-current"><%= localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS) %></div>\n    <% if (discount_percentage > 0) { %>\n      <div class="order-summary-item-price-full"><%- localizeMoney(full_price, MoneyFormatConstants.SHOW_ZERO_CENTS) %></div>\n    <% } %>\n    <% if (tax_amount) { %>\n      <div class="order-summary-item-price-tax"><%- gtxt(\'Sales Tax: {tax_amount}\').format({tax_amount: localizeMoney(tax_amount, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %></div>\n    <% } %>\n    </div>\n  </div>\n  <div class="js-remove-upsell order-summary-item-remove-mobile"><%- gtxt(\'Remove\') %></div>\n<% } else { %>\n  <div class="js-add-upsell order-summary-upsell-cta">\n    <div class="order-summary-upsell-cta-text">\n  <% if (discount_percentage.gt(0)) { %>\n    <%= gtxt(\'You qualify for {discount_percentage} off your first month of <b>Humble Choice</b>! Sign up for {price}\').format({\n      discount_percentage: localizePercent(discount_percentage),\n      price: localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS),\n    }) %>\n  <% } else { %>\n    <%= gtxt(\'Join <strong>Humble Choice</strong> to choose great games every month to keep forever. This month choose from {description} and more.\').format({\n      description: description,\n    }) %>\n  <% } %>\n    </div>\n    <button class="js-add-to-cart button-v2 rectangular-button orange add-to-cart-button"><%- gtxt(\'Add to cart\') %></button>\n  </div>\n<% } %>\n'},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getWindow=function(){return window}},1100:function(e,t){e.exports='<% if (active) { %>\n<div class="order-summary-item-upsell order-summary-row">\n  <div class="order-summary-item-image"><img src="<%= image_url %>"></div>\n  <div class="order-summary-item-description">\n    <div class="order-summary-item-name"><%= human_name %></div>\n    <div class="order-summary-item-terms">\n  <% if (upsell_is_preorder) { %>\n      <%- gtxt(\'Pre-order\') %>\n  <% } %>\n  <% if (error_message) { %>\n      <div class="order-summary-item-error"><%= error_message %></div>\n  <% } %>\n    </div>\n    <div class="js-remove-upsell order-summary-item-remove"><%- gtxt(\'Remove\') %></div>\n  </div>\n  <div class="order-summary-item-price">\n    <div class="order-summary-item-price-current"><%= localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS) %></div>\n  <% if (discount_percentage > 0) { %>\n    <div class="order-summary-item-price-full"><%= localizeMoney(full_price, MoneyFormatConstants.SHOW_ZERO_CENTS) %></div>\n  <% } %>\n  <% if (tax_amount) { %>\n    <div class="order-summary-item-price-tax"><%- gtxt(\'Sales Tax: {tax_amount}\').format({tax_amount: localizeMoney(tax_amount, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %></div>\n  <% } %>\n  </div>\n</div>\n<div class="js-remove-upsell order-summary-item-remove-mobile"><%- gtxt(\'Remove\') %></div>\n<% } else { %>\n<div class="js-add-upsell order-summary-upsell-cta">\n  <div class="js-add-to-cart order-summary-item-image add-to-cart-image"><img src="<%= image_url %>"></div>\n  <div class="order-summary-upsell-cta-text">\n  <% if (!discount_percentage.isZero()) { %>\n    <strong>\n      <%- gtxt(\'You qualify for {percentage} off {product_name}!\').format({\n        percentage: localizePercent(discount_percentage),\n        product_name: human_name,\n      }) %>\n    </strong><br>\n    <% if (upsell_is_preorder) { %>\n    <%- gtxt(\'Pre-order for {price}\').format({price: localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %>\n    <% } else { %>\n    <%- gtxt(\'Add to your order for {price}\').format({price: localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %>\n    <% } %>\n  <% } else { %>\n    <% if (upsell_is_preorder) { %>\n    <%= gtxt(\'Pre-order <strong>{product_name}</strong> for {price}\').format({\n      product_name: human_name,\n      price: localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS),\n    }) %>\n    <% } else { %>\n    <%= gtxt(\'Add <strong>{product_name}</strong> to your order for {price}\').format({\n      product_name: human_name,\n      price: localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS),\n    }) %>\n    <% } %>\n  <% } %>\n  </div>\n  <button class="js-add-to-cart button-v2 rectangular-button green add-to-cart-button"><%- gtxt(\'Add to cart\') %></button>\n</div>\n<% } %>\n'},1101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonthlyUpsellView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(0)),r=n(837),a=l(n(1099)),s=n(4);function l(e){return e&&e.__esModule?e:{default:e}}(t.MonthlyUpsellView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.UpsellItemView),i(t,[{key:"termsClicked",value:function(){this.model.set("agreed_to_terms",!this.model.get("agreed_to_terms")),this.model.get("agreed_to_terms")&&window._gaTrackEvent("Bundle Upsell","Upsell Terms Checked",this.model.get("machine_name")),this.render()}},{key:"add",value:function(){this.user.get("is_logged_in")?function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).apply(this,arguments):this.signUp()}},{key:"signUp",value:function(){(0,s.setGotoAndRedirect)("/signup")}},{key:"events",value:function(){return o.default.extend(r.UpsellItemView.prototype.events,{"click .js-terms-checkbox":"termsClicked"})}}]),t}()).prototype.template=o.default.template(a.default)},1102:function(e,t){e.exports='<aside class="order-form-error-msg order-form-error-blue">\n  <div class="order-form-error-text-container">\n    <p class="order-form-error-text">\n      Warning: You will not receive the <%- humanName %>!\n      <span class="monthly-upsell-link js-monthly-upsell-link">Subscribe</span>\n      prior to purchase to receive this!\n<% if (!loggedIn) { %>\n      Already a subscriber?\n      <a class="order-form-account-login-button js-account-login">Log in</a>\n<% } %>\n    </p>\n  </div>\n</aside>\n'},1103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionWarningView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(1102));function s(e){return e&&e.__esModule?e:{default:e}}(t.SubscriptionWarningView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.humanName,n=e.loggedIn;this.humanName=t,this.loggedIn=n}},{key:"serializeData",value:function(){return{humanName:this.humanName,loggedIn:this.loggedIn}}}]),t}()).prototype.template=r.default.template(a.default)},1104:function(e,t){e.exports='<div class="order-summary-bundle-item order-summary-row">\n  <div class="order-summary-item-image"><img src="<%= imageUrl %>" alt=""></div>\n  <div class="order-summary-item-description">\n    <div class="sr-only"><%- gtxt(\'Item\') %></div>\n    <div class="order-summary-item-name"><%= humanName %></div>\n    <div class="bundle-item-payment-buttons"></div>\n    <div class="order-form-amount-error-container">\n      <div class="js-bundle-amount-error-container"></div>\n      <div class="js-order-form-subscription-error-container"></div>\n    </div>\n  </div>\n  <div class="order-summary-item-price<% if (!amount_set) {%> is-default<% } %>">\n<% if (!amount_set) { %>\n    <%- gtxt(\'Suggested Price:\') %>\n<% } else { %>\n    <span class="sr-only"><%- gtxt(\'Price:\') %></span>\n<% } %>\n    <%- localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS) %>\n  </div>\n</div>\n'},1105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleItemView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=h(n(3)),r=h(n(0)),a=n(842),s=h(n(1104)),l=n(839),u=n(838),c=n(1103),d=n(7);function h(e){return e&&e.__esModule?e:{default:e}}(t.BundleItemView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.product=e.product,this.bundleImage=e.bundleImage,this.avg=e.avg,this.user=e.user,this.model.on("change:price change:amount_set",this.render.bind(this))}},{key:"serializeData",value:function(){return{humanName:this.product.get("human_name"),imageUrl:this.bundleImage,price:this.model.get("price"),amount_set:this.model.get("amount_set")}}},{key:"onRender",value:function(){new u.RadioAmountSelector({el:this.$(".bundle-item-payment-buttons"),model:this.model,pricingTiers:this.product.get("bundle_display_vars").pricing_tiers,windowSize:new a.WindowSize}).render(),new l.AmountErrorView({el:this.$(".js-bundle-amount-error-container"),model:this.model,product:this.product,personalTotal:new d.Money(0,this.model.get("currency")),avg:this.avg,isOrderAdder:!1}).render(),"active"===window.models.userSubscriptionState.perksStatus||!this.product.get("requires_subscription")||this.model.get("hasMonthlyUpsell")||new c.SubscriptionWarningView({el:this.$(".js-order-form-subscription-error-container"),loggedIn:this.user.get("is_logged_in"),humanName:this.product.get("requires_subscription")}).render()}}]),t}()).prototype.template=r.default.template(s.default)},1106:function(e,t){e.exports='  <div class="order-summary-label"><%- gtxt(\'Order Summary\') %></div>\n  <div class="order-summary-wrapper">\n    <div class="order-summary-container">\n      <div class="order-summary-header order-summary-row">\n        <div class="order-summary-item-image" aria-hidden="true"><%- gtxt(\'Item\') %></div>\n        <div class="order-summary-item-description" aria-hidden="true"><%- gtxt(\'Description\') %></div>\n        <div class="order-summary-item-price" aria-hidden="true"><%- gtxt(\'Price\') %></div>\n      </div>\n    </div>\n    <hr>\n    <div class="order-summary-subtotal">\n      <%- ngtxt(\'TOTAL (1 item):\', \'TOTAL ({num_items} items):\', itemCount).format({num_items: localizeNumber(itemCount)}) %>\n      <span class="order-form-summary-subtotal-amount"><%- localizeMoney(subtotal, MoneyFormatConstants.SHOW_ZERO_CENTS) %></span>\n    </div>\n  </div>\n<% if (hasMonthly) { %>\n  <div class="order-summary-legal-text">\n  <%- gtxt(\'* By confirming payment below, you agree to our Terms of Use, Privacy Policy, and that you are over 18. Humble Bundle will automatically renew your membership on {monthly_date} when you will be charged {monthly_price}. Cancel anytime before your renewal date to not be automatically charged. To cancel, log in to access your membership page and click "Manage Your Plan". All fees, charges and sales are final.\').format({\n    monthly_date: localizeDate(monthlyDate, DateFormatConstants.COMPLETE_MONTH),\n    monthly_price: localizeMoney(monthlyPrice, MoneyFormatConstants.SHOW_ZERO_CENTS),\n  }) %>\n  </div>\n  <hr />\n<% } %>\n'},1107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpsellItem=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),r=u(n(0)),a=n(489),s=u(n(5)),l=n(7);function u(e){return e&&e.__esModule?e:{default:e}}t.UpsellItem=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r.default.isNil(e.monthly_discount_decimal)||(e.monthly_discount_decimal=(0,s.default)(e.monthly_discount_decimal)),r.default.isNumber(e.discount_percentage)&&(e.discount_percentage=(0,s.default)(e.discount_percentage)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{machine_name:"",human_name:"",image_url:"",price:new l.Money((0,s.default)("0"),"USD"),full_price:new l.Money((0,s.default)("0"),"USD"),description:"",upsell_is_preorder:!1,category:"",subscription_content_product:"",discount_percentage:(0,s.default)(0),monthly_discount_decimal:(0,s.default)(0),disallow_subscription_discount:!1,active:!1,agreed_to_terms:!1,renewal_date:"",valid:!0,error_message:"",tax_rate:(0,s.default)(0)}}}]),i(t,[{key:"getOrderFormParameters",value:function(){var e={product:this.get("machine_name")},t=this.get("price"),n=t;if(this.get("eligible_for_monthly_discount")&&(n=this.get("price_after_monthly_discount")),e.amount=t.amount+","+t.currency,this.isMonthly()&&(e.subscription_content_product=this.get("subscription_content_product")),this.get("tax_rate")){var i=this.get("tax_rate"),o=(0,l.calculateRequiredTax)(n,i);e.tax_amount=o.toDP(2,s.default.ROUND_DOWN).amount.toString()}return e}},{key:"validate",value:function(){var e="";return this.isMonthly()&&(this.get("agreed_to_terms")||(e="Please check the box to confirm your membership")),this.set("error_message",e),e}},{key:"isMonthly",value:function(){return this.get("category")===a.PRODUCT_CONSTANTS.PRODUCT_SUBSCRIPTION_PLAN}},{key:"getPreTaxPrice",value:function(){return this.get("eligible_for_monthly_discount")?this.get("price_after_monthly_discount"):this.get("price")}},{key:"getPreTaxFullPrice",value:function(){return this.get("eligible_for_monthly_discount")?this.get("price"):this.get("full_price")}},{key:"getPrice",value:function(){var e=this.getPreTaxPrice(),t=this.getPreTaxPrice();if(this.get("tax_rate")){var n=(0,l.calculateRequiredTax)(e,this.get("tax_rate"));t=t.plus(n.toDP(2,s.default.ROUND_DOWN))}return t}}]),t}()},1108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Upsells=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(1107);var s=t.Upsells=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Collection),t}();s.prototype.comparator=function(e,t){return e.get("active")!=t.get("active")?e.get("active")?-1:1:e.get("machine_name")<t.get("machine_name")?-1:1},s.prototype.model=a.UpsellItem},1109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleOrderSummary=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=m(n(3)),r=m(n(1)),a=m(n(0)),s=m(n(5)),l=n(1108),u=m(n(1106)),c=n(1105),d=n(1101),h=n(837),p=n(14),f=n(7);function m(e){return e&&e.__esModule?e:{default:e}}var y=t.BundleOrderSummary=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.orderFormModel=e.amount_model,this.product=e.product,this.upsells=new l.Upsells(e.upsells),this.orderFormModel.on("change:price",this.updateAmount.bind(this)),this.orderFormModel.on("change:amount_set",this.updateAmount.bind(this)),this.upsells.on("change:tax_rate",this.render),this.upsells.on("change:active",this.updateUpsells.bind(this)),this.on("add:monthlyUpsell",this.addUpsell.bind(this,"monthly_basic")),this.user=e.user,this.bundleImage=e.bundleImage,this.avg=e.avg,this.retrievedSalesTax=!1}},{key:"updateAmount",value:function(){this.orderFormModel.get("price").lt((0,s.default)("1"))&&this.upsells.forEach(function(e){e.set("active",!1)}),this.render()}},{key:"updateUpsells",value:function(e){this.getSalesTax(),e.isMonthly()&&(this.upsells.forEach(function(t){t.isMonthly()||t.get("disallow_subscription_discount")||t.set("eligible_for_monthly_discount",e.get("active"))}),!this.orderFormModel.get("hasMonthlyUpsell")&&this.upsells.some(function(e){return e.get("active")&&e.isMonthly()})?(this.orderFormModel.set("gifting_available",!1),this.orderFormModel.set("hasMonthlyUpsell",!0)):this.orderFormModel.get("hasMonthlyUpsell")&&this.upsells.every(function(e){return!e.get("active")&&e.isMonthly()})&&(this.orderFormModel.set("hasMonthlyUpsell",!1),this.orderFormModel.set("gifting_available",!0))),!this.orderFormModel.get("hasUpsell")&&this.upsells.some(function(e){return e.get("active")})&&this.orderFormModel.set("hasUpsell",!0),this.orderFormModel.get("hasUpsell")&&this.upsells.every(function(e){return!e.get("active")})&&this.orderFormModel.set("hasUpsell",!1),e.get("active")?window._gaTrackEvent("Bundle Upsell","Upsell Added",e.get("machine_name")):window._gaTrackEvent("Bundle Upsell","Upsell Removed",e.get("machine_name")),this.render()}},{key:"getSalesTax",value:function(){var e=this;this.retrieveSalesTax=!0,r.default.ajax({url:"/api/v1/tax_rate",dataType:"json"}).done(function(t){var n=t.tax_rate;e.upsells.forEach(function(e){e.set("tax_rate",(0,s.default)(n))})})}},{key:"serializeData",value:function(){var e=this.upsells.filter({active:!0}),t=e.length+1,n=new f.Money(0,this.orderFormModel.get("currency"));this.orderFormModel.get("amount_set")&&(n=this.getUpsellTotalPrice().plus(this.orderFormModel.get("price")));var i=a.default.find(e,function(e){return e.isMonthly()}),o={itemCount:t,subtotal:n,hasMonthly:Boolean(i)};return i&&(o.monthlyPrice=i.get("full_price"),o.hasMonthly=!0,o.monthlyDate=(0,p.makeHumbleDate)(i.get("renewal_date"))),o}},{key:"getUpsellTotalPrice",value:function(){var e=this.upsells.filter({active:!0});return a.default.reduce(e,function(e,t){return e.plus(t.getPrice())},new f.Money((0,s.default)(0),this.orderFormModel.get("currency")))}},{key:"addUpsell",value:function(e){var t=this.upsells.find(function(t){return t.get("machine_name")===e});t&&t.set("active",!0)}},{key:"onRender",value:function(){var e=this,t=new c.BundleItemView({product:this.product,model:this.orderFormModel,bundleImage:this.bundleImage,avg:this.avg,user:this.user});this.$(".order-summary-container").append(t.render().el),this.orderFormModel.get("price").gte((0,s.default)("1"))&&(this.upsells.sort(),this.upsells.each(function(t){var n=void 0;n=t.isMonthly()?new d.MonthlyUpsellView({model:t,user:e.user}):new h.UpsellItemView({model:t,user:e.user}),e.$(".order-summary-container").append(n.render().el)}))}},{key:"getOrderFormParameters",value:function(){var e=(0,s.default)(0),t=[],n=void 0,i=void 0;a.default.each(this.upsells.where({active:!0}),function(o){t.push(o.getOrderFormParameters()),n=o.getPreTaxPrice(),i=o.getPreTaxFullPrice(),o.get("eligible_for_monthly_discount")&&(e=e.plus(i.amount).minus(n.amount))});var o=e.toDP(2,s.default.ROUND_HALF_UP).toNumber();return{upsell:JSON.stringify(t),discount:o}}},{key:"validate",value:function(){return a.default.every(this.upsells.filter({active:!0}),function(e){return e.isValid()})}}]),t}();y.prototype.template=a.default.template(u.default),y.prototype.triggers={"click .js-monthly-upsell-link":"add:monthlyUpsell"}},1110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderFormPaymentOptionsView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(601),l=n(53),u=n(4);var c=[l.PROCESSOR_CONSTANTS.STRIPE_CHECKOUT,l.PROCESSOR_CONSTANTS.PAYPAL,l.PROCESSOR_CONSTANTS.STORED_CREDENTIAL,l.PROCESSOR_CONSTANTS.YOOMONEY,l.PROCESSOR_CONSTANTS.SIMULATOR];t.OrderFormPaymentOptionsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.PaymentOptionsView),o(t,[{key:"initialize",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this.windowSize=e.windowSize;var n=(0,u.getQueryParam)("show_all_payments"),i=(0,u.isDefaultVersion)(),o=(0,u.isDebugUnsafe)();this.shouldShowAll=n||i||o,this.listenTo(this.model,"change:price change:hasMonthlyUpsell",this.render.bind(this))}},{key:"showMoreOptions",value:function(){this.customView=!1,this.showPopular=!1,this.render()}},{key:"getProcessors",value:function(){var e=[];return e=this.isSetToFree()&&this.collection.get(l.PROCESSOR_CONSTANTS.FREE)?this.isOrderAdder?[]:[this.collection.get(l.PROCESSOR_CONSTANTS.FREE)]:this.customView&&this.collection.get(this.customView)?[this.collection.get(this.customView)]:this.collection.getDefaults(this.shouldShowAll),this.model.get("hasMonthlyUpsell")&&(e=a.default.filter(e,function(e){return a.default.includes(c,e.id)})),this.showPopular&&(e=e.slice(0,3)),e}}]),t}()},1111:function(e,t){e.exports='<label for="leaderboard_topname" class="top-contributor-title">\n  <%- gtxt(\'You\\\'re a top contributor! Please provide a name for our leaderboard:\') %>\n</label>\n<div class="leaderboard-input-group">\n  <input\n    type="text"\n    id="leaderboard_topname"\n    class="order-form-leaderboard-input"\n    name="topname"\n    value="<%- gtxt(\'Anonymous\') %>"\n    maxlength="70" />\n  <a\n    href="javascript:void(0);"\n    class="order-form-leaderboard-no-thanks-button js-no-thanks-button top-contributor-title"\n  ><%- gtxt(\'No thanks\') %></a>\n</div>\n\n<a href="https://support.humblebundle.com/hc/articles/202421394-top-contributor-faq"\n   class="order-form-leaderboard-faq-link"\n   target="_blank"\n   aria-label="<%- gtxt(\'Top Contributor FAQ\') %>">\n  <i class="hb hb-support" aria-hidden="true"></i>\n</a>\n'},1112:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.LeaderboardView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(1111));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.LeaderboardView=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.View),i(n,[{key:"initialize",value:function(e){var t=e.minLeaderboard;this.minLeaderboard=t,this.listenTo(this.model,"change:price",this.renderLeaderboardState.bind(this))}},{key:"showLeaderboardStep",value:function(){this.model.set("topallow",!0),this.$el.slideDown()}},{key:"hideLeaderboardStep",value:function(){this.model.set("topallow",!1),this.$el.slideUp()}},{key:"renderLeaderboardState",value:function(){this.minLeaderboard&&this.model.getCurrentMoney().gt(this.minLeaderboard)?this.showLeaderboardStep():this.hideLeaderboardStep()}},{key:"updateModel",value:function(t){var n=e(t.target);this.model.set(n.attr("name"),n.val())}},{key:"onRender",value:function(){this.renderLeaderboardState()}}]),n}();l.prototype.events={"click .js-no-thanks-button":"hideLeaderboardStep",input:"updateModel"},l.prototype.template=r.default.template(a.default)}).call(this,n(1))},1113:function(e,t){e.exports='  <input\n    id="giftcheckbox"\n    type="checkbox"\n    name="gift"\n    class="giftcheckbox js-gift-box"\n    <% if (gift_selected) { %>checked<% } %>\n    <% if (!gifting_available) { %>disabled="disabled"<% } %>\n  >\n  <i class="hb hb-gift" aria-hidden="true"></i>\n<% if (!gifting_available) { %>\n  <strike aria-hidden="true"><%- gtxt(\'This purchase is a gift.\') %></strike>\n  <br /><label for="giftcheckbox"><%- gtxt(\'Gifting not available on a Choice purchase.\') %></label>\n<% } else { %>\n  <label for="giftcheckbox"><%- gtxt(\'This purchase is a gift.\') %></label>\n<% } %>\n\n<% if (gift_selected) { %>\n  <% if (gift_link) { %>\n  <div><%- gtxt(\'A gift link will be sent to your email.\') %></div>\n  <div class="gift-link-container">\n    <%- gtxt(\'Want to send directly to a friend?\') %> <button type="button" class="js-gift-link color-neutral-link"><%- gtxt(\'Fill in their email.\') %></button>\n  </div>\n  <% } else { %>\n  <label>\n    <span class="sr-only"><%- gtxt("Enter your gift recipient\'s email:") %></span>\n    <input\n      id="gift_email"\n      class="order-form-email-input"\n      type="text"\n      name="gift_email"\n      placeholder="<%- gtxt(\'Enter your gift recipient\\\'s email\') %>"\n    />\n  </label>\n  <div class="order-form-email-error-container"></div>\n  <div>\n    <label>\n      <input type="checkbox" name="gift_anonymous" class="giftcheckbox js-gift-anonymous" <% if (gift_anonymous) { %>checked<% } %> />\n      <%- gtxt(\'Make this gift anonymous\') %>\n    </label>\n  </div>\n  <div>\n    <%- gtxt("Don\'t want to send your gift now?") %> <button type="button" class="js-gift-link color-neutral-link"><%- gtxt(\'Get a giftable link.\') %></button>\n    <span\n      class="order-form-gift-tooltip tooltip-left"\n      data-tooltip="<%- gtxt(\'We\\\'ll send you a unique link to give to anyone you please!\') %>">\n        <i class="hb hb-support"></i>\n    </span>\n  </div>\n  <% } %>\n<% } %>\n'},1114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GiftView=void 0;var i=n(602),o=a(n(0)),r=a(n(1113));function a(e){return e&&e.__esModule?e:{default:e}}(t.GiftView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseGiftView),t}()).prototype.template=o.default.template(r.default)},1115:function(e,t){e.exports='<h1 class="noimg">End User License Agreement</h1>\n<div class="height-constraint">\n  <p class="message-holder"><%= eula %></p>\n</div>\n<div class="button-holder">\n  <a class="button-link cancel js-close-modal" href="javascript:void(0);"><span class="gray-button">Cancel</span></a>\n  <a class="button-link confirm js-modal-submit" href="javascript:void(0);"><span class="green-button">Accept</span></a>\n</div>\n'},1116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EulaModal=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(0)),r=n(17),a=s(n(1115));function s(e){return e&&e.__esModule?e:{default:e}}(t.EulaModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.HumbleModal),i(t,[{key:"initialize",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this.eula=e.eula}},{key:"serializeData",value:function(){return{eula:this.eula}}},{key:"submit",value:function(){this.trigger("eulaAccepted")}}]),t}()).prototype.template=o.default.template(a.default)},1117:function(e,t){e.exports="  <h1 class=\"order-form-image-fan-box-header\">\n    <div class=\"header\">\n<% if (is_pay_what_you_want_tier) { %>\n      <%- gtxt('Pay What You Want') %>\n<% } else if (is_free) { %>\n      <%- gtxt('Free Stuff') %>\n<% } else if (is_bta) { %>\n      <%- gtxt('Beat the Average of {avg_purchase_price}').format({'avg_purchase_price': localizeMoney(avg_purchase_price, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %>\n<% } else { %>\n      <%- gtxt('Pay {tier_price}').format({'tier_price': localizeMoney(price, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %>\n<% } %>\n    </div>\n  </h1>\n  <i class=\"hb hb-check-circle\n            js-order-form-image-fan-check-box\n            order-form-image-fan-check-box\"></i>\n  <div class=\"js-order-form-image-fan-wrapper\n              order-form-image-fan-wrapper\"></div>\n"},1118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutTierView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(3)),r=c(n(1)),a=c(n(0)),s=n(5),l=c(n(1117)),u=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var d=t.CheckoutTierView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.amountModel;this.amountModel=t,this.listenTo(this.amountModel,"change:price",this.updateThresholdMet.bind(this))}},{key:"updateThresholdMet",value:function(){this.isThresholdMet()?this.fadeIn():this.fadeOut()}},{key:"isThresholdMet",value:function(){return this.model.getPriceInDollars().lte(this.amountModel.get("price"))}},{key:"onRender",value:function(){this.updateThresholdMet()}},{key:"fadeIn",value:function(){this.$el.prev().removeClass("s-below-threshold"),this.$el.removeClass("s-below-threshold"),this.$(".js-order-form-image-fan-check-box").removeClass("s-below-threshold")}},{key:"fadeOut",value:function(){this.$el.prev().addClass("s-below-threshold"),this.$el.addClass("s-below-threshold"),this.$(".js-order-form-image-fan-check-box").addClass("s-below-threshold")}},{key:"updatePrices",value:function(e){e.preventDefault(),this.model.get("is_initial_tier")&&!this.model.get("is_fixed")?(this.amountModel.set("price",new u.Money((0,s.Decimal)("0"),this.model.get("currency"))),this.fadeIn(),(0,r.default)(".js-custom-amount-button").click(),(0,r.default)(".js-custom-amount-input").val(""),(0,r.default)(".js-custom-amount-input").focus()):this.amountModel.set("price",this.model.getPriceInDollars())}}]),t}();d.prototype.className="order-form-image-fan-box",d.prototype.events={click:"updatePrices"},d.prototype.template=a.default.template(l.default)},1119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutTiersModel=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(5),l=n(7);t.CheckoutTiersModel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{currency:"USD"}}},{key:"getPriceInDollars",value:function(){var e=this.get("price");return null===e?new l.Money((0,s.Decimal)("1"),this.get("currency")):e}}]),t}()},1120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutTiersCollection=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(1119);(t.CheckoutTiersCollection=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Collection),o(t,[{key:"initialize",value:function(e,t){this.currency=t.currency}},{key:"model",value:function(e,t){return e.currency=this.currency,new s.CheckoutTiersModel(e,t)}}]),t}()).prototype.model=s.CheckoutTiersModel},1121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutTiersView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(1120),l=n(1118);t.CheckoutTiersView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.View),o(t,[{key:"initialize",value:function(e){var t=e.checkoutTiers;this.collection=new s.CheckoutTiersCollection(t,{currency:this.model.get("currency")})}},{key:"render",value:function(){var e=this;return this.collection.length<2?this:(this.collection.each(function(t,n){if(n>0){e.$el.append('<span class="order-form-image-fan-plus-icon">+</span>')}var i=new l.CheckoutTierView({model:t,amountModel:e.model});e.$el.append(i.$el),i.render()}),this)}}]),t}()},1122:function(e,t){e.exports='<label class="order-form-amount-selection-label"><%- gtxt(\'Pay What You Want\') %></label>\n<div class="order-form-amount-buttons-wrapper">\n<% selections.each(function(selection) { %>\n  <% if (selection.id === \'custom\') { %>\n    <% if (editing) { %>\n  <div class="order-form-custom-amount-suggestion"><%- gtxt(\'Suggested amount:\') %> <%- localizeMoney(defaultPrice, MoneyFormatConstants.SHOW_ZERO_CENTS) %></div>\n  <div class="order-form-radio-custom-amount-wrapper">\n    <input\n      type="text"\n      class="order-form-radio-custom-amount-input js-custom-amount-input"\n      value="<%- localizeMoney(customPrice, MoneyFormatConstants.SHOW_ZERO_CENTS) %>" />\n  </div>\n    <% } else { %>\n  <button\n    type="button"\n    class="order-form-radio-custom-amount-button js-custom-amount-button<% if (selection.get(\'selected\')) { %> is-selected<% } %>">\n    <%= selection.escape(\'label\') %>\n  </button>\n    <% } %>\n  <% } else { %>\n  <button\n    type="button"\n    class="order-form-radio-amount-button<% if (selection.get(\'selected\')) { %> is-selected<% } %>"\n    data-value="<%= selection.escape(\'value\') %>">\n    <%= selection.escape(\'label\') %>\n  </button>\n  <% } %>\n<% }); %>\n</div>\n'},1123:function(e,t){e.exports='<% if (custom) { %>\n  <input type="radio" name="radio-amount" class="radio-amount custom-radio-amount" value="custom">\n  <label><%- gtxt(\'Custom Amount\') %></label>\n  <div class="customAmountHolder">\n    <input name="master-amount" class="master-amount" type="text" value="<%- localizeMoney(min_price, MoneyFormatConstants.SHOW_ZERO_CENTS) %>"\n           style="display:none"></input>\n  </div>\n<% } else { %>\n  <input type="radio" name="radio-amount" class="radio-amount" value="<%- localizeMoney(min_price, MoneyFormatConstants.SHOW_ZERO_CENTS) %>"<% if (checked) { %> checked<% } %>>\n  <% if (title) { %>\n  <label><%- localizeMoney(min_price, MoneyFormatConstants.HIDE_ZERO_CENTS) %> - <%- title %></label>\n  <br/>\n  <%= desc %>\n  <br/><br/>\n  <% } else { %>\n  <label><%- localizeMoney(min_price, MoneyFormatConstants.HIDE_ZERO_CENTS) %></label>\n  <br />\n  <% } %>\n<% } %>\n'},1124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmountRadio=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(0)),a=l(n(1123)),s=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.AmountRadio=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.amountModel;this.amountModel=t,this.amountModel.on("change:price",this.removeCustom,this),this.amountModel.on("amountReadjusted",this.removeCustomAfterReadjustment,this)}},{key:"radioButtonClickHandler",value:function(e){this.model.get("custom")&&this.$(".master-amount").fadeIn();var t=this.model.get("min_price");this.amountModel.set("price",t)}},{key:"customAmountChange",value:function(e){var t=(0,s.parseMoneyStringToFloat)(e.target.value),n=new s.Money(t,this.amountModel.get("currency"));this.model.set("min_price",n),this.amountModel.set("price",n)}},{key:"removeCustom",value:function(){this.model.get("custom")&&!this.$(".custom-radio-amount").prop("checked")&&this.$(".master-amount").fadeOut()}},{key:"removeCustomAfterReadjustment",value:function(){this.model.get("custom")&&this.$(".master-amount").fadeOut()}}]),t}();u.prototype.template=r.default.template(a.default),u.prototype.events={"change .master-amount":"customAmountChange","click .radio-amount":"radioButtonClickHandler","blur .master-amount":"customAmountChange","keyup .master-amount":"customAmountChange"}},1125:function(e,t){e.exports="<%- gtxt('Name your price:') %>\n<br>\n<div class=\"radio-collection\"></div>\n"},1126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i};t.Button=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{title:null,desc:null,checked:!1,editing:!1,custom:!1}}}]),t}()},1127:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Buttons=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(1126);(t.Buttons=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Collection),t}()).prototype.model=a.Button},1128:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmountRadios=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(3)),r=c(n(0)),a=n(1127),s=c(n(1125)),l=n(1124),u=n(7);function c(e){return e&&e.__esModule?e:{default:e}}(t.AmountRadios=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.radioButtonAmounts;this.createUpgradeTiers(t)}},{key:"createUpgradeTiers",value:function(e){var t=this;this.tierCollection=new a.Buttons;var n=e.map(function(e){return"custom"===e?{min_price:new u.Money(0,t.model.get("currency")),custom:!0}:{min_price:e}});this.tierCollection.add(n)}},{key:"onRender",value:function(){var e=this;this.tierCollection.each(function(t){e.model.getCurrentMoney().eq(t.get("min_price"))&&t.set("checked",!0);var n=new l.AmountRadio({model:t,amountModel:e.model});e.$(".radio-collection").append(n.render().el)})}}]),t}()).prototype.template=r.default.template(s.default)},1129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleErrorView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(841));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SingleErrorView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.amountModel;this.amountModel=t}},{key:"readjustOrderAmount",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.model.get("price");this.amountModel.set("price",t),this.amountModel.trigger("amountReadjusted"),window._gaTrackEventNoninteractive(void 0,"Order form","Warning clicked to readjust order amount",t)}},{key:"onBeforeDestroy",value:function(){this.$el.fadeOut()}}]),t}();l.prototype.events={"click .js-readjust-order-amount":"readjustOrderAmount"},l.prototype.template=r.default.template(a.default)},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CountdownTimer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(2)),r=a(n(23));function a(e){return e&&e.__esModule?e:{default:e}}(t.CountdownTimer=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"initialize",value:function(e){this.set({endTime:r.default.utc(e.endTime),atTime:r.default.utc(e.atTime)}),this.updateInterval=setInterval(this.updateTimes.bind(this),500),this.updateTimes()}},{key:"updateTimes",value:function(){var e=this.getTimesTillEnd();this.set(e),t.TIME_UNITS.every(function(t){return 0===e[t]})&&clearInterval(this.updateInterval)}},{key:"getTimesTillEnd",value:function(){var e=(0,r.default)();this.set({atTime:e});var t=this.get("endTime");return e.isAfter(t)?{days:0,hours:0,minutes:0,seconds:0}:{days:this.getNumDaysBetweenTimes(e,t),hours:this.getNumHoursBetweenTimes(e,t),minutes:this.getNumMinutesBetweenTimes(e,t),seconds:this.getNumSecondsBetweenTimes(e,t)}}},{key:"getNumDaysBetweenTimes",value:function(e,t){return Math.floor(t.diff(e)/864e5)}},{key:"getNumHoursBetweenTimes",value:function(e,t){return Math.floor(t.diff(e)/36e5%24)}},{key:"getNumMinutesBetweenTimes",value:function(e,t){return Math.floor(t.diff(e)/6e4%60)}},{key:"getNumSecondsBetweenTimes",value:function(e,t){return Math.floor(t.diff(e)/1e3%60)}},{key:"isEndingSoon",value:function(){return this.get("days")<2}}]),t}()).TIME_UNITS=["days","hours","minutes","seconds"]},1130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Error=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i};(t.Error=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Model),t}()).prototype.idAttribute="identifierClass"},1131:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(1130);(t.Errors=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Collection),t}()).prototype.model=a.Error},1132:function(e,t){e.exports='<form id="order-form" class="order-form u-constrain-width" autocomplete="off">\n<% if (product.get(\'disclaimer_text\') && !isOrderAdder) { %>\n  <div class="order-form-disclaimer-text">\n    <%= product.get(\'disclaimer_text\') %>\n  </div>\n<% } %>\n\n  <div class="order-form-header">\n    <p><i class="hb hb-lock"></i>\n      <% if (isOrderAdder) { %>\n        <%- gtxt(\'Add to your order for {product_name}\').format({product_name: product.get(\'human_name\')}) %>\n      <% } else { %>\n        <%- gtxt(\'Purchase {product_name}\').format({product_name: product.get(\'human_name\')}) %>\n      <% } %>\n    </p>\n    <div class="previous-purchases"></div>\n    <div class="order-form-warnings"></div>\n  </div>\n  <div class="order-form-image-fan-container u-order-form-redesign"></div>\n  <div class="order-form-summary"></div>\n  <div class="order-form-amount-selection-step">\n    <div class="order-form-adder-amount-radios"></div>\n<% if (isOrderAdder) { %>\n    <p class="order-form-adder-text">\n     <%- gtxt(\'New Total:\') %> <%- localizeMoney(personalTotal, MoneyFormatConstants.SHOW_ZERO_CENTS) %> + <span class="new-order-amount"></span> = <strong><span class="new-total"></span></strong>\n    </p>\n    <div class="order-form-amount-error-container">\n    </div>\n<% } %>\n\n\n    <div class="order-form-leaderboard-step"></div>\n  </div>\n\n<div id="order-form-split-step"></div>\n\n<% if (!isOrderAdder) { %>\n  <div class="order-form-email-step">\n    <div class="order-form-email-container">\n  <% if (user.get(\'is_logged_in\')) { %>\n      <input\n        id="temail"\n        type="hidden"\n        name="email"\n        value="<%- user.get(\'email\') %>"\n      />\n      <%= gtxt("You\'re getting this bundle for <strong>{email}</strong>. Not you?").format({email: user.get(\'email\')}) %>\n      <a class="order-form-account-logout-button color-neutral-link" href=""><%- gtxt(\'Logout\') %></a>\n  <% } else { %>\n      <input\n        id="temail"\n        class="order-form-email-input"\n        type="text"\n        name="email"\n        placeholder="<%- gtxt(\'Enter your email address here\') %>"\n        autocomplete="on"\n      />\n      <div style="display:inline-block;">\n        <a href="" class="order-form-account-login-button js-account-login">\n          <i class="hb hb-user"></i><%- gtxt(\'Log in (optional)\') %>\n        </a>\n      </div>\n      <div class="order-form-email-error-container"></div>\n    <% if (!user.get(\'is_logged_in\')) { %>\n      <div class="order-form-subscribe-checkbox">\n          <input id="subscribe_checkbox" type="checkbox" name="subscribe" class="js-order-form-newsletter-signup-checkbox order-form-newsletter-signup-checkbox" <% if (newsletterCheckboxInitialStatus) { %>checked<% } %>>\n          <label for="subscribe_checkbox" class="order-form-newsletter-label"><%- gtxt(\'Notify me about upcoming promotions.\') %></label>\n      </div>\n      <p class="order-form-newsletter-notice"><%= gtxt(\'By signing up, you agree to the <a href="/terms" target="_blank">Terms of Service</a> and <a href="/privacy" target="_blank">Privacy Policy</a>. You may unsubscribe from the newsletter at any time.\') %></p>\n    <% } %>\n  <% } %>\n    </div>\n    <div class="order-form-gift-container">\n    </div>\n  </div>\n<% } %>\n\n<% if (streamlabsEnabled) { %>\n  <div class="order-form-streamlabs-step">\n    <input id="twitch_handle" type="text" name="twitch_handle" class="order-form-streamlabs-input">\n    <label for="twitch_handle"><%- gtxt(\'Twitch Username (optional - for use with Streamlabs alerts on Twitch)\') %></label>\n    <div class="order-form-thankname-error-container"></div>\n  </div>\n\n<% } %>\n\n  <div class="order-form-payment-step"></div>\n</form>\n\n<% if (!isOrderAdder) { %>\n\x3c!---\n  TODO (hannah|2015-03-24): Maybe we should have a support_url() function that\n  generates the correct url, rather than hard-coding the support article URL?\n  Also, the span.ppgf-disclaimer exists so that in the future, we could hide it if we\'re\n  not using PPGF for some reason.\n--\x3e\n<div class="u-constrain-width">\n  <p class="order-form-payments-message js-payments-message">\n    <%- gtxt(\'All major credit cards accepted.\') %>\n    <%= additionalDisclaimerText %>\n    <%- gtxt(\'Payment processing fees will be deducted proportionally from the payment amounts you indicate on your slider(s). Fees typically average {fromPercent} to {toPercent} across all transactions, but may vary depending on a number of factors, including your location, purchase price, and payment method. We deduct consumption taxes, where applicable, in the same manner.\').format({\n      fromPercent: localizePercent(0.05),\n      toPercent: localizePercent(0.06),\n    }) %>\n\n    <% if (product.get(\'giving_fund\') == \'ppgf\') { %>\n      <%= gtxt(\'Humble Bundle will pay the indicated amount allocated to charity to the <a {ppgfLinkAttrs}>PayPal Giving Fund</a> (the "Org"). The payment will be made net of applicable administrative fees and sales taxes, VAT, and payment processor fees. We request that the Org distributes the funds to the charity indicated in your Humble Store shopping cart at the time of purchase OR the charity indicated on a product page. The Org retains ultimate discretion and control over the use of the donations they receive from Humble Bundle. You will not be entitled to a tax deduction for contributions made by Humble Bundle to the Org.\').format({\n        ppgfLinkAttrs: \'href="https://support.humblebundle.com/hc/articles/205183597-Humble-Bundle-and-PayPal-Giving-Fund" target="_blank" class="color-neutral-link"\',\n      }) %>\n    <% } else if (product.get(\'giving_fund\') === \'ppgf-tides\') { %>\n      <%= gtxt(\'Humble Bundle will pay the indicated amount allocated to charity to the <a {ppgfLinkAttrs}>PayPal Giving Fund</a> or the <a {tidesLinkAttrs}>Tides Foundation</a> (the "Orgs"). The payment will be made net of applicable administrative fees and sales taxes, VAT, and payment processor fees. We request that the Orgs distribute the funds to the charity indicated in your Humble Store shopping cart at the time of purchase OR the charity indicated on a product page. The Orgs retain ultimate discretion and control over the use of the donations they receive from Humble Bundle. You will not be entitled to a tax deduction for contributions made by Humble Bundle to the Orgs.\').format({\n        ppgfLinkAttrs: \'href="https://support.humblebundle.com/hc/articles/205183597-Humble-Bundle-and-PayPal-Giving-Fund" target="_blank" class="color-neutral-link"\',\n        tidesLinkAttrs: \'href="https://www.tides.org/" target="_blank" class="color-neutral-link"\',\n      }) %>\n    <% } else if (product.get(\'giving_fund\') === \'ppgf-direct\') { %>\n      <%= gtxt(\'Humble Bundle will pay the indicated amount allocated to charity to the <a {ppgfLinkAttrs}>PayPal Giving Fund</a> or directly to the charity (the "Orgs"). The payment will be made net of applicable administrative fees and sales taxes, VAT, and payment processor fees. We request that the Orgs distribute the funds to the charity indicated in your Humble Store shopping cart at the time of purchase OR the charity indicated on a product page. The Orgs retain ultimate discretion and control over the use of the donations they receive from Humble Bundle. You will not be entitled to a tax deduction for contributions made by Humble Bundle to the Orgs.\').format({\n        ppgfLinkAttrs: \'href="https://support.humblebundle.com/hc/articles/205183597-Humble-Bundle-and-PayPal-Giving-Fund" target="_blank" class="color-neutral-link"\',\n      }) %>\n    <% } else if (product.get(\'giving_fund\') === \'tides\') { %>\n      <%= gtxt(\'Humble Bundle will pay the indicated amount allocated to charity to the <a {tidesLinkAttrs}>Tides Foundation</a> (the "Org"). The payment will be made net of applicable administrative fees and sales taxes, VAT, and payment processor fees. We request that the Org distributes the funds to the charity indicated in your Humble Store shopping cart at the time of purchase OR the charity indicated on a product page. The Org retains ultimate discretion and control over the use of the donations they receive from Humble Bundle. You will not be entitled to a tax deduction for contributions made by Humble Bundle to the Org.\').format({\n        tidesLinkAttrs: \'href="https://www.tides.org/" target="_blank" class="color-neutral-link"\',\n      }) %>\n    <% } %>\n    <% if (product.get(\'split_disclaimer\')) { %>\n    <span class="js-order-admin-edit" data-entity-kind="product" data-machine-name="<%- product.get(\'machine_name\') %>" data-anchor-name="#row_strings" data-link-position="append"><%- product.get(\'split_disclaimer\') %></span>\n    <% } %>\n  </p>\n  <div class="order-form-text-expand-wrapper js-text-expand-wrapper">\n    <button type="button" class="no-style-button order-form-text-expand-trigger js-text-expand-trigger">\n      <%- gtxt(\'Details\') %>\n    </button>\n  </div>\n</div>\n<% } %>\n\x3c!--- Needed for Amazon HP Orders ---\x3e\n<div id=\'AmazonPayButtonHolder\' style=\'display:none\'></div>\n\n\x3c!--- Needed for YooMoney Widget Orders ---\x3e\n<div id="yoomoney-checkout" class="is-hidden js-yoomoney-checkout">\n  <span class="yoomoney-text js-yoomoney-text"><%- gtxt(\'Loading YooMoney Checkout...\') %></span>\n  <span class="yoomoney-spinner js-yoomoney-spinner"><i class="hb hb-spinner hb-spin"></i></span>\n</div>\n'},1133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmountModel=t.CHARITY_CLASS=t.CYOC_PLACEHOLDER=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(0)),a=n(5),s=n(7);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.CYOC_PLACEHOLDER="cyoc",c=t.CHARITY_CLASS="charity";t.AmountModel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{price:new s.Money((0,a.Decimal)("0"),"USD"),amount_set:!1,sibling_split:1,default_sibling_split:0,secondary_id:"",has_children:!1,start_index:0,expand_subsplits:!1,hasUpsell:!1,hasMonthlyUpsell:!1,gift_selected:!1,gift_link:!1,gift_anonymous:!1,gifting_available:!0,currency:"USD"}}},{key:"initialize",value:function(){this.set({is_cyoc:this.get("secondary_id").toLowerCase()==u,default_sibling_split:this.get("default_sibling_split")||this.get("sibling_split")}),s.Money.isMoney(this.get("price"))||this.set("price",new s.Money(this.get("price"),this.get("currency"))),this.set("price",this.get("price").toDP(2,a.Decimal.ROUND_DOWN)),this.get("subsplits")&&this.set("subsplit",this.get("subsplits")),this.initializeChildren(),this.on("change:price",this.propagateAmountChangeDown,this)}},{key:"initializeChildren",value:function(){var e=this;this.children=new o.default.Collection;var t=this.get("subsplit");t&&(this.set("has_children",!0),r.default.each(t,function(t){return e.addChild(t)}))}},{key:"getSiblings",value:function(){var e=this;return this.parent.children.filter(function(t){return t.cid!==e.cid})}},{key:"hasCharitySplit",value:function(){return this.children.filter(function(e){return e.isCharityClass()}).length}},{key:"isCharityClass",value:function(){return this.get("class")===c}},{key:"isValid",value:function(e){return this.get("amount_set")?this.isPriceValid(e):(this.trigger("error:price_not_set"),!1)}},{key:"isPriceValid",value:function(e){return!this.get("price").isZero()||e}},{key:"addChild",value:function(e){e.price||null==e.sibling_split||(e.price=this.get("price").mul(e.sibling_split).toDP(2,a.Decimal.ROUND_DOWN)),e.expand_subsplits=this.get("expand_subsplits");var n=new t(e);n.parent=this,this.children.add(n)}},{key:"getCurrentMoney",value:function(){return this.get("price")}},{key:"distributePricesDownOneLevel",value:function(){if(this.children.length){for(var e=this.children.reduce(function(e,t){return t.get("price").add(e)},(0,a.Decimal)("0")),t=this.get("price").sub(e),n=this.get("start_index");t.gt(0);){var i=this.children.at(n%this.children.length);i.set("price",i.get("price").add((0,a.Decimal)("0.01"))),t=t.sub((0,a.Decimal)("0.01")),n++}this.set("start_index",n)}}},{key:"loadFromLocalStorage",value:function(e){this.set("amount_set",!!e.amount_set),r.default.isObject(e.price)&&this.set("price",s.Money.fromObject(e.price)),r.default.isNumber(e.sibling_split)&&this.set("sibling_split",(0,a.Decimal)(e.sibling_split)),e.subsplit&&e.subsplit.length===this.children.length&&this.children.each(function(t,n){t.loadFromLocalStorage(e.subsplit[n])})}},{key:"resetToDefaultSiblingSplit",value:function(){var e=this.parent.get("price");this.set("sibling_split",this.get("default_sibling_split")),this.set("price",e.mul(this.get("sibling_split")).toDP(2,a.Decimal.ROUND_DOWN)),this.children.each(function(e){return e.resetToDefaultSiblingSplit()})}},{key:"propagateAmountChangeDown",value:function(){this.set("amount_set",!0);var e=this.get("price");this.children.each(function(t){var n=e.mul(t.get("sibling_split")).toDP(2,a.Decimal.ROUND_DOWN);t.set({price:n}),t.unset("error")}),this.distributePricesDownOneLevel()}},{key:"setNewSplit",value:function(e){var t=this.parent.get("price");if(!t.isZero()){var n=t.mul(e).toDP(2,a.Decimal.ROUND_DOWN),i=t.sub(this.get("price")),o=t.sub(n);this.set({sibling_split:e,price:n}),this._updateSiblings(i,o)}}},{key:"setNewPrice",value:function(e){var t=this.parent.get("price");if(!t.isZero()){var n=t.sub(this.get("price")),i=t.sub(e);this.set({sibling_split:e.div(t).toNumber(),price:e}),this._updateSiblings(n,i)}}},{key:"_updateSiblings",value:function(e,t){var n=this.parent.get("price"),i=this.getSiblings();r.default.each(i,function(o){var r=1/i.length;!e.eq((0,a.Decimal)("0.0"))&&t.gt((0,a.Decimal)("0.0"))&&(r=o.get("price").div(e).toNumber());var s=t.mul(r).toDP(2,a.Decimal.ROUND_DOWN);o.set({sibling_split:s.div(n).toNumber(),price:s})}),this.parent.distributePricesDownOneLevel()}},{key:"serializeTree",value:function(){var e=this.attributes;return delete e.error,this.children.length&&(e.subsplit=this.children.map(function(e){return e.serializeTree()})),e}},{key:"flattenPercentageTree",value:function(e){void 0===e&&(e=1);var t=this.get("sibling_split")*e;if(!this.children.length){var n=this.get("class"),i=this.get("secondary_id");i&&(n+="-"+i);var o={};return o["split-"+n]=100*t,o}return this.children.reduce(function(e,n){return i=e,o=n.flattenPercentageTree(t),r.default.each(o,function(e,t){o.hasOwnProperty(t)&&(i.hasOwnProperty(t)?i[t]+=o[t]:i[t]=o[t])}),i;var i,o},{})}}]),t}()},1134:function(e,t){e.exports='<div class="payment-blocker">\n  <div class="bundle-warn-payment">\n    <%= warning %>\n    <button class="bundle-warn-dismiss js-payment-warning"><%= buttonText %></button>\n  </div>\n</div>\n'},1135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentWarningView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(3)),a=l(n(0)),s=l(n(1134));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.PaymentWarningView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),i(t,[{key:"initialize",value:function(e){var t=e.warning,n=e.buttonText;this.model=new o.default.Model({warning:t,buttonText:n})}},{key:"dismissPaymentWarning",value:function(){this.$el.fadeOut(400)}}]),t}();u.prototype.events={"click .js-payment-warning":"dismissPaymentWarning"},u.prototype.template=a.default.template(s.default)},1136:function(e,t){e.exports='<div class="grey-warning-box order-form-warning">\n  <%= warning %>\n</div>\n'},1137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderFormWarningView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(3)),a=l(n(0)),s=l(n(1136));function l(e){return e&&e.__esModule?e:{default:e}}(t.OrderFormWarningView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),i(t,[{key:"initialize",value:function(e){var t=e.warning;this.model=new o.default.Model({warning:t})}}]),t}()).prototype.template=a.default.template(s.default)},1138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrderForm=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=F(n(3)),r=F(n(2)),a=F(n(1)),s=F(n(0)),l=n(39),u=n(560),c=n(79),d=n(1137),h=n(1135),p=n(12),f=n(53),m=n(32),y=n(9),v=n(1133),g=n(842),_=F(n(1132)),b=F(n(841)),w=n(840),O=n(839),S=n(1128),C=n(838),E=n(1121),k=n(1116),P=n(1114),j=n(1112),T=n(1110),R=n(1109),M=n(1098),x=n(1082),N=n(25),A=n(378),I=n(4),D=n(103),L=n(75),U=n(11);function F(e){return e&&e.__esModule?e:{default:e}}var V=function(e){(0,a.default)("html,body").animate({scrollTop:e.offset().top},1e3)};(0,a.default)(function(){(0,a.default)(["a[href=#contribute]","a[href=#mailing-list]"].join(", ")).off("click").click(function(){if(location.pathname.replace(/^\//,"")===(void 0).pathname.replace(/^\//,"")&&location.hostname===(void 0).hostname){var e=(0,a.default)((void 0).hash);if((e=e.length?e:(0,a.default)("[name="+(void 0).hash.slice(1)+"]")).length)return V(e),!1}})});var B=t.OrderForm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"defaults",value:function(){return{split_dict:null,text_input:null}}},{key:"initialize",value:function(e){var t=this;if(this.options=e,this.product=e.product,this.humbleOrder=e.humbleOrder,this.request=e.request,this.user=e.user,this.charities=e.charities,this.softLockMessages=e.softLockMessages||{},this.isEUCountry=e.isEUCountry,this.upsells=e.upsells||[],this.bundleImage=e.bundleImage,this.allowedPaymentProcessors=e.allowedPaymentProcessors,this.defaultDollarPrice=this.product.get("default_dollar_price"),this.checkoutTiers=e.checkoutTiers||[],this.isOrderAdder=this.humbleOrder.isDefined(),this.isOrderAdder){this.avgstring=this.humbleOrder.get("avg_in_usd");var n=this.humbleOrder.get("avg");this.avg=n||null,this.avguuid=this.humbleOrder.get("avguuid"),this.avghash=this.humbleOrder.get("avghash")}else{this.avgstring=this.product.get("order_form_vars").avg_in_usd;var i=this.product.get("order_form_vars").avg;this.avg=i||null,this.avguuid=this.product.get("order_form_vars").avguuid,this.avghash=this.product.get("order_form_vars").avghash}this.personalTotal=this.humbleOrder.get("cleanfamilytotal"),this.gamekeyToAddTo=this.humbleOrder.get("gamekey"),this.eulaAccepted=!1,this.LOCALSTORAGE_KEY="hborderformv3",s.default.bindAll(this,"saveToLocalstorage","validateEmailField","submitOrderForm","hideEmailMessages","showEmailMessage","liveEmailCheckCallback","updateAmount"),this.ui={},this.pricingTiers=this.product.get("bundle_display_vars").pricing_tiers;var o=this.options.currency;this.isOrderAdder&&(o=this.humbleOrder.get("currency"));var r=(0,w.getRadioButtonAmounts)(this.pricingTiers,o),l=this.getDefaultPrice(r,this.defaultDollarPrice);this.model=new v.AmountModel({price:l,default_price:l,subsplit:this.product.get("splits"),expand_subsplits:this.product.get("expand_default_split"),currency:o});var u=this.getLocalStorageInfo();u&&u.modelTree&&!this.isOrderAdder&&(this.model.loadFromLocalStorage(u.modelTree),this.model.set("purchase_history",u.purchaseHistory)),this.model.on("change:price",this.updateAmount),this.listenTo(this.model,"change:submit_form",this.submitOrderForm),(0,a.default)(window).bind("beforeunload",this.saveToLocalstorage),this.newsletterCheckboxInitialStatus=!("CA"==this.request.country_code||this.isEUCountry&&this.model.getCurrentMoney().eq(0)),this.countryCode=this.request.country_code,window.AmazonPaymentReady=function(){window.OffAmazonPayments.Button("AmazonPayButtonHolder","A2608GUH2GJY52",{type:"hostedPayment",hostedParametersProvider:function(e){e(t.amazonParams)},onError:function(e){}})},this.windowSize=new g.WindowSize,this.paymentOptionsView=new T.OrderFormPaymentOptionsView({hasFreeContent:this.product.get("has_free_content"),windowSize:this.windowSize,model:this.model,paymentCredentials:this.user.get("payment_credentials"),isOrderAdder:this.isOrderAdder}),this.paymentOptionsView.generateProcessorCollection(this.allowedPaymentProcessors,this.countryCode),this.giftView=new P.GiftView({model:this.model}),this.isOrderAdder?this.orderAdderInit(r):this.bundleFormInit(),this.softLockMessages.order_form_warning&&(this.orderFormWarningView=new d.OrderFormWarningView({warning:this.softLockMessages.order_form_warning})),this.softLockMessages.payment_warning&&(this.paymentWarningView=new h.PaymentWarningView({warning:this.softLockMessages.payment_warning,buttonText:this.softLockMessages.payment_warning_button_text})),this.model.set({productMachineName:this.product.get("machine_name"),splitDisclaimer:this.product.get("split_disclaimer"),sliderReplacementText:this.product.get("slider_replacement_text")}),this.splitsView=new M.SplitsView({givingFund:this.product.get("giving_fund"),charityConstants:this.options.charityConstants,user:this.user,charities:this.charities,model:this.model}),this.checkoutTiers.length&&(this.checkoutTiersView=new E.CheckoutTiersView({checkoutTiers:this.checkoutTiers,model:this.model})),this.leaderboardView=new j.LeaderboardView({model:this.model,minLeaderboard:this.product.get("order_form_vars").min_leaderboard})}},{key:"bundleFormInit",value:function(){this.amountRadios=new C.RadioAmountSelector({model:this.model,pricingTiers:this.pricingTiers,windowSize:this.windowSize}),this.orderSummary=new R.BundleOrderSummary({amount_model:this.model,product:this.product,avg:this.avg,upsells:this.upsells,user:this.user,bundleImage:this.bundleImage}),this.previousPurchaseView=new x.PreviousPurchasesView({model:this.model})}},{key:"bundleFormOnRender",value:function(){var e=this.getLocalStorageInfo();this.emailInput=this.$("#temail"),e&&!this.user.isLoggedIn()&&this.emailInput.val(e.email),this.$(".order-form-summary").append(this.orderSummary.render().el),this.$(".order-form-header .previous-purchases").append(this.previousPurchaseView.render().el),this.$(".order-form-radio-amount-selector").append(this.amountRadios.render().el)}},{key:"orderAdderInit",value:function(e){this.amountRadios=new S.AmountRadios({model:this.model,radioButtonAmounts:e}),this.amountErrorView=new O.AmountErrorView({model:this.model,product:this.product,personalTotal:this.personalTotal,avg:this.avg,isOrderAdder:this.isOrderAdder})}},{key:"orderAdderOnRender",value:function(){this.$(".order-form-amount-error-container").append(this.amountErrorView.render().el),this.$(".order-form-adder-amount-radios").append(this.amountRadios.render().el)}},{key:"onRender",value:function(){var e=this;this.$(".order-form-payment-step").append(this.paymentOptionsView.render().el),this.$(".order-form-gift-container").append(this.giftView.render().el),this.$(".order-form-leaderboard-step").append(this.leaderboardView.render().el),this.checkoutTiersView&&this.$(".order-form-image-fan-container").append(this.checkoutTiersView.render().el),this.orderFormWarningView&&this.$(".order-form-header .order-form-warnings").append(this.orderFormWarningView.render().el),this.paymentWarningView&&this.$(".order-form-payment-step").append(this.paymentWarningView.render().el),this.splitsView&&this.$("#order-form-split-step").append(this.splitsView.render().el),(0,A.bindEmailField)(this.$("#temail"),this.liveEmailCheckCallback),this.isOrderAdder?this.orderAdderOnRender():this.bundleFormOnRender(),this.user.get("has_admin_access")&&(0,c.renderTinyLinks)({linkPlacement:"after"},this.$(".js-order-admin-edit")),this.updateAmount(),this.$(".order-form-account-login-button").click(this.saveToLocalstorage),this.$(".order-form-account-logout-button").click(function(t){t.preventDefault(),e.saveToLocalstorage(),(0,I.logoutUser)()}),this.isEUCountry&&(0,a.default)(".js-order-form-newsletter-signup-checkbox").prop("checked",this.model.getCurrentMoney().gt(0))}},{key:"serializeData",value:function(){return{newsletterCheckboxInitialStatus:this.newsletterCheckboxInitialStatus,user:this.user,product:this.product,order:this.humbleOrder,isOrderAdder:this.isOrderAdder,expandSubsplits:this.expandSubsplits,personalTotal:this.personalTotal,streamlabsEnabled:this.options.streamlabsEnabled,additionalDisclaimerText:this.constructAdditionalDisclaimerText()}}},{key:"saveToLocalstorage",value:function(){var e=(0,I.getLocalStorage)(),t={productMachineName:this.product.get("machine_name"),splitsHash:this.splitsHash,modelTree:this.model.serializeTree()};this.isOrderAdder||(t.email=this.emailInput.val());var n=JSON.stringify(t);e.setItem(this.LOCALSTORAGE_KEY,n)}},{key:"getLocalStorageInfo",value:function(){var e=(0,I.getLocalStorage)(),t=e.getItem(this.LOCALSTORAGE_KEY);if(t){var n=JSON.parse(t);if(n.productMachineName===this.product.get("machine_name")&&(this.splitsHash=(0,w.hashObject)(this.product.get("splits")).toString(),n.splitsHash===this.splitsHash)){var i="purchase-history-"+this.product.get("machine_name");return n.purchaseHistory=JSON.parse(e.getItem(i))||{},n}}}},{key:"getDefaultPrice",value:function(e,t){var n=t;if(s.default.findIndex(e,function(e){return"custom"!==e&&e.eq(t)})<0)for(var i=e.length-1;i>=0;i--){var o=e[i];if("custom"!=o&&o.lt(t)){n=o;break}}return n}},{key:"handleFreePurchaseWithAuthRequired",value:function(){var e=void 0,t={};return this.user.isLoggedIn()?(this.user.get("has_steam_link")||(e=u.AccountSteamLinkProductModal,t.productHumanName=this.product.get("human_name"),t.productRedirect=this.product.get("pretty_path"),t.isProductFree=!0),!e||(new e({attributes:s.default.assignIn({},window.modal_attributes,t)}).render(),!1)):((0,U.getWindow)().set_flash((0,y.gtxt)("You must be logged into a Humble Bundle account to redeem your free copy of {product_name}").format({product_name:this.product.get("human_name")})),(0,I.setGotoAndRedirect)("/signup"),!1)}},{key:"hideButtonsIfYooMoneyCheckout",value:function(){this.model.get("selected_processor").processor===f.PROCESSOR_CONSTANTS.YOOMONEY&&((0,a.default)(".js-yoomoney-checkout").removeClass("is-hidden"),(0,a.default)(".js-purchase-in-progress-spinner").addClass("is-hidden"),(0,a.default)(".js-payments-message").addClass("is-hidden"),(0,a.default)(".js-text-expand-wrapper").addClass("is-hidden"))}},{key:"submitOrderForm",value:function(){this.validateForm()}},{key:"onValidation",value:function(){if(this.model.get("price").eq(0)&&this.product.get("auth_required_for_purchase_if_free")&&!this.handleFreePurchaseWithAuthRequired())this.model.set("in_progress",!1);else{if(this.product.get("eula")&&!this.eulaAccepted)return this.showEula(),void this.model.set("in_progress",!1);var e=this.model.get("selected_processor"),t=e.processor,n=e.paymentType,i=this.buildOrder(t,n);window._gaTrackEvent(void 0,"Order form","Pay with "+t+" clicked"),(0,N.logProgrammaticEvent)("event","statistics","Fes8T.zTZ.HlWvxYbSBp6javBp1kTeyP"),this.model.set("in_progress",!0);var o=this.orderSummary&&this.orderSummary.upsells.some(function(e){return e.isMonthly()&&e.get("active")}),r=this.orderSummary&&this.orderSummary.upsells.some(function(e){return!e.isMonthly()&&e.get("active")&&!e.get("disallow_subscription_discount")});((0,L.hasRewardsPerks)()||o)&&r&&i.set("auto_coupon",m.SUBSCRIPTION_CONSTANTS.CHOICE_STORE_DISCOUNT_COUPON),this.formSubmit(i)}}},{key:"mapPaymentProcessors",value:function(e){var t={amazonhp:"Amazon Payments",paypal:"PayPal",yandex:"YooMoney"};return e.map(function(e){return t[e]}).filter(function(e){return void 0!==e})}},{key:"constructAdditionalDisclaimerText",value:function(){var e=this.product.get("disallowed_payment_processors")||[],t=[],n="";return s.default.includes(e,f.PROCESSOR_CONSTANTS.PAYPAL)||t.push(f.PROCESSOR_CONSTANTS.PAYPAL),s.default.includes(e,f.PROCESSOR_CONSTANTS.AMAZONHP)||t.push(f.PROCESSOR_CONSTANTS.AMAZONHP),s.default.includes(e,f.PROCESSOR_CONSTANTS.YOOMONEY)||t.push(f.PROCESSOR_CONSTANTS.YOOMONEY),(t=this.mapPaymentProcessors(t)).length&&(n=(0,y.gtxt)("Payments via bank account are also supported by the following: {list_of_payment_processors}.").format({list_of_payment_processors:(0,y.localizeList)(t,y.ListTypeConstants.AND)})),n}},{key:"buildOrder",value:function(e,t){var n=new r.default.Model(this.model.flattenPercentageTree());n.set({amount:this.model.get("price").amount.toNumber(),avg:this.avgstring,avguuid:this.avguuid,avghash:this.avghash,email:this.$("#temail").val(),payment_type:t,processor:e,product:this.product.get("machine_name"),abtests:JSON.stringify(this.options.abtests),charity_id:this.user.get("charity_id"),currency:this.model.get("currency")}),this.isOrderAdder||n.set(this.orderSummary.getOrderFormParameters()),n.set(this.giftView.getOrderFormParameters()),this.$("input[name=subscribe]").prop("checked")&&n.set("subscribe","on"),this.$("input[name=third_party_subscribe]").prop("checked")&&n.set("third_party_subscribe","on"),this.humbleOrder.get("gamekey")&&n.set("gamekey",this.humbleOrder.get("gamekey"));var i=this.model.get("topallow");return i&&n.set({topallow:i,topname:this.model.get("topname")||"Anonymous"}),"stored_credential"==e&&n.set("payment_credential_uid",this.paymentOptionsView.defaultPaymentCredentialUid),n.set("partner_thankname",this.$("#twitch_handle").val()),n}},{key:"formSubmit",value:function(e){var t=this;this.hideButtonsIfYooMoneyCheckout();var n=Stripe(this.product.get("order_form_vars").stripe_pubkey);a.default.ajax({type:"POST",url:"/humbler/submit",data:e.attributes,dataType:"json",success:function(e){if("requires_action"===e.error&&(0,D.handleStripeAction)(n,e.payment_intent_client_secret,function(e){t.model.set("in_progress",!1)}),e.stripe_session_id&&n.redirectToCheckout({sessionId:e.stripe_session_id}),e.amazon_params)t.handleAmazonResponse(e.amazon_params);else if(e.redirect_url)window.location.href=e.redirect_url;else if(e.confirmation_token){new YooMoneyCheckoutWidget({confirmation_token:e.confirmation_token,return_url:""+window.location.origin+e.return_url,error_callback:function(e){"token_expired"==e?(0,l.displayDialog)((0,y.gtxt)("Error"),(0,y.gtxt)("Purchase token is expired. Please try again."),window.location.href):"internal_service_error"==e&&(0,l.displayDialog)((0,y.gtxt)("Error"),(0,y.gtxt)("There was a problem with YooMoney when processing your order. Please try again."),window.location.href)}}).render("yoomoney-checkout"),(0,a.default)(".js-yoomoney-spinner").addClass("is-hidden"),(0,a.default)(".js-yoomoney-text").addClass("is-hidden")}}})}},{key:"validateEmailField",value:function(){var e=this.emailInput.val();return(0,I.isValidEmail)(e)}},{key:"showEula",value:function(){var e=this,t=new k.EulaModal({eula:this.product.get("eula")});this.listenToOnce(t,"eulaAccepted",function(){e.eulaAccepted=!0,e.submitOrderForm()}),t.render()}},{key:"updateAmount",value:function(){if(this.isOrderAdder){var e=this.model.getCurrentMoney();e.eq(0)||this.model.set("amount_set",!0),(0,a.default)(".new-order-amount").html((0,y.localizeMoney)(e,p.MoneyFormatConstants.SHOW_ZERO_CENTS)),(0,a.default)(".new-total").html((0,y.localizeMoney)(this.personalTotal.add(e),p.MoneyFormatConstants.SHOW_ZERO_CENTS))}}},{key:"showThanknameMessage",value:function(e){if(e){var t=this.$(".order-form-thankname-error-container"),n=s.default.template(b.default)({errorText:e,identifierClass:"order-form-msg-is-error",warningClass:""});(0,a.default)(n).appendTo(t).fadeIn()}}},{key:"showEmailMessage",value:function(e,t,n){if(t){var i=e.siblings(".order-form-email-error-container"),o=s.default.template(b.default)({errorText:n?"Please enter a valid email address":t,identifierClass:n?"order-form-msg-is-error":"order-form-msg-is-warning",warningClass:""}),r=(0,a.default)(o).appendTo(i);return r.fadeIn(),r}}},{key:"hideEmailMessages",value:function(e){e.siblings(".order-form-email-error-container").empty(),this.$markInputAsValid(e)}},{key:"liveEmailCheckCallback",value:function(e,t,n){return this.hideEmailMessages(e),t?(n?this.$markInputAsInvalidWithError(e):this.$markInputAsInvalidWithWarning(e),this.showEmailMessage(e,t,n)):null}},{key:"$markInputAsInvalidWithError",value:function(e){e.addClass("order-form-input-is-invalid-with-error")}},{key:"$markInputAsInvalidWithWarning",value:function(e){e.addClass("order-form-input-is-invalid-with-warning")}},{key:"$markInputAsValid",value:function(e){e.removeClass("order-form-input-is-invalid-with-error order-form-input-is-invalid-with-warning")}},{key:"preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"validateForm",value:function(){if(this.model.get("in_progress"))return!1;if(!this.isOrderAdder){if(!this.validateEmailField())return this.showEmailMessage(this.emailInput,"Please enter a valid email.",!0),!1;if(this.hideEmailMessages(this.emailInput),!this.orderSummary.validate()){var e=(0,a.default)(".order-form-summary");return V(e),!1}}if(!this.validateGiftEmail(this))return!1;if(!this.model.isValid(this.product.get("has_free_content"))){var t=(0,a.default)(".order-form-summary");return V(t),!1}if(!this.validatePartnerThankname())return!1;this.onValidation()}},{key:"validateGiftEmail",value:function(){var e=this.$("#gift_email");if(e.length){var t=e.val();return(0,I.isValidEmail)(t)?(this.hideEmailMessages(e),!0):(this.$markInputAsInvalidWithError(e),this.showEmailMessage(e,"Please enter a valid email.",!0),!1)}return!0}},{key:"validatePartnerThankname",value:function(){var e=!0,t=this.$("#twitch_handle").val();return t?(t.length>300&&(this.showThanknameMessage("Exceeds 300 character limit"),e=!1),t.indexOf("\n")>-1&&(this.showThanknameMessage('"\n" is not allowed'),e=!1),e&&this.$(".order-form-thankname-error-container").empty(),e):(this.$(".order-form-thankname-error-container").empty(),e)}},{key:"redirectToLogin",value:function(e){e.preventDefault(),(0,I.setGotoAndRedirect)("/login")}},{key:"handleAmazonResponse",value:function(e){this.amazonParams=e,this.$("#AmazonPayButtonHolder img").click()}},{key:"expandFormDetails",value:function(){this.$(".js-payments-message").addClass("expanded"),this.$(".js-text-expand-trigger").hide()}}]),t}();B.prototype.events={"submit #order-form":"preventDefault","change #temail":"validateEmailField","click .js-account-login":"redirectToLogin","click .js-text-expand-trigger":"expandFormDetails"},B.prototype.template=s.default.template(_.default)},1139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Product=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(2)),r=s(n(5)),a=n(7);function s(e){return e&&e.__esModule?e:{default:e}}(t.Product=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{machine_name:"",category:"",start:"",end:"",expand_subsplits:!1,media_type:"",tpkd_cutoff_price:new a.Money((0,r.default)("1.00"),"USD"),stats_template:"",cutoff_warning_override:"",monetary_content_event_data:{},has_free_keys:"",default_dollar_price:new a.Money((0,r.default)("25"),"USD"),has_free_content:!1,disclaimer_text:"",order_form_vars:{},bundle_display_vars:{},giving_fund:"ppgf"}}}]),t}()).prototype.idAttribute="machine_name"},1140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HumbleOrder=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i};(t.HumbleOrder=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{gamekey:"",amount:0,cleanfamilytotal:{amount:0,currency:"USD"},avg:null,avg_in_usd:0,avghash:"",avguuid:""}}},{key:"isDefined",value:function(){return""!==this.get("gamekey")}}]),t}()).prototype.idAttribute="gamekey"},1141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderFormInit=void 0;var i=n(1140),o=n(1139),r=n(1138);t.orderFormInit=function(e){var t=new o.Product(e.models.product_json),n=new i.HumbleOrder(e.models.keyentity_json),a=new r.OrderForm({product:t,humbleOrder:n,request:e.models.request,streamlabsEnabled:e.streamlabsEnabled,user:e.user,charities:e.charities,checkoutTiers:e.models.checkout_tiers,el:e.$el,charityConstants:e.charityConstants,allowedPaymentProcessors:e.allowedPaymentProcessors,softLockMessages:e.softLockMessages,isEUCountry:e.isEUCountry,upsells:e.upsells,bundleImage:e.bundleImage,currency:e.currency});return a.render(),a}},1142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GENERAL_ERROR="generalError",t.UNREMIND_SUCCESS="unremindSuccess",t.REMIND_SUCCESS="remindSuccess",t.PROCESSING_DONE="processingDone",t.CUTOFF_REACHED="cutoffReached",t.IN_PROGRESS="inProgress",t.REDIRECT_TO_LOGIN="redirectToLogin"},1143:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToCharity=t.scrollToCheckout=void 0;var i,o=n(370),r=(i=o)&&i.__esModule?i:{default:i},a=n(25);t.scrollToCheckout=function(){var t=r.default.createScroller(null,680,50),n=e(".js-checkout-scroll-target");t.to(n[0]),(0,a.logProgrammaticEvent)("event","statistics","Fes8T.m2Z.h_VoxA_xMlQRcz1I_-KZ1P")},t.scrollToCharity=function(){var t=r.default.createScroller(null,680,150),n=e(".js-charity-scroll-target");t.to(n[0])}}).call(this,n(1))},1144:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CharityRow=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(194);t.CharityRow=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.View),o(n,[{key:"initialize",value:function(e){var t=e.constants,n=e.user;this.constants=t,this.user=n}},{key:"attachEvents",value:function(){var t=this;e("[data-display-modal]").each(function(n,i){var o=e(i),r=o.data("display-modal"),a=t.collection.get(r);if(a){a.set({logo_url:a.get("resolved_paths").preview_image||a.get("ppgf_info").logo_url,description:a.get("description_text")||a.get("ppgf_info").description,charity_id:void 0,ppgf_disclaimer:!a.get("description_text")});var l=void 0;a.get("developers")&&a.get("developers")[0]&&(l=a.get("developers")[0].developer_url),a.set("url",l),o.on("click",function(){new s.CharityDetailsView({constants:t.constants,user:t.user,model:a}).render()})}})}}]),n}()}).call(this,n(1))},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityDisplayItem=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i};(t.CharityDisplayItem=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Model),t}()).prototype.idAttribute="machine_name"},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityDisplayItemCollection=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(1145);(t.CharityDisplayItemCollection=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Collection),t}()).prototype.model=a.CharityDisplayItem},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeCharityRow=void 0;var i=n(1146),o=n(1144);t.initializeCharityRow=function(e){var t=e.charityData,n=e.constants,r=e.user,a=new i.CharityDisplayItemCollection(t);new o.CharityRow({user:r,constants:n,collection:a}).attachEvents()}},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNavbarTextByTier=t.loadImages=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(12),s=n(9),l=n(4);t.loadImages=function(){var e=void 0;e=(0,l.isRetinaDisplay)()?"retina-src":"src";var t=(0,r.default)("img[data-"+e+"]");t.on("load",function(e){(0,r.default)(e.target).closest(".u-lazy-load").addClass("s-loaded")}).on("error",function(e){(0,r.default)(e.target).closest(".u-lazy-load").addClass("s-error")}),t.each(function(t,n){(0,r.default)(n).attr("src",(0,r.default)(n).data(e))})},t.getNavbarTextByTier=function(e){return e.is_pay_what_you_want_tier?(0,s.gtxt)("Pay What You Want"):e.is_free?(0,s.gtxt)("Free Stuff"):e.is_bta?(0,s.gtxt)("Beat the Average"):(0,s.gtxt)("Pay {tier_price}+").format({tier_price:(0,s.localizeMoney)(e.price,a.MoneyFormatConstants.SHOW_ZERO_CENTS)})}},116:function(e,t,n){
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){var i,o,r;o=[e,n(7)],void 0===(r="function"==typeof(i=function(e,t){"use strict";var n,i=(n=t)&&n.__esModule?n:{default:n},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return r(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})?i.apply(t,o):i)||(e.exports=r)},function(e,t,n){var i=n(6),o=n(5);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(i.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(i.string(e))return function(e,t,n){return o(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function o(){i.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,a=i.length;r<a;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){var i,o,r;o=[e,n(0),n(2),n(1)],void 0===(r="function"==typeof(i=function(e,t,n,i){"use strict";var o=s(t),r=s(n),a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return d("action",e)}},{key:"defaultTarget",value:function(e){var t=d("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return d("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(r.default);function d(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=c})?i.apply(t,o):i)||(e.exports=r)},function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,n){var i=n(4);function o(e,t,n,o,r){var a=function(e,t,n,o){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&o.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}e.exports=function(e,t,n,i,r){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return o(e,t,n,i,r)}))}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(e),i.removeAllRanges(),i.addRange(o),t=i.toString()}return t}}])},e.exports=i()},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MoneyFormatConstants={SHOW_ZERO_CENTS:"medium",HIDE_ZERO_CENTS:"short"}},1206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemindMeModel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(2)),r=u(n(1)),a=n(1142),s=n(8),l=n(491);function u(e){return e&&e.__esModule?e:{default:e}}t.RemindMeModel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{productMachineName:"",productHumanName:"",isLoggedIn:!1,isReminded:!1,isMonthly:!1}}},{key:"initialize",value:function(){var e,t,n;this.postBody=(e={product_machine_name:this.get("productMachineName")},t=s.csrfFormKey,n=(0,s.getCsrf)(),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),this.requesting=!1}},{key:"url",value:function(){return"/bundle/remindme"}},{key:"toggleRemind",value:function(e){e&&(e.preventDefault(),e.stopPropagation()),this.requesting||(this.get("isReminded")?this.unremind():this.get("isLoggedIn")?this.remind():this.trigger(a.REDIRECT_TO_LOGIN))}},{key:"remind",value:function(){var e=this;(0,l.gaTrackEventWithoutCategory)("Remind Me","Reminder Set",this.get("productMachineName")),this.trigger(a.IN_PROGRESS),r.default.post(this.url(),r.default.extend({action:"add"},this.postBody),null,"json").done(function(t){t.success?e.trigger(a.REMIND_SUCCESS):"toosoon"==t.msg?e.trigger(a.CUTOFF_REACHED):e.trigger(a.GENERAL_ERROR)}).fail(function(){e.trigger(a.GENERAL_ERROR)}).always(function(){e.trigger(a.PROCESSING_DONE)})}},{key:"unremind",value:function(){var e=this;(0,l.gaTrackEventWithoutCategory)("Remind Me","Reminder Removed",this.get("productMachineName")),this.trigger(a.IN_PROGRESS),r.default.post(this.url(),r.default.extend({action:"remove"},this.postBody),null,"json").success(function(t){t.success?e.trigger(a.UNREMIND_SUCCESS):e.trigger(a.GENERAL_ERROR)}).error(function(){e.trigger(a.GENERAL_ERROR)}).done(function(){e.trigger(a.PROCESSING_DONE)})}}]),t}()},1207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemindMeIconView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(3)),r=u(n(0)),a=n(1142),s=n(1206),l=u(n(2262));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=t.RemindMeIconView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t;this.model.on((c(t={"change:isReminded":this.toggleRemindState},a.GENERAL_ERROR,this.onGeneralError),c(t,a.REMIND_SUCCESS,this.onRemindSuccess),c(t,a.UNREMIND_SUCCESS,this.onUnremindSuccess),c(t,a.PROCESSING_DONE,this.hideProcessing),c(t,a.CUTOFF_REACHED,this.onCutOffReached),c(t,a.IN_PROGRESS,this.showProcessing),t),this)}},{key:"onRender",value:function(){this.toggleRemindState()}},{key:"onRemindButtonClicked",value:function(e){e&&(e.preventDefault(),e.stopPropagation()),this.model.toggleRemind()}},{key:"toggleRemindState",value:function(){this.model.get("isReminded")?this.showReminded():this.showUnreminded()}},{key:"showReminded",value:function(){this.ui.remindButton.addClass("saved").attr("aria-label","Don't remind me")}},{key:"showUnreminded",value:function(){this.ui.remindButton.removeClass("saved").attr("aria-label","Remind me")}},{key:"showProcessing",value:function(){this.ui.bellIcons.addClass("is-hidden"),this.ui.spinner.removeClass("is-hidden"),this.requesting=!0}},{key:"hideProcessing",value:function(){this.ui.bellIcons.removeClass("is-hidden"),this.ui.spinner.addClass("is-hidden"),this.requesting=!1}},{key:"onRemindSuccess",value:function(){this.model.set("isReminded",!0),this.showAndFade(t.REMIND_SUCCESS_MSG)}},{key:"onUnremindSuccess",value:function(){this.model.set("isReminded",!1),this.showAndFade(t.UNREMIND_SUCCESS_MSG)}},{key:"onCutOffReached",value:function(){var e=this;this.ui.errorBox.text(t.CUTOFF_ERROR).show().delay(1e3).queue(function(){e.$el.fadeOut()})}},{key:"onGeneralError",value:function(){this.showAndFade(t.GENERAL_ERROR)}},{key:"showAndFade",value:function(e){this.ui.errorBox.text(e).show().delay(1500).fadeOut()}}]),t}();d.CUTOFF_ERROR="Ending too soon for a reminder. Get it now!",d.GENERAL_ERROR="Error! Couldn't set your preference.",d.REMIND_SUCCESS_MSG="OK! We'll remind you when this is almost over.",d.UNREMIND_SUCCESS_MSG="Reminder has been removed.",d.prototype.className="remind-me-icon-view save-for-later",d.prototype.events={"click @ui.remindButton":"onRemindButtonClicked"},d.prototype.model=s.RemindMeModel,d.prototype.template=r.default.template(l.default),d.prototype.ui={remindButton:".js-remind-button",bellIcons:".js-bell",spinner:".js-spinner",errorBox:".js-error-box"}},1208:function(e,t){e.exports='<% if (numTracks) { %>\n<div id="jp-container-<%- machineName %>" class="jp-audio" role="application">\n  <div class="jp-gui">\n    <div class="jp-play hb hb-play"></div><div class="jp-details">\n      <div class="jp-title">&nbsp;</div>\n      <div class="jp-time-info">\n        <div class="jp-progress">\n          <div class="jp-seek-bar">\n            <div class="jp-play-bar"></div>\n            <div class="jp-play-dot hb hb-circle"></div>\n          </div>\n        </div><div class="jp-remaining" role="timer">&nbsp;</div>\n      </div>\n    </div>\n  </div>\n  <div class="jp-no-solution">\n    <span>Update Required</span>\n    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.\n  </div>\n</div>\n<% } %>\n'},1209:function(e,t){e.exports='<% if (tracks) { %>\n<div class="soundtrack-listing">\n  <% if (renderAdminLinks) { %>\n    <div class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#soundtrack-listing_anchor"></div>\n  <% } %>\n  <div class="soundtrack-listing-container">\n  <% _.each(tracks, function(track) { %>\n    <div class="track" data-title="<%- track.track_name %>"\n      data-duration="<%- track.preview_length || 30 %>"\n      data-url="<%- track.preview_url || \'\' %>">\n      <span class="track-title">\n        <span class="track-play hb hb-play"></span>\n        <span class="track-number"><%- track.track_number %>.</span>\n        <span class="track-name" title="<%- track.track_name %>"><%- track.track_name %></span>\n      </span>\n      <span class="track-length"><%- track.track_length %></span>\n    </div>\n  <% }); %>\n  </div>\n</div>\n<% } %>\n'},1210:function(e,t){e.exports='<% if (developers && developers.length) { %>\n<div class="<%- layout %>-slideout-content-developers">\n  <% if (renderAdminLinks) { %>\n      <div class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#developers_anchor"></div>\n  <% } %>\n  <% _.each(developers, function(developer, i) { %>\n    <% if (developer.developer_url) { %>\n  <a class="slideout-content-dev-anchor" href="<%- developer.developer_url %>" target="_blank" rel="nofollow">\n    <% } %>\n  <span class="slideout-content-dev-name"><%- developer.developer_name %></span>\n    <% if (developer.developer_url) { %>\n  </a>\n    <% } %>\n    <% if (i < developers.length - 1) { %>\n  <span class="slideout-content-developer-separator">|</span>\n    <% } %>\n  <% }); %>\n</div>\n<% } %>\n\n<% if (publishers && publishers.length) { %>\n<div class="<%- layout %>-slideout-content-developers">\n  <% if (renderAdminLinks) { %>\n      <div class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#publishers_anchor"></div>\n  <% } %>\n  <% _.each(publishers, function(publisher, i) { %>\n    <% if (publisher.publisher_url) { %>\n  <a class="slideout-content-dev-anchor" href="<%- publisher.publisher_url %>" target="_blank" rel="nofollow">\n    <% } %>\n  <span class="slideout-content-dev-name"><%- publisher.publisher_name %></span>\n    <% if (publisher.publisher_url) { %>\n  </a>\n    <% } %>\n    <% if (i < publishers.length - 1) { %>\n  <span class="slideout-content-developer-separator">|</span>\n    <% } %>\n  <% }); %>\n</div>\n<% } %>\n'},1211:function(e,t){e.exports='<% if (availabilityIcons && availabilityIcons.delivery_icons) { %>\n  <% if (renderAdminLinks) { %>\n<div class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#content_anchor"></div>\n  <% } %>\n<div class="slideout-availability-icons">\n  <% _.each(availabilityIcons.delivery_icons, function(availability_icon) { %>\n    <% var has_platform_icons = (availabilityIcons.delivery_to_platform[availability_icon] && availabilityIcons.delivery_to_platform[availability_icon].available.length); %>\n  <div class="slideout-availability-icon-container">\n    <div class="slideout-availability-icon-wrapper <% if (has_platform_icons) { %>has-delivery-icons<% } %>">\n      <i class="hb <%= availability_icon %> slideout-availability-icon"></i>\n    </div>\n    <% if (has_platform_icons) { %>\n    <div class="slideout-platforms">\n      <% _.each(availabilityIcons.delivery_to_platform[availability_icon].available, function(platformType) { %>\n        <% var platformHumanName = availabilityIcons.human_names[platformType]; %>\n      <span class="help-hover tooltip-top" data-tooltip="<%- platformHumanName%>">\n        <i class="<%= platformType %> hb slideout-platform"></i>\n      </span>\n      <% }); %>\n    </div>\n    <% } %>\n  </div>\n  <% }); %>\n</div>\n<% } %>\n'},1212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2275);var o,r=n(1),a=(o=r)&&o.__esModule?o:{default:o};(t.AudioPlayer=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$audioContainer=(0,a.default)(),this.$currentTrack=(0,a.default)(),this.swfPath=t.swfPath,(0,a.default)("body").append(this.$player),this.$player.jPlayer({ready:a.default.noop,swfPath:this.swfPath,supplied:"mp3, m4a",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!1})}return i(e,[{key:"playTrack",value:function(e){this.loadTrack(e),this.$player.jPlayer("play")}},{key:"loadTrack",value:function(e){var t=(0,a.default)(e);t.addClass("playing"),this.$player.jPlayer("setMedia",{title:t.data("title"),mp3:t.data("url")})}},{key:"setupPlayer",value:function(){var e=this;(0,a.default)(".soundtrack-listing .track-play, .soundtrack-listing .track-number, .soundtrack-listing .track-name").click(function(t){e.unsetMedia(),e.$currentTrack=(0,a.default)(t.currentTarget).closest(".track"),e.playTrack(e.$currentTrack)}),this.$player.bind(a.default.jPlayer.event.timeupdate,function(t){t.jPlayer.status.currentTime>0&&(0,a.default)(".jp-play.loading").length&&((0,a.default)(".jp-play.loading").removeClass("loading hb-play").addClass("hb-pause"),e.$currentTrack.find(".track-play").removeClass("humble-spinner hb-play").addClass("hb-pause"));var n=t.jPlayer.status.currentPercentAbsolute/100*e.$audioContainer.find(".jp-progress").width();e.$audioContainer.find(".jp-play-dot").css("left",n-3+"px");var i=t.jPlayer.status.duration;i!==1/0&&i||(i=(0,a.default)(".track.playing ").data("duration"));for(var o=Math.ceil(i-t.jPlayer.status.currentTime),r=Math.floor(o/60).toString(),s=(o%60).toString();r.length<2;)r="0"+r;for(;s.length<2;)s="0"+s;e.$audioContainer.find(".jp-remaining").text(r+":"+s)}),this.$player.bind(a.default.jPlayer.event.pause,function(t){e.$audioContainer.find(".jp-play").removeClass("hb-pause loading").addClass("hb-play"),e.$currentTrack.find(".track-play").removeClass("hb-pause hb-loading").addClass("hb-play")}),this.$player.bind(a.default.jPlayer.event.play,function(t){e.$audioContainer.find(".jp-play").removeClass("hb-play hb-pause").addClass("loading"),e.$currentTrack.find(".track-play").removeClass("hb-play hb-pause").addClass("humble-spinner")}),this.$player.bind(a.default.jPlayer.event.ended,function(t){e.$currentTrack=(0,a.default)(".track.playing"),e.loadTrack(e.$currentTrack)})}},{key:"setActivePopup",value:function(e,t){if(this.unsetMedia(),this.$audioContainer.find(".jp-play").removeClass("hb-pause").addClass("hb-play"),this.$audioContainer.find(".jp-no-solution").hide(),null!==e&&e.length>0){this.setupPlayer();var n="jp-container-"+t;this.$player.jPlayer("option","cssSelectorAncestor","#"+n),this.$audioContainer=(0,a.default)("#"+n);var i=e.find(".track")[0];this.$currentTrack=(0,a.default)(i),this.loadTrack(i)}}},{key:"unsetMedia",value:function(){this.$player.jPlayer("stop"),this.$player.jPlayer("setMedia",{}),(0,a.default)(".track.playing").removeClass("playing"),this.$currentTrack.find(".track-play").removeClass("hb-pause humble-spinner").addClass("hb-play")}}]),e}()).prototype.$player=(0,a.default)('<div id="music-slideout-jplayer" class="jp-jplayer"></div>')},1213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBonusItemView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(3)),r=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.BaseBonusItemView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"onRender",value:function(){this.$el.addClass(this.model.get("type")+"-item"),(this.model.get("preview_image")||this.model.get("youtube_link"))&&this.$el.attr("data-slideout",this.model.get("display_item_machine_name"))}}]),t}();s.prototype.className=r.default.noop,s.prototype.template=r.default.noop},1214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBonusItemCollectionView=void 0;var i=r(n(3)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var a=t.BaseBonusItemCollectionView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.CollectionView),t}();a.prototype.childView=o.default.noop,a.prototype.className="bonus-items-container u-constrain-width"},1215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBonusItemsView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(1)),a=l(n(0)),s=l(n(2288));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.BaseBonusItemsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"onRender",value:function(){var e=new this.collectionView({collection:this.collection});this.showChildView("items",e);var t=this.$(".soundtrack-item"),n=this.$(".js-hover-state-holder");t.addClass("hoverable");var i=this.hoverStateItemTemplate({icon_class:"hb-headphones"});n.after(i),this.$el.addClass("main-content-row")}}]),t}();u.prototype.collectionView=r.default.noop,u.prototype.hoverStateItemTemplate=a.default.template(s.default),u.prototype.regions={items:{el:".bonus-items-container",replaceElement:!0}},u.prototype.template=r.default.noop},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeHumbleDate=t.MONTH_AND_YEAR=t.FULL_DATE=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i};t.FULL_DATE="MMMM D, YYYY",t.MONTH_AND_YEAR="MMMM YYYY",t.makeHumbleDate=function(e){if(e instanceof Date)return e;if(!r.default.isString(e)&&!r.default.isFinite(e))throw new TypeError(e+" is not a valid datetime");r.default.isString(e)&&!isNaN(e)&&(e=r.default.toFinite(e)),r.default.isString(e)?a(e)?e=e.trim()+"T00:00Z":s(e)&&(e+="Z"):r.default.isFinite(e)&&(e=l(e));var t=new Date(e);if(isNaN(t.valueOf()))throw new TypeError("An invalid Date object was created with "+e);return t};var a=function(e){return!e.match(/[T ]\d\d:\d\d/)},s=function(e){return!e.match(/([\+-]\d\d:\d\d)|Z/)},l=function(e){return e<12623328e5&&(e*=1e3),e}},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COUNTRY_CONSTANTS={US_CC:"US",COUNTRIES:{WF:"Wallis and Futuna",JP:"Japan",JM:"Jamaica",JO:"Jordan",WS:"Samoa",JE:"Jersey",GW:"Guinea-Bissau",GU:"Guam",GT:"Guatemala",GS:"South Georgia and the South Sandwich Islands",GR:"Greece",GQ:"Equatorial Guinea",GP:"Guadeloupe",GY:"Guyana",GG:"Guernsey",GF:"French Guiana",GE:"Georgia",GD:"Grenada",GB:"United Kingdom",GA:"Gabon",GN:"Guinea",GM:"Gambia",GL:"Greenland",GI:"Gibraltar",GH:"Ghana",PR:"Puerto Rico",PS:"Palestine, State of",PW:"Palau",PT:"Portugal",PY:"Paraguay",PA:"Panama",PF:"French Polynesia",PG:"Papua New Guinea",PE:"Peru",PK:"Pakistan",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PM:"Saint Pierre and Miquelon",ZM:"Zambia",ZA:"South Africa",ZW:"Zimbabwe",ME:"Montenegro",MD:"Moldova, Republic of",MG:"Madagascar",MF:"Saint Martin (French part)",MA:"Morocco",MC:"Monaco",MM:"Myanmar",ML:"Mali",MO:"Macao",MN:"Mongolia",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",MU:"Mauritius",MT:"Malta",MW:"Malawi",MV:"Maldives",MQ:"Martinique",MP:"Northern Mariana Islands",MS:"Montserrat",MR:"Mauritania",MY:"Malaysia",MX:"Mexico",MZ:"Mozambique",FR:"France",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",CK:"Cook Islands",CI:"Côte d'Ivoire",CH:"Switzerland",CO:"Colombia",CN:"China",CM:"Cameroon",CL:"Chile",CC:"Cocos (Keeling) Islands",CA:"Canada",CG:"Congo",CF:"Central African Republic",CD:"Congo, the Democratic Republic of the",CZ:"Czech Republic",CY:"Cyprus",CX:"Christmas Island",CS:"Serbia",CR:"Costa Rica",CW:"Curaçao",CV:"Cape Verde",CU:"Cuba",SZ:"Swaziland",SY:"Syrian Arab Republic",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",SR:"Suriname",SV:"El Salvador",ST:"Sao Tome and Principe",SK:"Slovakia",SJ:"Svalbard and Jan Mayen",SI:"Slovenia",SH:"Saint Helena, Ascension and Tristan da Cunha",SO:"Somalia",SN:"Senegal",SM:"San Marino",SL:"Sierra Leone",SC:"Seychelles",SB:"Solomon Islands",SA:"Saudi Arabia",SG:"Singapore",SE:"Sweden",SD:"Sudan",YE:"Yemen",YT:"Mayotte",LB:"Lebanon",LC:"Saint Lucia",LA:"Lao People's Democratic Republic",LK:"Sri Lanka",LI:"Liechtenstein",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",LR:"Liberia",LS:"Lesotho",LY:"Libya",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",IQ:"Iraq",VI:"Virgin Islands, US",IS:"Iceland",IR:"Iran, Islamic Republic of",IT:"Italy",VN:"Viet Nam",IM:"Isle of Man",IL:"Israel",IO:"British Indian Ocean Territory",IN:"India",IE:"Ireland",ID:"Indonesia",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BA:"Bosnia and Herzegovina",BB:"Barbados",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BT:"Bhutan",BU:"Burma",BV:"Bouvet Island",BW:"Botswana",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BY:"Belarus",BZ:"Belize",RU:"Russia",RW:"Rwanda",RS:"Serbia",RE:"Réunion",RO:"Romania",OM:"Oman",HR:"Croatia",HT:"Haiti",HU:"Hungary",HK:"Hong Kong",HN:"Honduras",HM:"Heard Island and McDonald Islands",EH:"Western Sahara",EE:"Estonia",EG:"Egypt",EC:"Ecuador",ET:"Ethiopia",ES:"Spain",ER:"Eritrea",UY:"Uruguay",UZ:"Uzbekistan",US:"United States",UM:"United States Minor Outlying Islands",UG:"Uganda",UA:"Ukraine",VU:"Vanuatu",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NZ:"New Zealand",NP:"Nepal",NR:"Nauru",NU:"Niue",XK:"Kosovo",KG:"Kyrgyzstan",KE:"Kenya",KI:"Kiribati",KH:"Cambodia",KN:"Saint Kitts and Nevis",KM:"Comoros",KR:"Korea, Republic of",KP:"Korea, Democratic People's Republic of",KW:"Kuwait",KZ:"Kazakhstan",KY:"Cayman Islands",DO:"Dominican Republic",DM:"Dominica",DJ:"Djibouti",DK:"Denmark",DE:"Germany",DZ:"Algeria",TZ:"Tanzania, United Republic of",TV:"Tuvalu",TW:"Taiwan",TT:"Trinidad and Tobago",TR:"Turkey",TN:"Tunisia",TO:"Tonga",TL:"Timor-Leste",TM:"Turkmenistan",TJ:"Tajikistan",TK:"Tokelau",TH:"Thailand",TF:"French Southern Territories",TG:"Togo",TD:"Chad",TC:"Turks and Caicos Islands",AE:"United Arab Emirates",AD:"Andorra",AG:"Antigua and Barbuda",AF:"Afghanistan",AI:"Anguilla",AM:"Armenia",AL:"Albania",AO:"Angola",AN:"Netherlands Antilles",AQ:"Antarctica",AS:"American Samoa",AR:"Argentina",AU:"Australia",AT:"Austria",AW:"Aruba",AX:"Åland Islands",AZ:"Azerbaijan",QA:"Qatar"}}},154:function(e,t,n){var i,o,r;
/*!
 * jQuery UI Keycode 1.12.0
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(1),n(36)],void 0===(r="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,o):i)||(e.exports=r)},16:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"string"==typeof e},o=function(e){return e instanceof Blob};(function(){if(function(){return"navigator"in this&&"sendBeacon"in this.navigator}.call(this))return;"navigator"in this||(this.navigator={});"function"!=typeof this.navigator.sendBeacon&&(this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,r="unload"===n||"beforeunload"===n,a="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("POST",e,!r),a.withCredentials=!0,a.setRequestHeader("Accept","*/*"),i(t)?(a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a.responseType="text/plain"):o(t)&&t.type&&a.setRequestHeader("Content-Type",t.type);try{a.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleTile=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=(i=r)&&i.__esModule?i:{default:i},s=n(78);t.BundleTile=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.BaseProductTile),o(t,[{key:"defaults",value:function(){return a.default.extend(!0,{},function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"defaults",this).call(this),{bundles_sold:0,msrp:0,type:"bundle",image_grid_urls:[],image_grid_item_width:0,image_grid_item_height:0,short_marketing_blurb:"",marketing_blurb:"",detailed_marketing_blurb:"",is_charity_bundle:!1})}}]),t}()},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openPayEarlyModal=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=S(n(1));n(50);var a=S(n(0)),s=n(39),l=n(17),u=n(42),c=n(32),d=n(9),h=S(n(5)),p=n(369),f=S(n(368)),m=S(n(367)),y=S(n(366)),v=S(n(365)),g=n(8),_=n(14),b=n(4),w=n(7),O=n(11);function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.HumbleModal),i(t,[{key:"initialize",value:function(e,t){this.model=new p.PayEarlyModel(e),this.model.set("userSubscriptionState",(0,O.getWindow)().models.userSubscriptionState),this.model.set("userSubscriptionPlan",t),this.planPricing=t?t.pricing:null,this.activeContentStart=e.activeContentStart,this.setPreventClose(!1)}},{key:"serializeData",value:function(){return a.default.extend(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).call(this),{NO_DISCOUNT_WRONG_CURRENCY:c.SUBSCRIPTION_CONSTANTS.NO_DISCOUNT_WRONG_CURRENCY})}},{key:"beforeCancel",value:function(){if(this.preventClose)return!1}},{key:"beforeSubmit",value:function(){this.setPreventClose(!0);var e=(0,O.getWindow)().models.userSubscriptionState,t=e.creditsRemaining,n=e.isPaused,i=t?(0,d.gtxt)("We are activating your content for this month."):(0,d.gtxt)("We are charging your default payment method.");return this.showSpinner(i),n?this.resumeSubscriptionWithCallback(this.initiatePayEarlyPayment.bind(this)):this.initiatePayEarlyPayment(),!1}},{key:"getCouponInfo",value:function(){return r.default.ajax({url:"/api/v1/subscriptions/humble_monthly/coupons",dataType:"json"})}},{key:"getTaxInfo",value:function(){return r.default.ajax({url:"/api/v1/tax_rate",dataType:"json"})}},{key:"onRender",value:function(){var e=this;if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this),this.showSpinner((0,d.gtxt)("We are gathering your information.")),(0,O.getWindow)().models.userSubscriptionState.creditsRemaining>0)this.showConfirmation();else{var n=this.getCouponInfo(),i=this.getTaxInfo();r.default.when(n,i).done(function(t,n){var i=t[0],o=n[0];e.model.set(e.calculatePaymentArgs(i,o)),e.showConfirmation()}).fail(function(){e.showError()})}}},{key:"showConfirmation",value:function(){var e=a.default.template(f.default)(this.serializeData()),t=(0,r.default)(e);t.fadeIn(),this.$(".js-content").html(t)}},{key:"showError",value:function(e){var t=a.default.template(m.default)({reason:e||(0,d.gtxt)("An unknown error has occurred. Please try again.")}),n=(0,r.default)(t);n.fadeIn(),this.$(".js-content").html(n),this.setPreventClose(!1)}},{key:"showSpinner",value:function(e){var t=a.default.template(v.default)({spinnerText:e}),n=(0,r.default)(t);n.fadeIn(),this.$(".js-content").html(n)}},{key:"resumeSubscriptionWithCallback",value:function(e){var t=this;r.default.ajax({method:"PUT",url:"/api/v1/subscriptions/humble_monthly/resume",dataType:"json",error:function(e){var n=e&&e.reason;t.showError(n)},success:function(t,n,i){t.success&&e()}})}},{key:"initiatePayEarlyPayment",value:function(){var e,t=(C(e={},g.csrfFormKey,(0,g.getCsrf)()),C(e,"product",this.model.get("productMachineName")),e);r.default.ajax({url:"/subscription/payearly",data:t,dataType:"json",method:"POST",context:this}).done(this.handlePayEarlySubmitResponse)}},{key:"handlePayEarlySubmitResponse",value:function(e){e.jobId?this.pollForPayEarlyResponse(e.jobId):e.reason?this.showError(e.reason):this.showError()}},{key:"pollForPayEarlyResponse",value:function(e){var t=this;this.backoffMilliseconds||(this.backoffMilliseconds=500),this.backoffMilliseconds*=2,r.default.ajax({url:"/subscription/payearlystatus/"+e,dataType:"json",success:function(n){if(n.success)return(0,O.getWindow)().models.userSubscriptionState.creditsRemaining?void t.showCreditRedeemNotice():(0,O.getWindow)().location="/receipt?s=thanks&uid="+n.order_uid+"&uidverify="+n.uidverify;n.inProgress?setTimeout(t.pollForPayEarlyResponse.bind(t,e),t.backoffMilliseconds):t.showError(n.reason)}})}},{key:"calculatePaymentArgs",value:function(e,t){if(!e||!t||!this.planPricing)return{};var n=e[this.model.get("userSubscriptionPlan").machine_name],i=(0,h.default)(t.tax_rate),o=this.planPricing,r=new w.Money((0,h.default)(0),this.planPricing.currency);n&&n.discount_amount&&(r=new w.Money(n.discount_amount,this.planPricing.currency),o=this.planPricing.minus(r));var a=(0,w.calculateRequiredTax)(o,i).toDP(2,h.default.ROUND_DOWN),s=r.toDP(2,h.default.ROUND_HALF_UP),l=o.plus(a).toDP(2,h.default.ROUND_DOWN);return{basePlanPrice:this.planPricing,discount:s.isZero()?null:s,tax:a.isZero()?null:a,total:l,activeCoupon:n}}},{key:"gotoCheckoutPage",value:function(){(0,b.redirectInDomain)("/subscription/checkout")}},{key:"showCreditRedeemNotice",value:function(){var e=this.activeContentStart;e&&(e=(0,_.makeHumbleDate)(e),(0,s.displayDialog)((0,d.gtxt)("{unlockedMonth} Unlocked").format({unlockedMonth:(0,d.localizeDate)(e,u.DateFormatConstants.MONTH_AND_YEAR_ONLY)}),(0,d.gtxt)("You can now choose which games you want to keep."),"/subscription/home"))}},{key:"setPreventClose",value:function(e){this.preventClose=e,e?this.$(".js-close-modal").addClass("hidden"):this.$(".js-close-modal").removeClass("hidden")}}]),t}();E.prototype.className="pay-early-modal",E.prototype.template=a.default.template(y.default),E.prototype.events={"click .js-goto-checkout":"gotoCheckoutPage"};t.openPayEarlyModal=function(e,t){if((0,O.getWindow)().models.user_json.is_logged_in){var n=new E(e,t);return n.render(),n}}},17:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.HumbleModal=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(30);n(27);var l=t.HumbleModal=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.Modal),o(n,[{key:"initialize",value:function(e){e||(e={}),this.onDestroyCallback=e.onDestroyCallback}},{key:"onDestroy",value:function(){(0,s.enableBodyScroll)(this.getScrollingElement()),this.onDestroyCallback&&this.onDestroyCallback(this.getOnDestroyArgs())}},{key:"getOnDestroyArgs",value:function(){return null}},{key:"onRender",value:function(){e("#site-modal").append(this.$el),(0,s.disableBodyScroll)(this.getScrollingElement(),{reserveScrollBarGap:!0}),this.$el.prop("tabindex","0"),this.$el.focus()}},{key:"getScrollingElement",value:function(){return this.$el[0]}},{key:"checkKey",value:function(e){if(this.active)switch(e.keyCode){case 27:return this.triggerCancel(e)}}}]),n}();l.prototype.cancelEl=".js-close-modal",l.prototype.prefix="humblemodal",l.prototype.submitEl=".js-modal-submit"}).call(this,n(1))},170:function(e,t,n){(e.exports=n(19)(!1)).push([e.i,"/*!\n * jQuery UI Slider 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/slider/#theming\n */\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n",""])},171:function(e,t,n){var i,o,r;o=[n(1),n(36)],void 0===(r="function"==typeof(i=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(t,o):i)||(e.exports=r)},172:function(e,t,n){var i,o,r;
/*!
 * jQuery UI Mouse 1.12.0
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(1),n(171),n(36),n(106)],void 0===(r="function"==typeof(i=function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.0",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(t,o):i)||(e.exports=r)},175:function(e,t){e.exports='<ul class="admin-quicklinks js-admin-quicklinks">\n  <i class=\'hb hb-bundle\'></i>\n  <% if (editProductURL) { %>\n    <li class="menu-item">\n      <a class="quicklink" target="_blank" href="<%- editProductURL %>">View Product Admin</a>\n    </li>\n  <% } %>\n  <% if (editDisplayItemURL) { %>\n  <li class="menu-item">\n    <a class="quicklink" target="_blank" href="<%- editDisplayItemURL %>">View DisplayItem Admin</a>\n  </li>\n  <% } %>\n  <% if (editStorePageLayoutURL) { %>\n  <li class="menu-item">\n    <a class="quicklink" target="_blank" href="<%- editStorePageLayoutURL %>">View StorePageLayout Admin</a>\n  </li>\n  <% } %>\n  <li class="menu-item">\n    <label><input type="checkbox" checked class="js-toggle-tiny-links">Show Edit Links</label>\n  </li>\n</ul>\n'},176:function(e,t){e.exports='<a href="<%- url %>" target="_blank" class="admin-tiny-link js-admin-tiny-link <% if (!enabled) { %> disabled<% } %>" title="<%- title %>">\n  <i class="hb hb-pencil-square" style="color: white"></i>\n</a>\n'},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CSRF_CONSTANTS={CSRF_COOKIE_KEY:"csrf_cookie",CSRF_COOKIE_VERSION:1,CSRF_FORM_KEY:"_le_csrf_token",CSRF_HEADER_KEY:"CSRF-Prevention-Token"}},19:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(r).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityDetailsView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(0)),r=n(17),a=s(n(400));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CharityDetailsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.HumbleModal),i(t,[{key:"initialize",value:function(e){this.constants=e.constants,this.user=e.user}},{key:"serializeData",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).call(this);e.url=e.url||"",e.country=this.constants.CHARITY_SEARCH_PARAMS.country[this.model.get("country")],e.currentUrl=""+window.location.origin+window.location.pathname;var n=this.model.get("youtube_link");return e.youtubeURL=n?"https://www.youtube.com/embed/"+n+"?modestbranding1&rel=0&showinfo=0":"",e.ppgfDisclaimer=this.model.get("ppgf_disclaimer"),e}}]),t}();l.prototype.className="charity-details-view",l.prototype.template=o.default.template(a.default)},2:function(e,t){e.exports=Backbone},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSON=t.extractWebpackJsonData=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(5),s=n(14),l=n(7);t.extractWebpackJsonData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#webpack-json-data",t=(0,r.default)(e);if(t.length){var n=u(t.html().trim());return t.remove(),n}};var u=t.parseJSON=function(e){return JSON.parse(e,function(e,t){if(c(e,"money")){var n=d(e,"money");if(!t)return void(this[n]=null);var i=void 0;if(Array.isArray(t)?i=l.Money.fromArray(t):t instanceof Object&&(i=l.Money.fromObject(t)),!i)throw new Error("Tagged money data is not valid: key="+e+", value="+t);this[n]=i}else if(c(e,"datetime")){var o=d(e,"datetime");if(!t)return void(this[o]=null);var r=(0,s.makeHumbleDate)(t);if(!r)throw new Error("Tagged datetime data is not valid: key="+e+", value="+t);this[o]=r}else if(c(e,"date")){var u=d(e,"date");if(!t)return void(this[u]=null);var h=(0,s.makeHumbleDate)(t);if(!h)throw new Error("Tagged date data is not valid: key="+e+", value="+t);this[u]=h}else{if(!c(e,"decimal"))return t;var p=d(e,"decimal");if(!t)return void(this[p]=null);var f=new a.Decimal(t);if(!f)throw new Error("Tagged Decimal data is not valid: key="+e+", value="+t);this[p]=f}})},c=function(e,t){return e.endsWith("|"+t)},d=function(e,t){return e.replace("|"+t,"")}},21:function(e,t){e.exports=numeral},2252:function(e,t){e.exports="<h1>Remind Me</h1>\n<p>You've reached this page from a Remind Me link.</p>\n<% if (!isReminded) { %>\n<p>Would you like to be sent a reminder email before <%= productHumanName %>\n<%= (isMonthly ? 'Bundle is released' : 'ends') %>?</p>\n<% } else { %>\n<p>You are already scheduled to receive a reminder email before <%= productHumanName %>\n<%= (isMonthly ? 'Bundle is released' : 'ends') %>.\nWould you like to unschedule this reminder?</p>\n<% } %>\n<a class=\"button-link js-remindme\">\n  <span class=\"green-button\"><%= (isReminded ? 'Unschedule' : 'Send me a reminder') %></span>\n</a>\n<a class=\"button-link js-close\">\n  <span class=\"gray-button\">Never mind</span>\n</a>\n"},2253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showModalIfRemindMeParamExists=t.RemindMeLinkModal=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(17),a=n(2252),s=(i=a)&&i.__esModule?i:{default:i},l=n(4);var u=t.RemindMeLinkModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.HumbleModal),o(t,[{key:"submit",value:function(){this.model.toggleRemind()}}]),t}();u.prototype.submitEl=".js-remindme",u.prototype.cancelEl=".js-close",u.prototype.template=_.template(s.default);t.showModalIfRemindMeParamExists=function(e){(0,l.getQueryParam)("remindme")&&new u({model:e}).render()}},2254:function(e,t){e.exports='<% if (charities) { %>\n  <div class="hero-charity-box">\n  <% if (numHiddenCharities > 0) { %>\n  <div class="hero-hidden-charities-container hero-charity-blurb">\n    <div class="hero-hidden-charities">\n        &#43;<%- numHiddenCharities %>\n    </div>\n  </div>\n  <% } %>\n  <div class="hero-charity-content">\n    <% _.each(charities, function(charity) { %>\n      <div class="hero-charity-item">\n        <div class="hero-charity-logo"><img src="<%- charity.logoUrl %>" alt=""></div>\n      </div>\n    <% }) %>\n  </div>\n  <div class="hero-charity-blurb hero-supporting"><%- gtxt(\'Supporting\') %></div>\n</div>\n<% } %>\n'},2255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeroCharityComponentView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(0)),a=l(n(2254)),s=n(1143);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.HeroCharityComponentView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.charities=r.default.uniqBy(e.charities,function(e){return e.id}),this.smoothScroller=e.smoothScroller,this.isOnBundlePage=e.isOnBundlePage}},{key:"serializeData",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).apply(this,arguments);return e.charities=this.charities,e.numHiddenCharities=this.charities.length-2,e.isOnBundlePage=this.isOnBundlePage,e}},{key:"onRender",value:function(){1===this.charities.length&&this.$el.addClass("single-charity")}},{key:"expandBox",value:function(){this.$el.addClass("expanded-charity-box")}},{key:"collapseBox",value:function(){this.$el.removeClass("expanded-charity-box")}},{key:"scrollToCharity",value:function(){this.smoothScroller&&(0,s.scrollToCharity)()}}]),t}();u.prototype.className="hero-charity-box-container",u.prototype.events={"click .hero-hidden-charities-container":"expandBox","click .hero-charity-content":"scrollToCharity","click .hero-supporting":"scrollToCharity","mouseenter .hero-charity-content":"expandBox","mouseleave .hero-charity-content":"collapseBox"},u.prototype.template=r.default.template(a.default)},2256:function(e,t){e.exports='<div class="hero-background-container js-hero-background-container">\n</div>\n<% if (!isOnBundlePage) { %>\n<a href="<%- product_url %>" class="hero-invisible-link">\n<% } %>\n<div class="hero-foreground-container">\n  <div class="hero-foreground">\n<% if (type == \'bundle\') { %>\n  <% if (tile_stamp && tile_logo) { %>\n    <div class="tile-stamp-and-logo">\n        <span class="stamp <%- tile_stamp %>"></span>\n        <div class="hero-section-logo" style="background-image: url(\'<%- tile_logo %>\')"></div>\n    </div>\n    <% } %>\n    <% if (is_charity_bundle) { %>\n    <div class="charity-total-callout">\n      <div class="charity-total-header"><%- gtxt(\'raised for charity and counting...\') %></div>\n      <div class="charity-total-money"><%- localizeMoney(total_payments.toDP(0, Decimal.ROUND_FLOOR), MoneyFormatConstants.HIDE_ZERO_CENTS) %></div>\n    </div>\n    <% } %>\n    <% if (tile_name) { %>\n    <div class="hero-title bold-upper"><%- tile_name %></div>\n    <% } %>\n    <% // note: do not escape blurbs as monthly overrides contain html %>\n  <% if (marketing_blurb) { %>\n    <p class="marketing-blurb"><%= marketing_blurb %></p>\n  <% } %>\n  <% if (detailed_marketing_blurb) { %>\n    <p class="detailed-marketing-blurb"><%= detailed_marketing_blurb %></p>\n  <% } %>\n  <% if (short_marketing_blurb) { %>\n    <p class="short-marketing-blurb"><%= short_marketing_blurb %></p>\n  <% } %>\n  <div class="hero-highlights">\n  <% _.each(hero_highlights, function(highlight, index) { %>\n      <div class="highlight-container">\n      <% if (index !== 0) { %>\n        <div class="highlight-divider"><i class="hb hb-circle"></i></div>\n      <% } %>\n        <div class="highlight-popup-container">\n          <span class="highlight bold-upper"><%- highlight.heading %></span>\n      <% if (highlight.tooltip) { %>\n          <span class="highlight-popup"><%- highlight.tooltip %></span>\n      <% } %>\n        </div>\n      </div>\n  <% }) %>\n    <div class="highlight-divider"><i class="hb hb-circle"></i></div>\n    <span class="highlight bold-upper">\n      <%= ngtxt(\'<span class="js-bundles-sold">1</span> Bundle Sold\', \'<span class="js-bundles-sold">{bundlesSold}</span> Bundles Sold\', bundlesSold).format({bundlesSold: localizeNumber(bundlesSold)}) %>\n    </span>\n  </div>\n  <div class="cta-button rectangular-button button-v2 green js-hero-cta"><%- gtxt(\'Get The Bundle\') %></div>\n  <div class="time-left bold-upper"><%- gtxt(\'Time left\') %></div>\n  <% if (isOnBundlePage) { %>\n  <div class="hero-countdown-container">\n    <div class="hero-remindme-container js-hero-remindme-container">\n      <div class="remind-me js-hero-remind-me"></div>\n      <div class="remind-me-text bold-upper" aria-hidden="true"><%- gtxt(\'Remind\') %></div>\n    </div>\n  <% } %>\n    <div class="js-countdown-view full-countdown-view"></div>\n  <% if (isOnBundlePage) { %>\n  </div>\n  <% } %>\n<% } %>\n  </div>\n</div>\n<% if (!isOnBundlePage) { %>\n</a>\n<% } %>\n<% if (isOnBundlePage) { %>\n<div class="js-hero-charity hero-charity-container"></div>\n<% } %>\n'},2257:function(e,t){e.exports='<div class="hero-background">\n  <ul class="image-grid contains-<%- gridImages.length %>-items">\n  <% _.each(gridImages, function(image, index) { %>\n    <li class="image-grid-item-container item-<%- index + 1 %> of-<%- gridImages.length %>">\n      <div class="image-grid-item <%= imageSizeClass %>" style="background-image: url(<%- image %>);" alt=""></div>\n    </li>\n  <% }); %>\n  </ul>\n</div>\n<div class="hero-background-overlay"></div>\n<div class="hero-background-side-fadeout"></div>\n'},2258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageGridView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(3)),r=u(n(0)),a=u(n(2257)),s=n(47),l=n(4);function u(e){return e&&e.__esModule?e:{default:e}}var c=t.ImageGridView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"serializeData",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).apply(this,arguments),n=(0,l.isRetinaDisplay)()?"image_grid_retina_urls":"image_grid_urls",i=this.model.get(n)||[];e.gridImages=this.composeGrid(i);var o=this.model.get("size_override");return e.imageSizeClass=o?"wide"===o?"game-art":"book-cover":this.model.get("image_grid_item_width")===s.PRODUCT_TILE_CONSTANTS.HERO_GRID.GAME_WIDTH?"game-art":"book-cover",e}},{key:"onRender",value:function(){this.ui.imageGrid.addClass(this.model.get("image_grid_item_width")===s.PRODUCT_TILE_CONSTANTS.HERO_GRID.GAME_WIDTH?"game-grid":"portrait-grid")}},{key:"composeGrid",value:function(e){var t=this.model.get("image_grid_item_width"),n=this.model.get("image_grid_item_height"),i=this.model.get("size_override");"wide"===i?t=s.PRODUCT_TILE_CONSTANTS.HERO_GRID.GAME_WIDTH:i&&(t=s.PRODUCT_TILE_CONSTANTS.HERO_GRID.COVER_WIDTH);var o=t===s.PRODUCT_TILE_CONSTANTS.HERO_GRID.GAME_WIDTH?3080:3e3,a=1.5*window.innerHeight,l=Math.ceil(o/t),u=Math.ceil(a/n);if(!isFinite(l)||!isFinite(u))return console.error("Error calculating number of items to display in image grid. Please verify that rows are properly set on the display definition."),[];for(var c=[],d=0;d<=u;d++){for(var h=[],p=(d%2*e.length/2+d/2*2)%e.length,f=l;f>0;){var m=e.length-p;if(m<0)return[];var y=Math.min(f,m);h=h.concat(e.slice(p,p+y)),f-=y,p=(p+y)%e.length}c.push(h)}return r.default.flattenDeep(c)}}]),t}();c.prototype.className="image-grid-view",c.prototype.template=r.default.template(a.default),c.prototype.ui={imageGrid:".image-grid"}},2259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeroTileView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=f(n(3)),r=f(n(1)),a=f(n(23)),s=n(2258),l=f(n(2256)),u=n(2255),c=n(113),d=n(388),h=n(1207),p=n(1143);function f(e){return e&&e.__esModule?e:{default:e}}var m=t.HeroTileView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.backgroundView=new s.ImageGridView({model:this.model});var t=new c.CountdownTimer({endTime:this.model.getEndDate()});this.countdownView=new d.BlockyCountdownTimerView({model:t,user:e.user,size:"large"}),this.smoothScroller=this.options.smoothScroller,this.isOnBundlePage=this.options.isOnBundlePage,this.remindMeHours=this.options.remindMeHours,this.remindMeView=new h.RemindMeIconView({model:this.options.remindMeModel}),this.charityView=new u.HeroCharityComponentView({charities:this.options.charities,isOnBundlePage:this.isOnBundlePage,smoothScroller:this.smoothScroller})}},{key:"className",value:function(){return["hero-tile-view","hero",this.model.get("type")].join(" ")}},{key:"serializeData",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).apply(this,arguments);return e.isOnBundlePage=this.isOnBundlePage,e.hero_highlights=this.model.get("hero_highlights"),e.bundlesSold=Number(this.model.get("bundles_sold")),this.hmbParams&&(e.product_url=e.product_url+"?"+this.hmbParams),e}},{key:"setPositionDetails",value:function(e,t,n,i,o){var a={hmb_source:o,hmb_medium:"product_tile",hmb_campaign:"mosaic_section_"+e+"_layout_index_"+t+"_layout_type_"+n+"_tile_index_"+i};this.hmbParams=r.default.param(a)}},{key:"scrollToCheckout",value:function(){this.smoothScroller&&(0,p.scrollToCheckout)()}},{key:"shouldDisplayRemindMe",value:function(){if(!this.remindMeHours)return!1;var e=this.model.getEndDate(),t=(0,a.default)();return e.diff(t,"hours")>=this.remindMeHours}},{key:"onRender",value:function(){this.$el.attr("class",this.className()),this.showChildView("countdownTimer",this.countdownView),this.shouldDisplayRemindMe()?(this.showChildView("remindMe",this.remindMeView),this.getRegion("countdownTimer").$el.addClass("remindme-visible")):this.ui.remindMeContainer.addClass("is-hidden"),this.showChildView("heroBackground",this.backgroundView),this.isOnBundlePage&&this.showChildView("charityEl",this.charityView)}}]),t}();m.prototype.events={"click @ui.heroCTA":"scrollToCheckout"},m.prototype.hmbParams=null,m.prototype.regions={countdownTimer:".js-countdown-view",remindMe:".js-hero-remind-me",heroBackground:{el:".js-hero-background-container",replaceElement:!0},charityEl:".js-hero-charity",numBundlesSold:".js-bundles-sold"},m.prototype.template=_.template(l.default),m.prototype.ui={remindMeContainer:".hero-remindme-container",heroCTA:".js-hero-cta"}},2260:function(e,t){e.exports='<div class="orange-warning-box bundle-warn-top">\n  <%= warning %>\n</div>\n'},2261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageTopWarningView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(3)),a=l(n(0)),s=l(n(2260));function l(e){return e&&e.__esModule?e:{default:e}}(t.PageTopWarningView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),i(t,[{key:"initialize",value:function(e){var t=e.warning;this.model=new o.default.Model({warning:t})}}]),t}()).prototype.template=a.default.template(s.default)},2262:function(e,t){e.exports='<button type="button" class="js-remind-button save-button no-style-button" aria-label="">\n  <span class="hb hb-bell-o not-saved-icon js-bell"></span>\n  <span class="hb hb-bell saved-icon js-bell"></span>\n  <div class="js-spinner remind-me-spinner is-hidden"></div>\n</a>\n<span class="error-box js-error-box"></span>\n'},2263:function(e,t){e.exports='<div class="dd-navbar-product-name">\n  <%- productHumanName %>\n</div>\n<button type="button" class="dd-navbar-purchase-button button green js-dd-navbar-purchase-button no-style-button">\n  <%- gtxt(\'Pay What You Want!\') %>\n</button>\n'},2264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BundleNavbarContentView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(0)),a=l(n(2263)),s=n(1143);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.BundleNavbarContentView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"serializeData",value:function(){return{productHumanName:this.options.productHumanName}}},{key:"onPurchaseButtonClicked",value:function(){(0,s.scrollToCheckout)()}}]),t}();u.prototype.events={"click .js-dd-navbar-purchase-button":"onPurchaseButtonClicked"},u.prototype.template=r.default.template(a.default)},2265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeStickyNavbar=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(1148),s=n(2264),l=n(113),u=n(388),c=n(9),d=n(1207),h=n(608),p=n(607);t.initializeStickyNavbar=function(e){var t=e.tiers,n=e.hasBonusContent,i=e.hasCharities,o=e.productHumanName,f=e.countdownTimerOptions,m=e.remindMeModel,y=[];_.forEach(t,function(e){e.is_free||y.push((0,a.getNavbarTextByTier)(e))}),n&&y.push((0,c.gtxt)("Bonuses")),i&&y.push((0,c.gtxt)("Charity")),y.push((0,c.gtxt)("Stats"));var v=new h.StickyNavbarModel({hiddenArea:"#js-navbar-hidden-area",sections:(0,r.default)(".js-nav-row"),sectionNames:y}),g=new p.StickyNavbarView({model:v}).render(),b=new s.BundleNavbarContentView({productHumanName:o}).render(),w=new u.BlockyCountdownTimerView({el:(0,r.default)('<div class="countdown-timer js-countdown-timer">'),model:new l.CountdownTimer({atTime:f.at_time,endTime:f.end_time}),size:"small"});w.render(),g.ui.countdownEl.html(w.el);var O=new d.RemindMeIconView({model:m}).render();return g.ui.remindMeEl.html(O.el),g.ui.navbarRow.append(b.el),(0,r.default)("body").append(g.el),v}},2266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeStatistics=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(4);t.initializeStatistics=function(e,t){t&&function(){for(var e=(0,r.default)(".st-content"),t=[],n=0;n<e.length;n++){var i=e.eq(n);i.data("index",n),t.push({isAnimating:!1,isClosed:!0,$caret:i.find(".st-header-caret"),$body:i.find(".st-body")})}e.on("click",function(e){var n=(0,r.default)(e.currentTarget).data("index"),i=t[n];i.isClosed?(i.$caret.removeClass("hb-caret-right"),i.$caret.addClass("hb-caret-down"),i.$body.show()):(i.$caret.removeClass("hb-caret-down"),i.$caret.addClass("hb-caret-right"),i.$body.hide()),i.isClosed=!i.isClosed})}(),(0,r.default)(".st-leaderboard-name").each(function(e,t){(0,a.twitterLinkify)((0,r.default)(t))}),function(e){(0,r.default)(".js-content-counter").each(function(t,n){var i=(0,r.default)(n),o=i.data("counter-identifier"),a=i.data("count-available"),s=e[o]||0,l=Math.max(a-s,0);i.find(".js-count-remaining").html(l)})}(e)}},2267:function(e,t){e.exports='<div class="mobile-slideout-media js-mobile-slideout-media">\n  <div class="js-youtube-target"></div>\n</div>\n<%= soundtrackPlayerHtml %>\n<div class="mobile-slideout-body js-mobile-slideout-body">\n  <h1 class="mobile-slideout-content-heading"><%- humanName %></h1>\n<%= developersInfoHtml %>\n<%= availabilityIconsHtml %>\n  <div class="mobile-slideout-text">\n<% if (ratingInfo) { %>\n    <div class="slideout-rating">\n      <span class="rating-icon">\n        <i class="rating <%- ratingInfo.system %> <%- ratingInfo.rating_icon %>"></i>\n      </span>\n      <ul class="rating-details">\n  <% _.each(ratingInfo.rating_details, function(ratingDetail) { %>\n        <li><%- ratingDetail %></li>\n  <% }); %>\n      </ul>\n    </div>\n<% } %>\n<% if (hasSoundtracks) { %>\n  <% if (soundtrackListing.hide_listing) { %>\n    <div class="soundtracks-hidden"><%= soundtrackListingHtml %></div>\n  <% } else { %>\n      <%= soundtrackListingHtml %>\n  <% } %>\n<% } %>\n    <%= descriptionText %>\n  </div>\n</div>\n'},2268:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileSlideoutContentView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=p(n(2)),r=p(n(1)),a=p(n(0)),s=n(1212),l=p(n(1211)),u=p(n(1210)),c=p(n(2267)),d=p(n(1209)),h=p(n(1208));function p(e){return e&&e.__esModule?e:{default:e}}var f=t.MobileSlideoutContentView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.displayItem=e.displayItem,this.audioPlayer=new s.AudioPlayer({swfPath:e.swfPath}),this.youtubeAPI=window.YT,this.initialRender()}},{key:"initialRender",value:function(){this.hasSoundtracks=this.displayItem.soundtrack_listing&&this.displayItem.soundtrack_listing.tracks.length>0;var e={ratingInfo:this.displayItem.rating_info,humanName:this.displayItem.human_name,descriptionText:this.displayItem.description_text,renderAdminLinks:!1,soundtrackListing:this.displayItem.soundtrack_listing,hasSoundtracks:this.hasSoundtracks};e.availabilityIconsHtml=this.availableIconsTemplate({availabilityIcons:this.displayItem.availability_icons,renderAdminLinks:!1}),e.developersInfoHtml=this.developersInfoTemplate({developers:this.displayItem.developers,publishers:this.displayItem.publishers,layout:"mobile",renderAdminLinks:!1}),this.displayItem.soundtrack_listing?(e.soundtrackPlayerHtml=this.soundtrackPlayerTemplate({numTracks:this.displayItem.soundtrack_listing.tracks.length,machineName:this.displayItem.machine_name}),e.soundtrackListingHtml=this.soundtrackItemsTemplate({tracks:this.displayItem.soundtrack_listing.tracks,renderAdminLinks:!1})):e.soundtrackPlayerHtml="";var t=this.mobileContentTemplate(e);this.$el.html(t),this.$el.attr("data-slideout",this.displayItem.machine_name),this.displayItem.youtube_link?this.insertYoutube(this.displayItem.youtube_link):this.displayItem.preview_image?this.insertImage(this.displayItem.preview_image):this.$(".js-mobile-slideout-body").css({height:this.getModalDimensions().height})}},{key:"teardown",value:function(){this.$el.empty(),this.audioPlayer.setActivePopup(null)}},{key:"getModalDimensions",value:function(){return{width:.9*(0,r.default)(window).width(),height:.9*(0,r.default)(window).height()}}},{key:"calculateYoutubeDimensions",value:function(){var e=this.getModalDimensions().width;return{width:e,height:e/640*390}}},{key:"insertYoutube",value:function(e){var t=this.getModalDimensions(),n=this.calculateYoutubeDimensions();this.$(".js-mobile-slideout-media").css({height:n.height}),this.$(".js-mobile-slideout-body").css({height:t.height-n.height}),new this.youtubeAPI.Player(this.$(".js-youtube-target")[0],{width:"100%",height:n.height,videoId:e})}},{key:"insertImage",value:function(e){var t=this,n=this.loadImage(e,function(){t.$(".js-mobile-slideout-media").append(n),t.$(".js-mobile-slideout-body").css({height:t.getModalDimensions().height-n.height})})}},{key:"loadImage",value:function(e,t){var n=new Image;return n.src=e,n.onload=t,this.hasSoundtracks||(0,r.default)(n).css({width:"100%"}),n}}]),t}();f.prototype.className="mobile-slideout-content",f.prototype.availableIconsTemplate=a.default.template(l.default),f.prototype.developersInfoTemplate=a.default.template(u.default),f.prototype.mobileContentTemplate=a.default.template(c.default),f.prototype.soundtrackItemsTemplate=a.default.template(d.default),f.prototype.soundtrackPlayerTemplate=a.default.template(h.default)},2269:function(e,t){e.exports='<div class="js-mobile-slideout-close-button mobile-slideout-close-button-container">\n  <div class="mobile-slideout-close-button">\n    <i class="hb hb-times"></i>\n  </div>\n</div>\n<div class="mobile-slideout-content-container js-mobile-slideout-content-container"></div>\n'},2270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileSlideoutContainerView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(1)),r=u(n(0)),a=u(n(2269)),s=n(2268),l=n(17);function u(e){return e&&e.__esModule?e:{default:e}}var c=t.MobileSlideoutContainerView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.HumbleModal),i(t,[{key:"initialize",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this.setDisplayItemListeners(),this.swfPath=e.swfPath,this.ipInChina=e.ipInChina}},{key:"setDisplayItemListeners",value:function(){var e=this,t=this.model.get("displayItems");(0,o.default)("[data-slideout]").each(function(n,i){var r=(0,o.default)(i),a=r.data("slideout");t[a]&&r.on("click",function(){e.render(),e.showSlideout(t[a])})})}},{key:"showSlideout",value:function(e){if(e.is_clickable){this.ipInChina&&(e.youtube_link=null);var t=new s.MobileSlideoutContentView({model:this.model,displayItem:e,swfPath:this.swfPath});this.$(".js-mobile-slideout-content-container").empty(),this.$(".js-mobile-slideout-content-container").append(t.$el),e.soundtrack_listing&&e.soundtrack_listing.tracks.length>0&&this.subview.audioPlayer.setActivePopup(this.subview.$el,e.machine_name),window._gaTrackEventNoninteractive(void 0,"Product details slideout",e.machine_name)}}}]),t}();c.prototype.className="mobile-slideout-container",c.prototype.cancelEl=".js-mobile-slideout-close-button",c.prototype.template=r.default.template(a.default)},2271:function(e,t){e.exports='<div>\n  <div class="navigation-content left js-prev-item">\n    <i class="center hb hb-angle-left js-no-click"></i>\n  </div>\n  <div class="navigation-content right js-next-item">\n    <i class="center hb hb-angle-right js-no-click"></i>\n  </div>\n</div>\n\n<% if (hasMedia) { %>\n  <div class="desktop-slideout-media js-desktop-slideout-media">\n  <% if (renderAdminLinks) { %>\n    <span class="js-admin-edit" data-entity-kind="display_item"></span>\n  <% } %>\n    <span class="image-holder hb js-image-holder"></span>\n    <div id="js-youtube-target"></div>\n    <i class="hb hb-spinner hb-spin media-load-spinner js-media-load-spinner"></i>\n  <%= bookPreviewHtml %>\n  <%= soundtrackPlayerHtml %>\n  </div>\n<% } %>\n\n<div class="desktop-slideout-body js-desktop-slideout-body\n            <% if (isTextSlideout) { %> text-slideout <% } %>\n            <% if (!hasMedia) { %> full-width <% } %>">\n  <h1 class="desktop-slideout-content-heading">\n<% if (renderAdminLinks) { %>\n    <span class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#human-name_anchor"></span>\n<% } %>\n<%- humanName %>\n  </h1>\n<%= developersInfoHtml %>\n<%= availabilityIconsHtml %>\n\n<% if (renderAdminLinks) { %>\n  <span class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#description-text_anchor"></span>\n<% } %>\n  <div class="desktop-slideout-text js-slideout-text">\n<% if (ratingInfo) { %>\n    <div class="slideout-rating">\n  <% if (renderAdminLinks) { %>\n      <span class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#<%- ratingInfo.system %>-rating_anchor"></span>\n  <% } %>\n      <span class="rating-icon">\n        <i class="rating <%- ratingInfo.system %> <%- ratingInfo.rating_icon %>"></i>\n      </span>\n      <ul class="rating-details">\n  <% _.each(ratingInfo.rating_details, function(ratingDetail) { %>\n        <li><%- ratingDetail %></li>\n  <% }); %>\n      </ul>\n    </div>\n<% } %>\n<% if (hasSoundtracks) { %>\n  <% if (soundtrackListing.hide_listing) { %>\n    <div class="soundtracks-hidden"><%= soundtrackListingHtml %></div>\n  <% } else { %>\n      <%= soundtrackListingHtml %>\n  <% } %>\n<% } %>\n    <div><%= descriptionText %></div>\n    <br />\n  </div>\n</div>\n'},2272:function(e,t){e.exports='<% if (bookPreview) { %>\n<div class="preview-overlay">\n  <% if (bookPreview.preview_file_link) { %>\n  <a class=\'preview-download-link\' href=\'<%- bookPreview.preview_file_link %>\' target=\'_blank\'>\n  <% } %>\n    <div class="preview-icon preview-icon-<%- bookPreview.preview_icon %>">\n  <% if (renderAdminLinks) { %>\n      <div class="js-admin-edit" data-entity-kind="display_item" data-anchor-name="#image_extra_anchor"></div>\n  <% } %>\n      <span class="preview-text"><% if (bookPreview.preview_prefix) { %><%- bookPreview.preview_prefix %><% } %><%- gtxt(\'Preview\') %></span>\n      <span class="preview-size">(<%- bookPreview.preview_file_type %>, <%- bookPreview.preview_file_size %>)</span>\n    </div>\n  <% if (bookPreview.preview_file_link) { %>\n  </a>\n  <% } %>\n</div>\n<% } %>\n'},2273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopSlideoutContentView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=f(n(2)),r=f(n(1)),a=f(n(370)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(79)),l=f(n(1211)),u=f(n(2272)),c=f(n(2271)),d=f(n(1210)),h=f(n(1209)),p=f(n(1208));function f(e){return e&&e.__esModule?e:{default:e}}a.default.createScroller(document.body,500,0);var m=t.DesktopSlideoutContentView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.displayItem=e.displayItem,this.renderAdminLinks=e.renderAdminLinks&&"giving_fund"!==e.displayItem.machine_name,this.hasMedia=this.checkForMedia(),this.youtubeAPI=window.YT,this.render()}},{key:"render",value:function(){this.hasSoundtracks=this.displayItem.soundtrack_listing&&this.displayItem.soundtrack_listing.tracks.length>0;var e=this.displayItem.soundtrack_listing&&this.displayItem.soundtrack_listing.tracks.length<=1,t={ratingInfo:this.displayItem.rating_info,humanName:this.displayItem.human_name,soundtrackListing:this.displayItem.soundtrack_listing,hasSoundtracks:this.hasSoundtracks,descriptionText:this.displayItem.description_text,renderAdminLinks:this.renderAdminLinks,hasMedia:this.hasMedia,isTextSlideout:e};t.availabilityIconsHtml=this.availableIconsTemplate({availabilityIcons:this.displayItem.availability_icons,renderAdminLinks:this.renderAdminLinks}),t.bookPreviewHtml=this.bookPreviewTemplate({bookPreview:this.displayItem.book_preview,renderAdminLinks:this.renderAdminLinks}),t.developersInfoHtml=this.developersInfoTemplate({developers:this.displayItem.developers,publishers:this.displayItem.publishers,layout:"desktop",renderAdminLinks:this.renderAdminLinks}),this.displayItem.soundtrack_listing?(t.soundtrackPlayerHtml=this.soundtrackPlayerTemplate({numTracks:this.displayItem.soundtrack_listing.tracks.length,machineName:this.displayItem.machine_name}),t.soundtrackListingHtml=this.soundtrackItemsTemplate({tracks:this.displayItem.soundtrack_listing.tracks,renderAdminLinks:this.renderAdminLinks})):t.soundtrackPlayerHtml="";var n=this.desktopContentTemplate(t);this.$el.html(n),this.$el.attr("data-slideout",this.displayItem.machine_name),this.mediaDimensions={maxWidth:600,width:"100%",height:350,soundtrackImageWidth:260},this.displayItem.youtube_link?this.$(".desktop-slideout-media").css("max-height",this.mediaDimensions.height+"px"):this.displayItem.preview_image&&this.insertImage(this.displayItem.preview_image),s.renderTinyLinks({displayItemMachineName:this.displayItem.machine_name},this.$(".js-admin-edit"))}},{key:"checkForMedia",value:function(){return this.displayItem.youtube_link||this.displayItem.preview_image||this.displayItem.book_preview||this.displayItem.soundtrack_listing&&this.displayItem.soundtrack_listing.tracks.length}},{key:"insertYoutubeVideo",value:function(){new this.youtubeAPI.Player("js-youtube-target",{width:this.mediaDimensions.width,height:this.mediaDimensions.height,videoId:this.displayItem.youtube_link,playerVars:{rel:0,showinfo:0,vq:"large",iv_load_policy:3,wmode:"transparent"}}),this.$(".js-media-load-spinner").remove()}},{key:"insertImage",value:function(e){var t=this;this.$(".js-media-load-spinner").remove();var n=this.loadImage(e,function(){var e=(0,r.default)(n);t.$(".js-image-holder").after(n),t.$(".js-media-load-spinner").remove(),t.$(".preview-overlay").show(),e.addClass("slideout-image"),t.displayItem.youtube_link||e.width()>t.mediaDimensions.maxWidth?(n.style.maxWidth=t.mediaDimensions.maxWidth+"px",n.style.width=t.mediaDimensions.width):t.displayItem.soundtrack_listing&&t.displayItem.soundtrack_listing.tracks.length&&(n.style.maxWidth=t.mediaDimensions.soundtrackImageWidth+"px")})}},{key:"loadImage",value:function(e,t){var n=new Image;return n.src=e,n.onload=t,n}},{key:"teardown",value:function(){this.$el.empty()}}]),t}();m.prototype.className="desktop-slideout-content",m.prototype.availableIconsTemplate=_.template(l.default),m.prototype.bookPreviewTemplate=_.template(u.default),m.prototype.desktopContentTemplate=_.template(c.default),m.prototype.developersInfoTemplate=_.template(d.default),m.prototype.soundtrackItemsTemplate=_.template(h.default),m.prototype.soundtrackPlayerTemplate=_.template(p.default)},2274:function(e,t){e.exports='<div class="slideout-up-arrow js-slideout-arrow">\n  <div class="slideout-inner-triangle"></div>\n</div>\n\n<div class="close-slideout js-close-slideout">\n  <span class="close js-no-click">X</span>\n</div>\n\n<div class="desktop-slideout-content-container js-desktop-slideout-content-container"></div>\n'},2275:function(e,t,n){var i,o,r;o=[n(1)],void 0===(r="function"==typeof(i=function(e,t){e.fn.jPlayer=function(n){var i="string"==typeof n,o=Array.prototype.slice.call(arguments,1),r=this;return n=!i&&o.length?e.extend.apply(null,[!0,n].concat(o)):n,i&&"_"===n.charAt(0)?r:(i?this.each(function(){var i=e(this).data("jPlayer"),a=i&&e.isFunction(i[n])?i[n].apply(i,o):i;if(a!==i&&a!==t)return r=a,!1}):this.each(function(){var t=e(this).data("jPlayer");t?t.option(n||{}):e(this).data("jPlayer",new e.jPlayer(n,this))}),r)},e.jPlayer=function(t,n){if(arguments.length){this.element=e(n),this.options=e.extend(!0,{},this.options,t);var i=this;this.element.bind("remove.jPlayer",function(){i.destroy()}),this._init()}},"function"!=typeof e.fn.stop&&(e.fn.stop=function(){}),e.jPlayer.emulateMethods="load play pause",e.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",e.jPlayer.emulateOptions="muted volume",e.jPlayer.reservedEvent="ready flashreset resize repeat error warning",e.jPlayer.event={},e.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){e.jPlayer.event[this]="jPlayer_"+this}),e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],e.jPlayer.pause=function(){e.jPlayer.prototype.destroyRemoved(),e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var n=function(){this.init()};n.prototype={init:function(){this.options={timeFormat:e.jPlayer.timeFormat}},time:function(e){e=e&&"number"==typeof e?e:0;var t=new Date(1e3*e),n=t.getUTCHours(),i=this.options.timeFormat.showHour?t.getUTCMinutes():t.getUTCMinutes()+60*n,o=this.options.timeFormat.showMin?t.getUTCSeconds():t.getUTCSeconds()+60*i,r=this.options.timeFormat.padHour&&n<10?"0"+n:n,a=this.options.timeFormat.padMin&&i<10?"0"+i:i,s=this.options.timeFormat.padSec&&o<10?"0"+o:o,l="";return l+=this.options.timeFormat.showHour?r+this.options.timeFormat.sepHour:"",l+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"",l+=this.options.timeFormat.showSec?s+this.options.timeFormat.sepSec:""}};var i=new n;e.jPlayer.convertTime=function(e){return i.time(e)},e.jPlayer.uaBrowser=function(e){var t=e.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}},e.jPlayer.uaPlatform=function(e){var t=e.toLowerCase(),n=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(t)||[],i=/(ipad|playbook)/.exec(t)||!/(mobile)/.exec(t)&&/(android)/.exec(t)||[];return n[1]&&(n[1]=n[1].replace(/\s/g,"_")),{platform:n[1]||"",tablet:i[1]||""}},e.jPlayer.browser={},e.jPlayer.platform={};var o=e.jPlayer.uaBrowser(navigator.userAgent);o.browser&&(e.jPlayer.browser[o.browser]=!0,e.jPlayer.browser.version=o.version);var r=e.jPlayer.uaPlatform(navigator.userAgent);r.platform&&(e.jPlayer.platform[r.platform]=!0,e.jPlayer.platform.mobile=!r.tablet,e.jPlayer.platform.tablet=!!r.tablet),e.jPlayer.getDocMode=function(){var t;return e.jPlayer.browser.msie&&(document.documentMode?t=document.documentMode:(t=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(t=7))),t},e.jPlayer.browser.documentMode=e.jPlayer.getDocMode(),e.jPlayer.nativeFeatures={init:function(){var e,t,n,i=document,o=i.createElement("video"),r={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},a=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=e={support:{w3c:!!i[r.w3c[0]],moz:!!i[r.moz[0]],webkit:"function"==typeof i[r.webkit[3]],webkitVideo:"function"==typeof o[r.webkitVideo[2]],ms:"function"==typeof o[r.ms[2]]},used:{}},t=0,n=a.length;t<n;t++){var s=a[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(e.spec){var l=r[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return(e=e||i)[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return(e=e||i)[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={}}},e.jPlayer.nativeFeatures.init(),e.jPlayer.focus=null,e.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var a=function(t){var n,i=e.jPlayer.focus;i&&(e.each(e.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(e,i){if(t.target.nodeName.toUpperCase()===i.toUpperCase())return n=!0,!1}),n||e.each(i.options.keyBindings,function(n,o){if(o&&e.isFunction(o.fn)&&("number"==typeof o.key&&t.which===o.key||"string"==typeof o.key&&t.key===o.key))return t.preventDefault(),o.fn(i),!1}))};e.jPlayer.keys=function(t){e(document.documentElement).unbind("keydown.jPlayer"),t&&e(document.documentElement).bind("keydown.jPlayer",a)},e.jPlayer.keys(!0),e.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(t){t.jPlayer.options.loop?e(this).unbind(".jPlayerRepeat").bind(e.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){e(this).jPlayer("play")}):e(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var n=this;if(this.element.empty(),this.status=e.extend({},this.status),this.internal=e.extend({},this.internal),this.options.timeFormat=e.extend({},e.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=e.jPlayer.platform.ipad||e.jPlayer.platform.iphone||e.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!e.jPlayer.focus&&(e.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},e.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),e.each(this.options.supplied.toLowerCase().split(","),function(t,i){var o=i.replace(/^\s+|\s+$/g,"");if(n.format[o]){var r=!1;e.each(n.formats,function(e,t){if(o===t)return r=!0,!1}),r||n.formats.push(o)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,i){var o=i.replace(/^\s+|\s+$/g,"");if(n.solution[o]){var r=!1;e.each(n.solutions,function(e,t){if(o===t)return r=!0,!1}),r||n.solutions.push(o)}}),e.each(this.options.auroraFormats.toLowerCase().split(","),function(t,i){var o=i.replace(/^\s+|\s+$/g,"");if(n.format[o]){var r=!1;e.each(n.aurora.formats,function(e,t){if(o===t)return r=!0,!1}),r||n.aurora.formats.push(o)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,i){n.options[e]!==t&&(n.element.bind(i+".jPlayer",n.options[e]),n.options[e]=t)}),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){n.require[n.format[t].media]=!0}),this.require.video?this.options=e.extend(!0,{},this.optionsVideo,this.options):this.options=e.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),e.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){n.status.video&&!n.status.waitForPlay||n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},e.each(this.formats,function(t,i){n.html.canPlay[i]=n.html[n.format[i].media].available&&""!==n.htmlElement[n.format[i].media].canPlayType(n.format[i].codec),n.aurora.canPlay[i]=e.inArray(i,n.aurora.formats)>-1,n.flash.canPlay[i]=n.format[i].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,i){if(0===t)n[i].desired=!0;else{var o=!1,r=!1;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&("video"===n.format[t].media?r=!0:o=!0)}),n[i].desired=n.require.audio&&!o||n.require.video&&!r}}),this.html.support={},this.aurora.support={},this.flash.support={},e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired,n.aurora.support[t]=n.aurora.canPlay[t]&&n.aurora.desired,n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,i){e.each(n.formats,function(e,t){if(n[i].support[t])return n[i].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var i,o="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(e.jPlayer.browser.msie&&(Number(e.jPlayer.browser.version)<9||e.jPlayer.browser.documentMode<9)){var r='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',a=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+o+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];i=document.createElement(r);for(var s=0;s<a.length;s++)i.appendChild(document.createElement(a[s]))}else{var l=function(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)};(i=document.createElement("object")).setAttribute("id",this.internal.flash.id),i.setAttribute("name",this.internal.flash.id),i.setAttribute("data",this.internal.flash.swf),i.setAttribute("type","application/x-shockwave-flash"),i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("tabindex","-1"),l(i,"flashvars",o),l(i,"allowscriptaccess","always"),l(i,"bgcolor",this.options.backgroundColor),l(i,"wmode",this.options.wmode)}this.element.append(i),this.internal.flash.jq=e(i)}this.html.used&&!this.flash.used?this.status.playbackRateEnabled=this._testPlaybackRate("audio"):this.status.playbackRateEnabled=!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){n._trigger(e.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(e.jPlayer.event.repeat),n._trigger(e.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),e.each(this.css.jq,function(e,t){t.length&&t.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===e.jPlayer.focus&&(e.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&(n.data("jPlayer")||(n.jPlayer("destroy"),delete t.instances[e]))})},enable:function(){},disable:function(){},_testCanPlayType:function(e){try{return e.canPlayType(this.format.mp3.codec),!0}catch(e){return!1}},_testPlaybackRate:function(e){var t;e="string"==typeof e?e:"audio",t=document.createElement(e);try{return"playbackRate"in t&&(t.playbackRate=.5,.5===t.playbackRate)}catch(e){return!1}},_uaBlocklist:function(t){var n=navigator.userAgent.toLowerCase(),i=!1;return e.each(t,function(e,t){if(t&&t.test(n))return i=!0,!1}),i},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(t,n){var i=this;t.preload=this.options.preload,t.muted=this.options.muted,t.volume=this.options.volume,this.status.playbackRateEnabled&&(t.defaultPlaybackRate=this.options.defaultPlaybackRate,t.playbackRate=this.options.playbackRate),t.addEventListener("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("loadeddata",function(){n.gate&&(i.androidFix.setMedia=!1,i.androidFix.play&&(i.androidFix.play=!1,i.play(i.androidFix.time)),i.androidFix.pause&&(i.androidFix.pause=!1,i.pause(i.androidFix.time)),i._trigger(e.jPlayer.event.loadeddata))},!1),t.addEventListener("timeupdate",function(){n.gate&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){n.gate&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){n.gate&&(i._updateButtons(!0),i._html_checkWaitForPlay(),i._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){n.gate&&(i._updateButtons(!0),i._seeked(),i._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){n.gate&&(i._updateButtons(!1),i._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){n.gate&&(i._seeking(),i._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("seeking",function(){n.gate&&(i._seeking(),i._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){n.gate&&(i._seeked(),i._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("volumechange",function(){n.gate&&(i.options.volume=t.volume,i.options.muted=t.muted,i._updateMute(),i._updateVolume(),i._trigger(e.jPlayer.event.volumechange))},!1),t.addEventListener("ratechange",function(){n.gate&&(i.options.defaultPlaybackRate=t.defaultPlaybackRate,i.options.playbackRate=t.playbackRate,i._updatePlaybackRate(),i._trigger(e.jPlayer.event.ratechange))},!1),t.addEventListener("suspend",function(){n.gate&&(i._seeked(),i._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){n.gate&&(e.jPlayer.browser.webkit||(i.htmlElement.media.currentTime=0),i.htmlElement.media.pause(),i._updateButtons(!1),i._getHtmlStatus(t,!0),i._updateInterface(),i._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(clearTimeout(i.internal.htmlDlyCmdId),i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:e.jPlayer.error.URL,context:i.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(o,r){t.addEventListener(this,function(){n.gate&&i._trigger(e.jPlayer.event[r])},!1)})},_addAuroraEventListeners:function(t,n){var i=this;t.volume=100*this.options.volume,t.on("progress",function(){n.gate&&(i.internal.cmdsIgnored&&this.readyState>0&&(i.internal.cmdsIgnored=!1),i._getAuroraStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.progress),t.duration>0&&i._trigger(e.jPlayer.event.timeupdate))},!1),t.on("ready",function(){n.gate&&i._trigger(e.jPlayer.event.loadeddata)},!1),t.on("duration",function(){n.gate&&(i._getAuroraStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.durationchange))},!1),t.on("end",function(){n.gate&&(i._updateButtons(!1),i._getAuroraStatus(t,!0),i._updateInterface(),i._trigger(e.jPlayer.event.ended))},!1),t.on("error",function(){n.gate&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&!i.status.nativeVideoControls&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&!i.status.nativeVideoControls&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:e.jPlayer.error.URL,context:i.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(e,t){var n=0,i=0,o=0,r=0;isFinite(e.duration)&&(this.status.duration=e.duration),n=e.currentTime,i=this.status.duration>0?100*n/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(o=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,r=this.status.duration>0?100*e.currentTime/e.seekable.end(e.seekable.length-1):0):(o=100,r=i),t&&(n=0,r=0,i=0),this.status.seekPercent=o,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=e.readyState,this.status.networkState=e.networkState,this.status.playbackRate=e.playbackRate,this.status.ended=e.ended},_getAuroraStatus:function(e,t){var n=0,i=0,o=0,r=0;this.status.duration=e.duration/1e3,n=e.currentTime/1e3,i=this.status.duration>0?100*n/this.status.duration:0,e.buffered>0?(o=this.status.duration>0?e.buffered*this.status.duration/this.status.duration:100,r=this.status.duration>0?n/(e.buffered*this.status.duration):0):(o=100,r=i),t&&(n=0,r=0,i=0),this.status.seekPercent=o,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=i,this.status.currentTime=n,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,i){var o=e.Event(t);o.jPlayer={},o.jPlayer.version=e.extend({},this.version),o.jPlayer.options=e.extend(!0,{},this.options),o.jPlayer.status=e.extend(!0,{},this.status),o.jPlayer.html=e.extend(!0,{},this.html),o.jPlayer.aurora=e.extend(!0,{},this.aurora),o.jPlayer.flash=e.extend(!0,{},this.flash),n&&(o.jPlayer.error=e.extend({},n)),i&&(o.jPlayer.warning=e.extend({},i)),this.element.trigger(o)},jPlayerFlashEvent:function(t,n){if(t===e.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var i=this.status.currentTime,o=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),i>0&&(o?this.pause(i):this.play(i))}this._trigger(e.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(e.jPlayer.event.repeat),this._trigger(t);if(this.flash.gate)switch(t){case e.jPlayer.event.progress:case e.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.click:this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;case e.jPlayer.event.ready:break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration,this.status.remaining=e.duration-e.currentTime,this.status.videoWidth=e.videoWidth,this.status.videoHeight=e.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(e){e===t?e=!this.status.paused:this.status.paused=!e,e?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%")),this.css.jq.currentTime.length&&this._convertTime(this.status.currentTime)!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));var e="",t=this.status.duration,n=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(t=this.status.media.duration,n=t-this.status.currentTime),e=this.options.remainingDuration?(n>0?"-":"")+this._convertTime(n):this._convertTime(t)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))},_convertTime:n.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this._escapeHtml(e)+'">x</a>',t.firstChild.href},_absoluteMediaUrls:function(t){var n=this;return e.each(t,function(e,i){i&&n.format[e]&&"data:"!==i.substr(0,5)&&(t[e]=n._qualifyURL(i))}),t},addStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[e])},removeStateClass:function(e){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[e])},setMedia:function(t){var n=this,i=!1,o=this.status.media.poster!==t.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,t=this._absoluteMediaUrls(t),e.each(this.formats,function(o,r){var a="video"===n.format[r].media;if(e.each(n.solutions,function(o,s){if(n[s].support[r]&&n._validString(t[r])){var l="html"===s,u="aurora"===s;return a?(l?(n.html.video.gate=!0,n._html_setVideo(t),n.html.active=!0):(n.flash.gate=!0,n._flash_setVideo(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(l?(n.html.audio.gate=!0,n._html_setAudio(t),n.html.active=!0,e.jPlayer.platform.android&&(n.androidFix.setMedia=!0)):u?(n.aurora.gate=!0,n._aurora_setAudio(t),n.aurora.active=!0):(n.flash.gate=!0,n._flash_setAudio(t),n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),i=!0,!1}}),i)return!1}),i?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(t.poster)&&(o?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show()),"string"==typeof t.title&&(this.css.jq.title.length&&this.css.jq.title.html(t.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",t.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",t.title)),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface(),this._trigger(e.jPlayer.event.setmedia)):this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(e.jPlayer.focus=this)},play:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&!this.status.paused?this.pause(e):(e="number"==typeof e?e:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(e):this.aurora.active?this._aurora_play(e):this.flash.active&&this._flash_play(e)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:NaN,this.status.srcSet?this.html.active?this._html_pause(e):this.aurora.active?this._aurora_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},tellOthers:function(t,n){var i=this,o="function"==typeof n,r=Array.prototype.slice.call(arguments);"string"==typeof t&&(o&&r.splice(1,1),e.jPlayer.prototype.destroyRemoved(),e.each(this.instances,function(){i.element!==this&&(o&&!n.call(this.data("jPlayer"),i)||this.jPlayer.apply(this,r))}))},pauseOthers:function(e){this.tellOthers("pause",function(){return this.status.srcSet},e)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.aurora.active?this._aurora_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},_muted:function(e){this.mutedWorker(e),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},e)},mutedWorker:function(t){this.options.muted=t,this.html.used&&this._html_setProperty("muted",t),this.aurora.used&&this._aurora_mute(t),this.flash.used&&this._flash_mute(t),this.html.video.gate||this.html.audio.gate||(this._updateMute(t),this._updateVolume(this.options.volume),this._trigger(e.jPlayer.event.volumechange))},mute:function(e){var n="object"==typeof e;n&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(e=e===t||!!e,this._muted(e))},unmute:function(e){e=e===t||!!e,this._muted(!e)},_updateMute:function(e){e===t&&(e=this.options.muted),e?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(e){this.volumeWorker(e),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},e)},volumeWorker:function(t){t=this._limitValue(t,0,1),this.options.volume=t,this.html.used&&this._html_setProperty("volume",t),this.aurora.used&&this._aurora_volume(t),this.flash.used&&this._flash_volume(t),this.html.video.gate||this.html.audio.gate||(this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange))},volumeBar:function(t){if(this.css.jq.volumeBar.length){var n=e(t.currentTarget),i=n.offset(),o=t.pageX-i.left,r=n.width(),a=n.height()-t.pageY+i.top,s=n.height();this.options.verticalVolume?this.volume(a/s):this.volume(o/r)}this.options.muted&&this._muted(!1)},_updateVolume:function(e){e===t&&(e=this.options.volume),e=this.options.muted?0:e,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*e+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(t){var n=this;this.options.cssSelectorAncestor=t,this._removeUiClass(),this.ancestorJq=t?e(t):[],t&&1!==this.ancestorJq.length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(t,n){var i=this;"string"==typeof n?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this[t]&&this.css.jq[t].bind("click.jPlayer",function(n){n.preventDefault(),i[t](n),i.options.autoBlur?e(this).blur():e(this).focus()}),n&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(e){this.options.toggleDuration&&(this.options.captureDuration&&e.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(t){if(this.css.jq.seekBar.length){var n=e(t.currentTarget),i=n.offset(),o=t.pageX-i.left,r=n.width(),a=100*o/r;this.playHead(a)}},playbackRate:function(e){this._setOption("playbackRate",e)},playbackRateBar:function(t){if(this.css.jq.playbackRateBar.length){var n,i,o=e(t.currentTarget),r=o.offset(),a=t.pageX-r.left,s=o.width(),l=o.height()-t.pageY+r.top,u=o.height();n=this.options.verticalPlaybackRate?l/u:a/s,i=n*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(i)}},_updatePlaybackRate:function(){var e=this.options.playbackRate,t=(e-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*t+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(t){this.options.loop!==t&&(this.options.loop=t,this._updateButtons(),this._trigger(e.jPlayer.event.repeat))},option:function(n,i){var o=n;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof n){var r=n.split(".");if(i===t){for(var a=e.extend(!0,{},this.options),s=0;s<r.length;s++){if(a[r[s]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;a=a[r[s]]}return a}for(var l=o={},u=0;u<r.length;u++)u<r.length-1?(l[r[u]]={},l=l[r[u]]):l[r[u]]=i}return this._setOptions(o),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(t,n){var i=this;switch(t){case"volume":this.volume(n);break;case"muted":this._muted(n);break;case"globalVolume":this.options[t]=n;break;case"cssSelectorAncestor":this._cssSelectorAncestor(n);break;case"cssSelector":e.each(n,function(e,t){i._cssSelector(e,t)});break;case"playbackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",n),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",n),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[t]=n=this._limitValue(n,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[t]=n=this._limitValue(n,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[t]!==n){var o=e.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!o||o&&!this.status.waitForPlay)&&(o||(this.options[t]=n),n?this._requestFullscreen():this._exitFullscreen(),o||this._setOption("fullWindow",n))}break;case"fullWindow":this.options[t]!==n&&(this._removeUiClass(),this.options[t]=n,this._refreshSize());break;case"size":this.options.fullWindow||this.options[t].cssClass===n.cssClass||this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[t].cssClass!==n.cssClass&&this._removeUiClass(),this.options[t]=e.extend({},this.options[t],n),this._refreshSize();break;case"autohide":this.options[t]=e.extend({},this.options[t],n),this._updateAutohide();break;case"loop":this._loop(n);break;case"remainingDuration":this.options[t]=n,this._updateInterface();break;case"toggleDuration":this.options[t]=n;break;case"nativeVideoControls":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[t]=e.extend({},this.options[t],n),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[t]=e.extend({},this.options[t],n),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[t]!==n&&(this.options[t]=n,n?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[t]=e.extend({},this.options[t],n);break;case"keyEnabled":this.options[t]=n,n||this!==e.jPlayer.focus||(e.jPlayer.focus=null);break;case"keyBindings":this.options[t]=e.extend(!0,{},this.options[t],n);break;case"audioFullScreen":case"autoBlur":this.options[t]=n}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(e.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var e=this,t="mousemove.jPlayer.jPlayerAutohide",n=function(t){var n,i,o=!1;void 0!==e.internal.mouse?(n=e.internal.mouse.x-t.pageX,i=e.internal.mouse.y-t.pageY,o=Math.floor(n)>0||Math.floor(i)>0):o=!0,e.internal.mouse={x:t.pageX,y:t.pageY},o&&e.css.jq.gui.fadeIn(e.options.autohide.fadeIn,function(){clearTimeout(e.internal.autohideId),e.internal.autohideId=setTimeout(function(){e.css.jq.gui.fadeOut(e.options.autohide.fadeOut)},e.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(t,n),this.css.jq.gui.bind(t,n),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(e){var t="object"==typeof e;t&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var t=this,n=e.jPlayer.nativeFeatures.fullscreen;n.api.fullscreenEnabled&&n.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){t._fullscreenchange()}),document.addEventListener(n.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var t=e.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(t.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!e.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var t=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],n=e.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(t=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.requestFullscreen(t)},_exitFullscreen:function(){var t,n=e.jPlayer.nativeFeatures.fullscreen;n.used.webkitVideo&&(t=this.htmlElement.video),n.api.fullscreenEnabled&&n.api.exitFullscreen(t)},_html_initMedia:function(t){var n=e(this.htmlElement.media).empty();e.each(t.track||[],function(e,t){var i=document.createElement("track");i.setAttribute("kind",t.kind?t.kind:""),i.setAttribute("src",t.src?t.src:""),i.setAttribute("srclang",t.srclang?t.srclang:""),i.setAttribute("label",t.label?t.label:""),t.def&&i.setAttribute("default",t.def),n.append(i)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setFormat:function(t){var n=this;e.each(this.formats,function(e,i){if(n.html.support[i]&&t[i])return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1})},_html_setAudio:function(e){this._html_setFormat(e),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(e)},_html_setVideo:function(e){this._html_setFormat(e),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(e.poster)?e.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(e)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this,n=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=e;else if(isNaN(e))n.play();else{this.internal.cmdsIgnored&&n.play();try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=e,n.play()}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},250))}}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this,n=this.htmlElement.media;if(this.androidFix.play=!1,e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),n.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=e;else if(!isNaN(e))try{if(n.seekable&&!("object"==typeof n.seekable&&n.seekable.length>0))throw 1;n.currentTime=e}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},250))}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this,n=this.htmlElement.media;this._html_load();try{if("object"==typeof n.seekable&&n.seekable.length>0)n.currentTime=e*n.seekable.end(n.seekable.length-1)/100;else{if(!(n.duration>0)||isNaN(n.duration))throw"e";n.currentTime=e*n.duration/100}}catch(n){return void(this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(e,t){this.html.audio.available&&(this.htmlElement.audio[e]=t),this.html.video.available&&(this.htmlElement.video[e]=t)},_aurora_setAudio:function(t){var n=this;e.each(this.formats,function(e,i){if(n.aurora.support[i]&&t[i])return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(t){this.status.waitForLoad||isNaN(t)||this.aurora.player.seek(t),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(e.jPlayer.event.play)},_aurora_pause:function(t){isNaN(t)||this.aurora.player.seek(1e3*t),this.aurora.player.pause(),t>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(e.jPlayer.event.pause)},_aurora_playHead:function(e){this.aurora.player.duration>0&&this.aurora.player.seek(e*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(e){this.aurora.player.volume=100*e},_aurora_mute:function(e){e?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=e},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4a":case"fla":n._getMovie().fl_setAudio_m4a(t[i]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[i]);break;case"rtmpa":n._getMovie().fl_setAudio_rtmp(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4v":case"flv":n._getMovie().fl_setVideo_m4v(t[i]);break;case"rtmpv":n._getMovie().fl_setVideo_rtmp(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(e){this._flashError(e)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(e){this._flashError(e)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(e){this._flashError(e)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(e){this._flashError(e)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(e){this._flashError(e)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(e){this._flashError(e)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var e,t=0;if(window.ActiveXObject)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var n=e.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),t=parseInt(n[0],10)+"."+parseInt(n[1],10))}}catch(e){}else navigator.plugins&&navigator.mimeTypes.length>0&&(e=navigator.plugins["Shockwave Flash"])&&(t=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*t},_checkForFlash:function(e){var t=!1;return this._getFlashPluginVersion()>=e&&(t=!0),t},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,n){return e<t?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){var n;n=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:e.jPlayer.error[n],context:this.internal.flash.swf,message:e.jPlayer.errorMsg[n]+t.message,hint:e.jPlayer.errorHint[n]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n"+t.message:"")+(t.hint?"\n"+t.hint:"")+"\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n),this.options.warningAlerts&&this._alert("Warning!"+(n.message?"\n"+n.message:"")+(n.hint?"\n"+n.hint:"")+"\nContext: "+n.context)},_alert:function(e){var t="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(t):alert(t)},_emulateHtmlBridge:function(){var t=this;e.each(e.jPlayer.emulateMethods.split(/\s+/g),function(e,n){t.internal.domNode[n]=function(e){t[n](e)}}),e.each(e.jPlayer.event,function(n,i){var o=!0;e.each(e.jPlayer.reservedEvent.split(/\s+/g),function(e,t){if(t===n)return o=!1,!1}),o&&t.element.bind(i+".jPlayer.jPlayerHtml",function(){t._emulateHtmlUpdate();var e=document.createEvent("Event");e.initEvent(n,!1,!0),t.internal.domNode.dispatchEvent(e)})})},_emulateHtmlUpdate:function(){var t=this;e.each(e.jPlayer.emulateStatus.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.status[n]}),e.each(e.jPlayer.emulateOptions.split(/\s+/g),function(e,n){t.internal.domNode[n]=t.options[n]})},_destroyHtmlBridge:function(){var t=this;this.element.unbind(".jPlayerHtml");var n=e.jPlayer.emulateMethods+" "+e.jPlayer.emulateStatus+" "+e.jPlayer.emulateOptions;e.each(n.split(/\s+/g),function(e,n){delete t.internal.domNode[n]})}},e.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})?i.apply(t,o):i)||(e.exports=r)},2276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopSlideoutContainerView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(2)),r=c(n(1)),a=c(n(370)),s=n(1212),l=c(n(2274)),u=n(2273);function c(e){return e&&e.__esModule?e:{default:e}}var d=t.DesktopSlideoutContainerView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.renderAdminLinks=e.renderAdminLinks,this.ipInChina=e.ipInChina,this.calculateDisplayItemFlexOrder(),this.addSlideoutHolders(),this.setDisplayItemListeners(),this.currentItemMachineName="",this.$currentSlideout=null,this.audioPlayer=new s.AudioPlayer({swfPath:e.swfPath})}},{key:"removeYTLinks",value:function(e){return e.youtube_link=null,e}},{key:"calculateDisplayItemFlexOrder",value:function(){(0,r.default)(".dd-image-box-list, .bonus-items-container").each(function(e,t){var n=(0,r.default)(t),i=n.outerWidth(!1),o=0,a=0;n.children().each(function(e,t){var n=(0,r.default)(t),s=n.outerWidth(!0);a+s>i&&(o+=2,a=0),a+=s,n.css("order",o)})})}},{key:"addSlideoutHolders",value:function(){var e=(0,r.default)("<span>").addClass("slideout-holder js-slideout-holder"),t=(0,r.default)(".dd-image-box-list, .bonus-items-container");t.addClass("js-slideout-items-row"),t.append(e)}},{key:"setDisplayItemListeners",value:function(){var e=this,t=this.model.get("displayItems"),n=(0,r.default)("[data-slideout]");n.each(function(i,o){var a=(0,r.default)(o),s=a.data("slideout");t[s]&&(e.ipInChina&&t[s].youtube_link&&e.removeYTLinks(t[s]),a.on("click",function(o){if(e.alreadyClicked(o))o.stopPropagation();else if(e.currentItemMachineName===s)e.hideSlideout();else{var r=i-1>=0?n[i-1]:null,l=i+1<n.length?n[i+1]:null;e.showSlideout(a,t[s],r,l)}}))}),(0,r.default)(window).resize(function(){e.handleResize()})}},{key:"teardownSubView",value:function(){this.subview&&(this.subview.teardown(),this.subview=null),this.audioPlayer.setActivePopup(null)}},{key:"removePaddingBelowSlideout",value:function(){if(this.$currentSlideout){var e=this.$currentSlideout.siblings(),t=e.length?(0,r.default)(e[e.length-1]):null;if(t&&t.css("order")<=this.$currentSlideout.css("order")){var n=this.$currentSlideout.parent();this.paddingBelowSlideout=n.css("padding-bottom"),n.css("padding-bottom",0)}}}},{key:"restorePaddingBelowSlideout",value:function(){this.paddingBelowSlideout&&this.$currentSlideout&&(this.$currentSlideout.parent().css("padding-bottom",this.paddingBelowSlideout),this.paddingBelowSlideout=null)}},{key:"hideSlideout",value:function(){this.restorePaddingBelowSlideout(),this.currentItemMachineName="",this.$currentSlideout=null,this.$(".js-slideout-arrow").hide(),(0,r.default)(".slideout-holder").slideUp({duration:150}),this.teardownSubView(),(0,r.default)(document).unbind("keydown",this.currentKeydownHandler)}},{key:"showSlideout",value:function(e,t,n,i){var o=this;if(t.is_clickable){this.teardownSubView(),this.restorePaddingBelowSlideout(),this.currentItemMachineName=t.machine_name,this.$currentSlideout=e.closest(".js-slideout-items-row").find(".js-slideout-holder");var s=this.isSlideoutOpen();(0,r.default)(".js-slideout-holder").not(this.$currentSlideout).hide(),this.$currentSlideout.css("order",Number(e.parent().css("order"))+1),a.default.to(e[0]),s||(this.renderSlideoutFrame(),this.setupCloseSlideout()),this.renderSlideoutContent(t),this.setupNavigation(n,i),window._gaTrackEventNoninteractive(void 0,"Product details slideout",this.currentItemMachineName),t.soundtrack_listing&&t.soundtrack_listing.tracks.length>0&&this.audioPlayer.setActivePopup(this.subview.$el,this.currentItemMachineName),this.removePaddingBelowSlideout(),this.$currentSlideout.slideDown({complete:function(){o.adjustArrow(e,s),o.adjustDescriptionFader(),s||o.insertYoutubeVideo()},duration:150})}}},{key:"setupNavigation",value:function(e,t){var n=this.$(".js-prev-item");null!==e?(n.show(),n.unbind("click"),n.click(function(){(0,r.default)(e).click()})):n.hide();var i=this.$(".js-next-item");null!==t?(i.show(),i.unbind("click"),i.click(function(){(0,r.default)(t).click()})):i.hide();(0,r.default)(document).unbind("keydown",this.currentKeydownHandler),this.currentKeydownHandler=function(n){"ArrowLeft"===n.key?null!==e&&(0,r.default)(e).click():"ArrowRight"===n.key&&null!==t&&(0,r.default)(t).click()},(0,r.default)(document).bind("keydown",this.currentKeydownHandler)}},{key:"setupCloseSlideout",value:function(){var e=this;this.$(".js-close-slideout").click(function(){e.hideSlideout()})}},{key:"isSlideoutOpen",value:function(){return this.$currentSlideout.is(":visible")}},{key:"alreadyClicked",value:function(e){return e.originalEvent&&(e.originalEvent.detail>1||(0,r.default)(e.srcElement).hasClass("js-no-click"))}},{key:"handleResize",value:function(){if(this.calculateDisplayItemFlexOrder(),null!=this.$currentSlideout){var e=(0,r.default)('div[data-slideout="'+this.currentItemMachineName+'"]');this.$currentSlideout.css("order",Number(e.css("order"))+1),this.adjustArrow(e)}}},{key:"adjustArrow",value:function(e,t){var n=this.$(".js-slideout-arrow");t?n.addClass("animate"):(n.removeClass("animate"),n.show());var i=e.offset().left+e.outerWidth(!0)/2-(n.parent().offset().left+n.outerWidth()/2);n.css("left",i);var o=-n.outerHeight(!0);n.css("top",o)}},{key:"adjustDescriptionFader",value:function(){var e=this.$(".js-slideout-text");e.innerHeight()<e[0].scrollHeight&&e.addClass("fade")}},{key:"renderSlideoutFrame",value:function(){var e=this,t=this.template({});this.$el.html(t),this.$currentSlideout.append(this.$el),this.$(".js-slideout-arrow")[0].addEventListener("transitionend",function(){e.insertYoutubeVideo()})}},{key:"renderSlideoutContent",value:function(e){var t=new u.DesktopSlideoutContentView({model:this.model,displayItem:e,renderAdminLinks:this.renderAdminLinks});this.subview=t;var n=(0,r.default)(".js-desktop-slideout-content-container");n.empty(),n.append(t.$el)}},{key:"insertYoutubeVideo",value:function(){this.subview.displayItem.youtube_link&&this.subview.insertYoutubeVideo()}}]),t}();d.prototype.className="desktop-slideout-container",d.prototype.template=_.template(l.default)},2277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeMobileSlideout=t.initializeDesktopSlideout=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(2276),s=n(2270),l=n(853);t.initializeDesktopSlideout=function(e){(0,l.setupYoutubeAPI)();var t=e.displayItems,n=new r.default.Model({displayItems:t});return{model:n,view:new a.DesktopSlideoutContainerView({model:n,renderAdminLinks:e.renderAdminLinks,swfPath:e.jQueryPlayerPath,ipInChina:e.ipInChina})}},t.initializeMobileSlideout=function(e){(0,l.setupYoutubeAPI)();var t=e.displayItems,n=new r.default.Model({displayItems:t});return{model:n,view:new s.MobileSlideoutContainerView({model:n,swfPath:e.jQueryPlayerPath,ipInChina:e.ipInChina})}}},2278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreeGameCaptchaView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(9),l=n(61),u=n(4),c=n(11);(t.FreeGameCaptchaView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.View),o(t,[{key:"initialize",value:function(e){this.user=e.user,this.freeGameHumanName=e.freeGameHumanName}},{key:"onSubmit",value:function(e){e.preventDefault(),this.user.get("is_logged_in")?(this.captcha=(0,l.CreateCaptcha)("free-purchase-popup-captcha",this.submit.bind(this),{size:"invisible"}),this.captcha.execute()):(this.freeGameHumanName&&(0,c.getWindow)().set_flash((0,s.gtxt)("You must be logged into a Humble Bundle account to redeem your free copy of {product_name}").format({product_name:this.freeGameHumanName})),(0,u.setGotoAndRedirect)("/signup"))}},{key:"submit",value:function(e){this.$el.submit()}}]),t}()).prototype.events={"click .js-free-purchase-submit":"onSubmit"}},2279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeFreeGameCaptcha=void 0;var i=n(2278);t.initializeFreeGameCaptcha=function(e){var t=e.el,n=e.user,o=e.freeGameHumanName;return new i.FreeGameCaptchaView({el:t,user:n,freeGameHumanName:o})}},2280:function(e,t){e.exports='<div class="bonus-item-image">\n  <span class="<%- type %>-image">\n<% if (preview_image || front_page_art) { %>\n<% if (preview_image) { %>\n    <img data-src="<%- preview_image %>"\n        data-retina-src="<%- preview_image_retina %>"\n        alt="<%- human_name %>">\n<% } else { %>\n    <img data-src="<%- front_page_art %>"\n        data-retina-src="<%- front_page_art_retina %>"\n        alt="<%- human_name %>">\n<% } %>\n<% } else { %>\n    <img data-src="https://img.youtube.com/vi/<%- youtube_link %>/default.jpg"\n         data-retina-src="https://img.youtube.com/vi/<%- youtube_link %>/mqdefault.jpg"\n         alt="<%- human_name %>">\n<% } %>\n  </span>\n</div>\n<div class="bonus-item-content">\n  <div class="bonus-item-header">\n<%- short_heading %>\n  </div>\n  <div class="bonus-item-body">\n<% if (type === \'soundtrack\') { %>\n    Soundtrack\n<% } else { %>\n<%- human_name %>\n<% } %>\n  </div>\n<% if (callout) { %>\n  <div class="dd-callout subtitle"><%= callout %></div>\n<% } %>\n</div>\n'},2281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileBonusItemView=void 0;var i=a(n(0)),o=a(n(2280)),r=n(1213);function a(e){return e&&e.__esModule?e:{default:e}}var s=t.MobileBonusItemView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.BaseBonusItemView),t}();s.prototype.template=i.default.template(o.default),s.prototype.className="bonus-item u-lazy-load"},2282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileBonusItemCollectionView=void 0;var i=n(1214),o=n(2281);(t.MobileBonusItemCollectionView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseBonusItemCollectionView),t}()).prototype.childView=o.MobileBonusItemView},2283:function(e,t){e.exports='<div class="mbi-header">\n  <span class="dd-header-headline"><%- gtxt(\'Bonuses\') %></span>\n  <i class="mbi-caret hb hb-caret-right"></i>\n</div>\n<div class="mbi-drawer">\n  <div class="bonus-items-container u-constrain-width"></div>\n</div>\n'},2284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileBonusItemsView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(0)),r=l(n(2283)),a=n(1215),s=n(2282);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.MobileBonusItemsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.BaseBonusItemsView),i(t,[{key:"initialize",value:function(){this.expanded=!1}},{key:"onRender",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this),this.toggleDrawer()}},{key:"toggleDrawer",value:function(){this.expanded=!this.expanded,this.expanded?(this.$(".mbi-caret").removeClass("hb-caret-right"),this.$(".mbi-caret").addClass("hb-caret-down"),this.$(".mbi-drawer").show()):(this.$(".mbi-caret").removeClass("hb-caret-down"),this.$(".mbi-caret").addClass("hb-caret-right"),this.$(".mbi-drawer").hide())}}]),t}();u.prototype.collectionView=s.MobileBonusItemCollectionView,u.prototype.events={"click .mbi-header":"toggleDrawer"},u.prototype.template=o.default.template(r.default)},2285:function(e,t){e.exports='<div class="bonus-item-header">\n<%- short_heading %>\n</div>\n<div class="bonus-item-image">\n  <span class="<%- type %>-image">\n<% if (preview_image || front_page_art) { %>\n<% if (preview_image) { %>\n    <img data-src="<%- preview_image %>"\n        data-retina-src="<%- preview_image_retina %>"\n        alt="<%- human_name %>">\n<% } else { %>\n    <img data-src="<%- front_page_art %>"\n        data-retina-src="<%- front_page_art_retina %>"\n        alt="<%- human_name %>">\n<% } %>\n<% if (type === \'soundtrack\') { %>\n    <div class="js-hover-state-holder"></div>\n<% } %>\n<% } else { %>\n    <img data-src="https://img.youtube.com/vi/<%- youtube_link %>/default.jpg"\n         data-retina-src="https://img.youtube.com/vi/<%- youtube_link %>/mqdefault.jpg"\n         alt="<%- human_name %>">\n<% } %>\n  </span>\n</div>\n<div class="bonus-item-content">\n  <div class="bonus-item-body">\n<% if (render_admin_links) { %>\n    <span class="js-admin-edit" data-entity-kind="display_item" data-machine-name="<%- display_item_machine_name %>"></span>\n<% } %>\n<%- human_name %>\n  </div>\n<% if (callout) { %>\n  <div class="dd-callout subtitle"><%= callout %></div>\n<% } %>\n</div>\n'},2286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopBonusItemView=void 0;var i=a(n(0)),o=a(n(2285)),r=n(1213);function a(e){return e&&e.__esModule?e:{default:e}}var s=t.DesktopBonusItemView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.BaseBonusItemView),t}();s.prototype.className="desktop bonus-item u-lazy-load",s.prototype.template=i.default.template(o.default)},2287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopBonusItemCollectionView=void 0;var i=n(1214),o=n(2286);var r=t.DesktopBonusItemCollectionView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseBonusItemCollectionView),t}();r.prototype.childView=o.DesktopBonusItemView,r.prototype.className="desktop bonus-items-container u-constrain-width"},2288:function(e,t){e.exports='<span class="hover-black-overlay"></span>\n<% if (icon_class) { %>\n<div class="hover-icon-holder">\n  <i class="hb <%- icon_class %> hover-icon u-center"></i>\n</div>\n<% } %>\n'},2289:function(e,t){e.exports='<div class="desktop-bonus-container js-nav-row">\n  <div class="dd-header">\n    <h2 class="dd-header-headline"><%- gtxt(\'Bonuses\') %></h2>\n  </div>\n  <div class="bonus-items-container desktop u-constrain-width"></div>\n</div>\n'},2290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopBonusItemsView=void 0;var i=s(n(0)),o=s(n(2289)),r=n(1215),a=n(2287);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.DesktopBonusItemsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.BaseBonusItemsView),t}();l.prototype.collectionView=a.DesktopBonusItemCollectionView,l.prototype.template=i.default.template(o.default)},2291:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.initializeBonusItems=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(2290),s=n(2284),l=n(1148);t.initializeBonusItems=function(t,n,i,o){if(t&&t.length){var l=new r.default.Collection(t);l.each(function(e){return e.set("render_admin_links",o)}),l.each(function(e){e.set("short_heading",u(e.get("tier"),e.get("section_identifier"),n))});(i?new s.MobileBonusItemsView({collection:l,el:e(".js-mbi-bonus-container")}):new a.DesktopBonusItemsView({collection:l,el:e(".js-desktop-bonus-container")})).render()}};var u=function(e,t,n){for(var i in n){var o=n[i];if("bta"==e&&o.is_bta||"fixed"==e&&o.is_fixed&&o.identifier==t||"base"==e&&!o.is_bta&&!o.is_fixed)return(0,l.getNavbarTextByTier)(o)}}}).call(this,n(1))},2292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeBundlePage=void 0;var i=P(n(1)),o=P(n(0)),r=n(79),a=n(2291),s=n(1147),l=n(2279),u=n(1148),c=n(45),d=n(2277),h=n(2266),p=n(2265),f=n(2261),m=n(361),y=n(605),v=n(160),g=n(2259),_=n(1141),b=n(473),w=n(1142),O=n(2253),S=n(1206),C=n(25),E=n(4),k=n(491);function P(e){return e&&e.__esModule?e:{default:e}}t.initializeBundlePage=function(e,t,n){var P=t.is_logged_in,j=e.product_machine_name,T=e.product_human_name,R=new c.User(t),M=R.get("remind_me_products")||[],x=!!P&&o.default.includes(M,j),N=new S.RemindMeModel({productMachineName:j,productHumanName:T,isReminded:x,isLoggedIn:P});e.user_charity_id&&R.set("charity_id",e.user_charity_id);var A=new m.CharityList(e.charity_constants.featured_charities),I=n.is_mobile_browser;R.set("has_admin_access",R.get("has_admin_access")&&!I);var D=null;if(e.choose_your_own_charity.productHasCYOC){var L=R.get("charity_id"),U=L||e.choose_your_own_charity.featuredCharityId;if(U){var F=A.get(U);F&&(D={id:U,humanName:F.get("human_name"),logoUrl:F.get("logo_url")})}}var V=D?[D]:[];e.charity_row_modals.length&&e.charity_row_modals.forEach(function(e){var t=e.ppgf_info.logo_url||e.resolved_paths.front_page_art_imgix_retina,n={id:e.payee_secondary_id,humanName:e.human_name,logoUrl:t};V.push(n)}),(0,b.initLinkGen)("#partner-link-generator");var B=(0,i.default)(".hr-hero-tile");if(B.length){var H=new v.BundleTile(e.hero_tile),z=new g.HeroTileView({model:H,size:"hero",user:R,isOnBundlePage:!0,charities:V,smoothScroller:!0,remindMeModel:N,remindMeHours:e.remindme_hours});B.html(z.render().el)}((0,h.initializeStatistics)(e.purchases_per_content_event,I),e.choose_your_own_charity.productHasCYOC)&&new y.CharityCTAView({el:".js-cyoc-holder",featuredCharityId:e.choose_your_own_charity.featuredCharityId,constants:e.charity_constants,isModal:!0,user:R,charities:A}).render();var q=(0,i.default)(".fi-form"),Y=e.free_game_human_name;((0,l.initializeFreeGameCaptcha)({el:q,user:R,freeGameHumanName:Y}),(0,a.initializeBonusItems)(e.bonus_data,e.order_form.checkout_tiers,I,R.get("has_admin_access")),(0,s.initializeCharityRow)({charityData:e.charity_row_modals,constants:e.charity_constants,user:R}),(0,_.orderFormInit)({$el:(0,i.default)(".js-order-form-container"),models:e.order_form,streamlabsEnabled:e.streamlabs_enabled,charityConstants:e.charity_constants,allowedPaymentProcessors:e.allowed_payment_processors,softLockMessages:e.soft_region_lock,isEUCountry:e.isEUCountry,upsells:e.upsells,bundleImage:e.hero_tile.tile_image,user:R,charities:A,currency:e.currency}),(0,u.loadImages)(),e.soft_region_lock.page_top_warning)&&new f.PageTopWarningView({el:(0,i.default)("#page-top-messages"),warning:e.soft_region_lock.page_top_warning}).render();if((0,k.registerGoogleAnalytics)(e.product_machine_name),(0,C.logFacebookEvent)("track","ViewContent",{content_ids:[e.product_machine_name],content_type:"product"}),(0,p.initializeStickyNavbar)({tiers:e.order_form.checkout_tiers,hasBonusContent:e.bonus_data.length>0,hasCharities:e.has_charities,productHumanName:e.product_human_name,countdownTimerOptions:e.countdown_timer_vars,remindMeModel:N}),(0,O.showModalIfRemindMeParamExists)(N),N.on(w.REDIRECT_TO_LOGIN,function(){(0,E.setGotoAndRedirect)("/login")}),I)(0,d.initializeMobileSlideout)({displayItems:e.slideout_data.display_items,jQueryPlayerPath:e.slideout_data.soundtrack_player_path,ipInChina:e.ipInChina});else if((0,d.initializeDesktopSlideout)({displayItems:e.slideout_data.display_items,jQueryPlayerPath:e.slideout_data.soundtrack_player_path,renderAdminLinks:R.get("has_admin_access"),ipInChina:e.ipInChina}),R.get("has_admin_access")){var $=e.product_machine_name;(0,r.renderMenu)({productMachineName:$}),(0,r.renderTinyLinks)()}(0,i.default)(".js-bundle-info-text-expand-trigger").on("click",function(e){(0,i.default)(e.currentTarget).hide(),(0,i.default)(".bundle-info-text").addClass("expanded")})}},2293:function(e,t,n){"use strict";var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(2292),s=n(598),l=n(20);(0,r.default)(document).ready(function(){var e=(0,l.extractWebpackJsonData)("#webpack-bundle-data");e.bundleVars.isEUCountry=e.isEUCountry,e.bundleVars.ipInChina=e.ipInChina,(0,a.initializeBundlePage)(e.bundleVars,e.userOptions,e.appConfig),(0,s.twitchStreamInit)("twitch-player",e.twitchInfo)})},2294:function(e,t,n){n(16),e.exports=n(2293)},23:function(e,t){e.exports=moment},24:function(e,t,n){"use strict";n.r(t);var i,o,r,a,s=n(1);
/**
 * @license In-Field Label jQuery Plugin
 * http://fuelyourcoding.com/scripts/infield.html
 * http://github.com/streetpc/jquery-infieldlabels
 *
 * Copyright (c) 2009 Doug Neiner, Adrien Lavoillotte
 * Dual licensed under the MIT and GPL licenses, see:
 * http://docs.jquery.com/License
 *
 * @version 0.2.1
 */
i=n.n(s).a,o=/^(?:text|password|search|number|tel|url|email|date(?:time(?:-local)?)?|time|month|week)?$/,(a={})[(r=function(e,t){return e<<3|t})(1,0)]=function(e){e.fadeTo(1)},a[r(2,0)]=function(e){e.$label.css({opacity:1}).show(),e.emptied(!0)},a[r(0,1)]=function(e){e.fadeTo(e.options.fadeOpacity)},a[r(2,1)]=function(e){e.$label.css({opacity:e.options.fadeOpacity}).show(),e.emptied(!0)},a[r(0,2)]=function(e){e.$label.hide(),e.emptied(!1)},a[r(1,2)]=a[r(0,2)],i.InFieldLabels=function(e,t,n){var o=this;o.$label=i(e),o.label=e,o.$field=i(t),o.field=t,o.$label.data("InFieldLabels",o),o.state=0,o.init=function(){o.options=i.extend({},i.InFieldLabels.defaultOptions,n),o.options.labelClass&&o.$label.addClass(o.options.labelClass),o.options.disableAutocomplete&&o.$field.attr("autocomplete","off"),o.$field.bind("blur focus change keyup.infield cut",o.updateState).bind("paste",function(e){o.setState(2)}),o.updateState()},o.emptied=function(e){o.options.emptyWatch||(e?o.$field.bind("keyup.infield",o.updateState):o.$field.unbind("keyup.infield",o.updateState))},o.fadeTo=function(e){o.options.fadeDuration?o.$label.stop().animate({opacity:e},o.options.fadeDuration):o.$label.css({opacity:e})},o.updateState=function(e,t){var n=2;if(""===o.field.value){var i=e&&e.type;n=(i="focus"===i||"keyup"===i||"blur"!==i&&"change"!==i&&o.$field.is(":focus"))?1:0}o.setState(n,t)},o.setState=function(e,t){if(e!==o.state){var n=a[r(o.state,e)];"function"==typeof n?(n(o),o.state=e):t||o.updateState(null,!0)}},o.init()},i.InFieldLabels.defaultOptions={emptyWatch:!0,disableAutocomplete:!0,fadeOpacity:.5,fadeDuration:300,labelClass:"in-field"},i.fn.inFieldLabels=function(e){return this.each(function(){if("LABEL"===this.tagName){var t,n=this.getAttribute("for")||this.htmlFor,r=!0;n&&(t=document.getElementById(n))&&("INPUT"===t.tagName?r=o.test(t.type.toLowerCase()):"TEXTAREA"!==t.tagName&&(r=!1),(r=r&&!t.getAttribute("placeholder"))&&new i.InFieldLabels(this,t,e))}})}},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendEcommercePurchaseEvent=t.getSuccintUserSubscriptionState=t.logWeChatEvent=t.logBaiduPaidEvent=t.logBaiduEvent=t.logProgrammaticEvent=t.logFacebookEvent=t.logPageViewEvent=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(8),s=n(4),l=n(11);t.logPageViewEvent=function(e){if(e){var t="/api/v1/analytics/"+e;return navigator.sendBeacon(t)}},t.logFacebookEvent=function(e,t,n){var i,o,u,c=(0,s.randomString)(16);r.default.ajax({method:"POST",url:"/api/v1/fbana",contentType:"application/json",dataType:"json",data:JSON.stringify({event_id:c,event_name:t,event_time:Math.floor(Date.now()/1e3),custom_data:n||{}}),headers:(i={},o=a.csrfHeaderKey,u=(0,a.getCsrf)(),o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i)});var d=(0,l.getWindow)().fbq;d&&d(e,t,n,{eventID:c})},t.logProgrammaticEvent=function(e,t,n){var i=(0,l.getWindow)().py;i&&i(e,t,n)},t.logBaiduEvent=function(e,t){var n=(0,l.getWindow)()._hmt;n&&n.push([e,t])},t.logBaiduPaidEvent=function(e,t){var n=(0,l.getWindow)()._agl;n&&n.push([e,t])},t.logWeChatEvent=function(e,t,n){var i=(0,l.getWindow)().gdt;i&&i(e,t,n)},t.getSuccintUserSubscriptionState=function(){var e=window.models.userSubscriptionState;return e.monthlyOwnsAnyContent?e.willReceiveFutureMonths?e.isPaused?"paused":e.failedBillingMonths>0?"billing-error":"active":"unsubscribed":"never-subscribed"},t.sendEcommercePurchaseEvent=function(e){var t=r.default.Deferred();return e?(r.default.post("/analytics",{id:e},function(e){if(e.track||t.resolve(!1),e.ga){window._hbga("ecommerce:addTransaction",e.ga.transaction);var n=!0,i=!1,o=void 0;try{for(var r,a=e.ga.items[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;window._hbga("ecommerce:addItem",s)}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}window._hbga("ecommerce:send")}if(e.heap){var l=!0,u=!1,c=void 0;try{for(var d,h=e.heap[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;window.heap.track("Purchase",p)}}catch(e){u=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}t.resolve(!0)},"json").fail(function(){t.reject(!1)}),t.promise()):t.resolve(!1)}},27:function(e,t,n){var i,o,r;(function(){var a=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=[n(0),n(2),t],void 0===(r="function"==typeof(i=function(e,t,n){return n=function(n){function i(){this.triggerCancel=a(this.triggerCancel,this),this.triggerSubmit=a(this.triggerSubmit,this),this.triggerView=a(this.triggerView,this),this.clickOutsideElement=a(this.clickOutsideElement,this),this.clickOutside=a(this.clickOutside,this),this.checkKey=a(this.checkKey,this),this.rendererCompleted=a(this.rendererCompleted,this),this.args=Array.prototype.slice.apply(arguments),t.View.prototype.constructor.apply(this,this.args),this.setUIElements()}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(i,t.View),i.prototype.prefix="bbm",i.prototype.animate=!0,i.prototype.keyControl=!0,i.prototype.showViewOnRender=!0,i.prototype.render=function(n){var i,o;return i=this.serializeData(),n&&!e.isEmpty(n)||(n=0),this.$el.addClass(this.prefix+"-wrapper"),this.modalEl=t.$("<div />").addClass(this.prefix+"-modal"),this.template&&this.modalEl.html(this.buildTemplate(this.template,i)),this.$el.html(this.modalEl),this.viewContainer?(this.viewContainerEl=this.modalEl.find(this.viewContainer),this.viewContainerEl.addClass(this.prefix+"-modal__views")):this.viewContainerEl=this.modalEl,t.$(":focus").blur(),(null!=(o=this.views)?o.length:void 0)>0&&this.showViewOnRender&&this.openAt(n),"function"==typeof this.onRender&&this.onRender(),this.delegateModalEvents(),this.$el.fadeIn&&this.animate?(this.modalEl.css({opacity:0}),this.$el.fadeIn({duration:100,complete:this.rendererCompleted})):this.rendererCompleted(),this},i.prototype.rendererCompleted=function(){var e;return this.keyControl&&(t.$("body").on("keyup.bbm",this.checkKey),this.$el.on("mouseup.bbm",this.clickOutsideElement),this.$el.on("click.bbm",this.clickOutside)),this.modalEl.css({opacity:1}).addClass(this.prefix+"-modal--open"),"function"==typeof this.onShow&&this.onShow(),null!=(e=this.currentView)&&"function"==typeof e.onShow?e.onShow():void 0},i.prototype.setUIElements=function(){var t;if(this.template=this.getOption("template"),this.views=this.getOption("views"),null!=(t=this.views)&&(t.length=e.size(this.views)),this.viewContainer=this.getOption("viewContainer"),this.animate=this.getOption("animate"),e.isUndefined(this.template)&&e.isUndefined(this.views))throw new Error("No template or views defined for Backbone.Modal");if(this.template&&this.views&&e.isUndefined(this.viewContainer))throw new Error("No viewContainer defined for Backbone.Modal")},i.prototype.getOption=function(e){if(e)return this.options&&l.call(this.options,e)>=0&&null!=this.options[e]?this.options[e]:this[e]},i.prototype.serializeData=function(){var t;return t={},this.model&&(t=e.extend(t,this.model.toJSON())),this.collection&&(t=e.extend(t,{items:this.collection.toJSON()})),t},i.prototype.delegateModalEvents=function(){var t,n,i,o,r,a,s;for(n in this.undelegateModalEvents(),this.active=!0,t=this.getOption("cancelEl"),(r=this.getOption("submitEl"))&&this.$el.on("click",r,this.triggerSubmit),t&&this.$el.on("click",t,this.triggerCancel),s=[],this.views)e.isString(n)&&"length"!==n?(a=(i=n.match(/^(\S+)\s*(.*)$/))[1],o=i[2],s.push(this.$el.on(a,o,this.views[n],this.triggerView))):s.push(void 0);return s},i.prototype.undelegateModalEvents=function(){var t,n,i,o,r,a,s;for(n in this.active=!1,t=this.getOption("cancelEl"),(r=this.getOption("submitEl"))&&this.$el.off("click",r,this.triggerSubmit),t&&this.$el.off("click",t,this.triggerCancel),s=[],this.views)e.isString(n)&&"length"!==n?(a=(i=n.match(/^(\S+)\s*(.*)$/))[1],o=i[2],s.push(this.$el.off(a,o,this.views[n],this.triggerView))):s.push(void 0);return s},i.prototype.checkKey=function(e){if(this.active)switch(e.keyCode){case 27:return this.triggerCancel(e);case 13:return this.triggerSubmit(e)}},i.prototype.clickOutside=function(e){var t;if((null!=(t=this.outsideElement)?t.hasClass(this.prefix+"-wrapper"):void 0)&&this.active)return this.triggerCancel()},i.prototype.clickOutsideElement=function(e){return this.outsideElement=t.$(e.target)},i.prototype.buildTemplate=function(n,i){return("function"==typeof n?n:e.template(t.$(n).html()))(i)},i.prototype.buildView=function(n,i){var o;if(n)return i&&e.isFunction(i)&&(i=i()),e.isFunction(n)?(o=new n(i||this.args[0]))instanceof t.View?{el:o.render().$el,view:o}:{el:n(i||this.args[0])}:{view:n,el:n.$el}},i.prototype.triggerView=function(t){var n,i,o,r,a,s,l;if(null!=t&&"function"==typeof t.preventDefault&&t.preventDefault(),r=t.data,i=this.buildView(r.view,r.viewOptions),this.currentView&&(this.previousView=this.currentView,!(null!=(l=r.openOptions)?l.skipSubmit:void 0))){if(!1===("function"==typeof(a=this.previousView).beforeSubmit?a.beforeSubmit(t):void 0))return;"function"==typeof(s=this.previousView).submit&&s.submit()}for(o in this.currentView=i.view||i.el,n=0,this.views)r.view===this.views[o].view&&(this.currentIndex=n),n++;return r.onActive&&(e.isFunction(r.onActive)?r.onActive(this):e.isString(r.onActive)&&this[r.onActive].call(this,r)),this.shouldAnimate?this.animateToView(i.el):(this.shouldAnimate=!0,this.$(this.viewContainerEl).html(i.el))},i.prototype.animateToView=function(e){var n,i,o,r,a,s,l,u;return r={position:"relative",top:-9999,left:-9999},(a=t.$("<tester/>").css(r)).html(this.$el.clone().css(r)),0!==t.$("tester").length?t.$("tester").replaceWith(a):t.$("body").append(a),(n=this.viewContainer?a.find(this.viewContainer):a.find("."+this.prefix+"-modal")).removeAttr("style"),o=n.outerHeight(),n.html(e),o===(i=n.outerHeight())?(this.$(this.viewContainerEl).html(e),"function"==typeof(s=this.currentView).onShow&&s.onShow(),null!=(l=this.previousView)&&"function"==typeof l.destroy?l.destroy():void 0):this.animate?(this.$(this.viewContainerEl).css({opacity:0}),this.$(this.viewContainerEl).animate({height:i},100,(u=this,function(){var t,n;return u.$(u.viewContainerEl).css({opacity:1}).removeAttr("style"),u.$(u.viewContainerEl).html(e),"function"==typeof(t=u.currentView).onShow&&t.onShow(),null!=(n=u.previousView)&&"function"==typeof n.destroy?n.destroy():void 0}))):this.$(this.viewContainerEl).css({height:i}).html(e)},i.prototype.triggerSubmit=function(e){var n,i;if(null!=e&&e.preventDefault(),!t.$(e.target).is("textarea")&&!(this.beforeSubmit&&!1===this.beforeSubmit(e)||this.currentView&&this.currentView.beforeSubmit&&!1===this.currentView.beforeSubmit(e))){if(!this.submit&&!(null!=(n=this.currentView)?n.submit:void 0)&&!this.getOption("submitEl"))return this.triggerCancel();if(null!=(i=this.currentView)&&"function"==typeof i.submit&&i.submit(),"function"==typeof this.submit&&this.submit(),!this.handleAjax)return this.regionEnabled?this.trigger("modal:destroy"):this.destroy()}},i.prototype.triggerCancel=function(e){if(null!=e&&e.preventDefault(),!this.beforeCancel||!1!==this.beforeCancel())return"function"==typeof this.cancel&&this.cancel(),this.regionEnabled?this.trigger("modal:destroy"):this.destroy()},i.prototype.destroy=function(){var n,i;return t.$("body").off("keyup.bbm",this.checkKey),this.$el.off("mouseup.bbm",this.clickOutsideElement),this.$el.off("click.bbm",this.clickOutside),t.$("tester").remove(),"function"==typeof this.onDestroy&&this.onDestroy(),this.shouldAnimate=!1,this.modalEl.addClass(this.prefix+"-modal--destroy"),i=this,n=function(){var e;return null!=(e=i.currentView)&&"function"==typeof e.remove&&e.remove(),i.remove()},this.$el.fadeOut&&this.animate?(this.$el.fadeOut({duration:200}),e.delay(function(){return n()},200)):n()},i.prototype.openAt=function(t){var n,i,o,r,a;for(r in e.isNumber(t)?n=t:e.isNumber(t._index)&&(n=t._index),o=0,this.views)if("length"!==r)if(e.isNumber(n))o===n&&(a=this.views[r]),o++;else if(e.isObject(t))for(i in this.views[r])t[i]===this.views[r][i]&&(a=this.views[r]);return a&&(this.currentIndex=e.indexOf(this.views,a),this.triggerView({data:e.extend(a,{openOptions:t})})),this},i.prototype.next=function(t){if(null==t&&(t={}),this.currentIndex+1<this.views.length)return this.openAt(e.extend(t,{_index:this.currentIndex+1}))},i.prototype.previous=function(t){if(null==t&&(t={}),this.currentIndex-1<this.views.length-1)return this.openAt(e.extend(t,{_index:this.currentIndex-1}))},i}(),t.Modal=n,t.Modal})?i.apply(t,o):i)||(e.exports=r)}).call(this)},28:function(e,t,n){var i,o,r={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,u=0,c=[],d=n(35);function h(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function f(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function y(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,i,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var a=u++;n=l||(l=y(t)),i=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),i=function(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=d(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&h(p(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModal=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=n(0),s=(i=a)&&i.__esModule?i:{default:i},l=n(17),u=n(4);t.BaseModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.HumbleModal),o(t,[{key:"initialize",value:function(e){this.options=s.default.cloneDeep(e)||{}}},{key:"onDestroy",value:function(){var e=this.$(this.cancelEl).data("goto");e&&(0,u.redirectInDomain)(e),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDestroy",this).call(this)}},{key:"serializeData",value:function(){var e=s.default.extend({},this.options&&this.options.attributes);return s.default.extend(e,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).call(this))}}]),t}()},3:function(e,t){e.exports=Marionette},30:function(e,t,n){var i,o,r;o=[t],void 0===(r="function"==typeof(i=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var i={get passive(){n=!0}};window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),r=[],a=!1,s=-1,l=void 0,u=void 0,c=function(e){return r.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},d=function(e){var t=e||window.event;return!!c(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},h=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==l&&(document.body.style.overflow=l,l=void 0)})};e.disableBodyScroll=function(e,i){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!r.some(function(t){return t.targetElement===e})){var h={targetElement:e,options:i||{}};r=[].concat(t(r),[h]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,i,o,r;1===t.targetTouches.length&&(i=e,r=(n=t).targetTouches[0].clientY-s,!c(n.target)&&(i&&0===i.scrollTop&&0<r?d(n):(o=i)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&r<0?d(n):n.stopPropagation()))},a||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),a=!0)}}else{f=i,setTimeout(function(){if(void 0===u){var e=!!f&&!0===f.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(u=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===l&&(l=document.body.style.overflow,document.body.style.overflow="hidden")});var p={targetElement:e,options:i||{}};r=[].concat(t(r),[p])}var f},e.clearAllBodyScrollLocks=function(){o?(r.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),a&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1),r=[],s=-1):(h(),r=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,r=r.filter(function(t){return t.targetElement!==e}),a&&0===r.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1)}else 1===r.length&&r[0].targetElement===e?(h(),r=[]):r=r.filter(function(t){return t.targetElement!==e})}})?i.apply(t,o):i)||(e.exports=r)},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBSCRIPTION_CONSTANTS={CHOICE_PLANS:["monthly_v2_basic","monthly_v2_basic_annual","monthly_v2_lite","monthly_v2_lite_annual","monthly_v2_premium","monthly_v2_premium_annual"],GIFT_REGION_LOCKED_COUNTRIES:["CN","RU"],PROMO_INELIGIBLE_TOO_SOON:"promo-ineligible-too-soon",NO_DISCOUNT_WRONG_CURRENCY:"wrong_currency",CHOICE_STORE_DISCOUNT_COUPON:"humble_monthly_flexible_discount",DURATION_ANNUAL:"annual",CHOICE_TIERS_ORDER:["lite","basic","premium","premiumv1"],PROMO_INELIGIBLE_RESTRICTED_PRODUCT:"promo-ineligible-restricted-product",TIERS_HUMAN_NAME_DICT:{lite:"Lite",premium:"Premium",premiumv1:"Classic",basic:"Basic"},HUMBLE_CHOICE_CREDIT_MAX:24,PROMO_INELIGIBLE_MAX_CREDITS:"promo-ineligible-max-credits",RUSSIAN_GIFT_REDEEM_COUNTRIES:["AM","AZ","BY","KG","KZ","MD","RU","TJ","TM","UA","UZ"],CLASSIC_PLANS:["monthly_basic","monthly_three_month","monthly_six_month","monthly_annual"],ChoicePerksStatus:{ACTIVE:"active",INACTIVE_FAILED_PAYMENT:"inactive-failed-payment",INACTIVE:"inactive",INACTIVE_NO_RECENT_PURCHASES:"inactive-no-recent-purchases",INACTIVE_PAUSED:"inactive-paused"},HUMBLE_MONTHLY_BASE_PRICE_BY_CURRENCY:{USD:"12"},HUMBLE_CHOICE_FLEXIBLE_COUPON_PERCENT:10,DURATION_MONTHLY:"monthly",TIER_AND_DURATION_TO_PLAN_INCLUDING_CLASSIC:{lite:{monthly:"monthly_v2_lite",annual:"monthly_v2_lite_annual"},premium:{monthly:"monthly_v2_premium",annual:"monthly_v2_premium_annual"},premiumv1:{monthly:"monthly_basic","3-month":"monthly_three_month",annual:"monthly_annual","6-month":"monthly_six_month"},basic:{monthly:"monthly_v2_basic",annual:"monthly_v2_basic_annual"}},CHOICE_STORE_DISCOUNT_SHARED_COUPON:"humble_monthly_flexible_discount_shared",PLAN_OVERRIDE_OPTIONS:["monthly_none","monthly_basic","monthly_three_month","monthly_six_month","monthly_annual","monthly_v2_basic","monthly_v2_basic_annual","monthly_v2_lite","monthly_v2_lite_annual","monthly_v2_premium","monthly_v2_premium_annual"],CHOICE_TIERS:{LITE:"lite",PREMIUM_GRANDFATHER:"premiumv1",PREMIUM:"premium",BASIC:"basic"}}},35:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},356:function(e,t,n){(function(e){!function(e){e.fn.typeWatch=function(t){var n=e.extend({wait:750,callback:function(){},highlight:!0,captureLength:2,inputTypes:["TEXT","TEXTAREA","PASSWORD","TEL","SEARCH","URL","EMAIL","DATETIME","DATE","MONTH","WEEK","TIME","DATETIME-LOCAL","NUMBER","RANGE"]},t);function i(t){var i=t.type.toUpperCase();if(e.inArray(i,n.inputTypes)>=0){var o={timer:null,text:e(t).val().toUpperCase(),cb:n.callback,el:t,wait:n.wait};n.highlight&&e(t).focus(function(){this.select()});e(t).keydown(function(t){var i=o.wait,r=!1,a=this.type.toUpperCase();13==t.keyCode&&"TEXTAREA"!=a&&e.inArray(a,n.inputTypes)>=0&&(i=1,r=!0);clearTimeout(o.timer),o.timer=setTimeout(function(){!function(t,i){var o=e(t.el).val();(o.length>=n.captureLength&&o.toUpperCase()!=t.text||i&&o.length>=n.captureLength)&&(t.text=o.toUpperCase(),t.cb.call(t.el,o))}(o,r)},i)})}}return this.each(function(){i(this)})}}(e)}).call(this,n(1))},357:function(e,t,n){(function(e){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,i=n._mouseInit,o=n._mouseDestroy;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,r(e,"mouseover"),r(e,"mousemove"),r(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,r(e,"mousemove"))},n._touchEnd=function(e){t&&(r(e,"mouseup"),r(e,"mouseout"),this._touchMoved||r(e,"click"),t=!1)},n._mouseInit=function(){this.element.bind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),i.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),o.call(this)}}function r(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}}(e)}).call(this,n(1))},358:function(e,t,n){var i=n(170);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(28)(i,o);i.locals&&(e.exports=i.locals)},359:function(e,t,n){var i,o,r;
/*!
 * jQuery UI Slider 1.12.0
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */o=[n(1),n(172),n(154),n(36),n(106)],void 0===(r="function"==typeof(i=function(e){return e.widget("ui.slider",e.ui.mouse,{version:"1.12.0",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,o=this.element.find(".ui-slider-handle"),r=[];for(n=i.values&&i.values.length||1,o.length>n&&(o.slice(n).remove(),o=o.slice(0,n)),t=o.length;t<n;t++)r.push("<span tabindex='0'></span>");this.handles=o.add(e(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options;t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=e("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,r,a,s,l,u=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));(o>n||o===n&&(t===u._lastChangedValue||u.values(t)===c.min))&&(o=n,r=e(this),a=t)}),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),s=r.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/t)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_uiHash:function(e,t,n){var i={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==t?t:this.values(e),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var i,o=this.value(),r=this.values();this._hasMultipleValues()&&(i=this.values(t?0:1),o=this.values(t),2===this.options.values.length&&!0===this.options.range&&(n=0===t?Math.min(i,n):Math.max(i,n)),r[t]=n),n!==o&&!1!==this._trigger("slide",e,this._uiHash(t,n,r))&&(this._hasMultipleValues()?this.values(t,n):this.value(n))},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",e,this._uiHash(t)))},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch("range"===t&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),this._super(t,n),t){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=o-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(e){this._super(e),this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,i=Math.round((e-t)/n)*n;(e=i+t)>this.options.max&&(e-=n),this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""}),"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,i,o,r,a=this.options.range,s=this.options,l=this,u=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[u?"animate":"css"](c,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&l.range[u?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?(i-o)/(r-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-n+"%"},s.animate),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(t){var n,i,o,r=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(e(t.target),null,"ui-state-active"),!1===this._start(t,r)))return}switch(o=this.options.step,n=i=this._hasMultipleValues()?this.values(r):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-o)}this._slide(t,r,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),this._removeClass(e(t.target),null,"ui-state-active"))}}})})?i.apply(t,o):i)||(e.exports=r)},36:function(e,t,n){var i,o,r;o=[n(1)],void 0===(r="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.0"})?i.apply(t,o):i)||(e.exports=r)},360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.charityPubSub=t.DEFAULT_CHARITY_IMAGE=t.ORDER_FORM_SEARCH_PAGE_SIZE=t.BODY_SEARCH_PAGE_SIZE=void 0;var i=n(398);t.BODY_SEARCH_PAGE_SIZE=14,t.ORDER_FORM_SEARCH_PAGE_SIZE=6,t.DEFAULT_CHARITY_IMAGE="https://humblebundle-a.akamaihd.net/misc/files/hashed/c046248875f8bbb55008e8d80911cda882721762.gif",t.charityPubSub=new i.PubSub},361:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityList=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(482);(t.CharityList=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Collection),o(t,[{key:"comparator",value:function(e){return e.get("human_name")}}]),t}()).prototype.model=s.Charity},365:function(e,t){e.exports='<h1><%- gtxt(\'Please Wait...\') %></h1>\n<p class="description">\n<%- spinnerText %>\n</p>\n<div class="pay-early-spinner humble-spinner"></div>\n'},366:function(e,t){e.exports='<a class="js-close-modal close-modal" href="javascript:void(0);">\n  <i class="hb hb-times"></i>\n</a>\n<div class="js-content"></div>\n'},367:function(e,t){e.exports='<h1><%- gtxt(\'Error\') %></h1>\n<div class="description">\n  <p><%- gtxt(\'There was a problem processing your payment:\') %></p>\n  <p class="error"><%- reason %></p>\n</div>\n<div class="buttons-container">\n  <button class="button-v2 rectangular-button green js-goto-checkout"><%- gtxt(\'Go to checkout\') %></button>\n</div>\n'},368:function(e,t){e.exports="<h1><%- gtxt('Unlock your choices') %></h1>\n<div class=\"description\">\n<% if (userSubscriptionState.creditsRemaining) { %>\n  <p>\n    <%- ngtxt('Your next month has already been paid.', 'Your next {credits_remaining} months have already been paid.', userSubscriptionState.creditsRemaining).format({credits_remaining: localizeNumber(userSubscriptionState.creditsRemaining)}) %>\n  </p>\n<% } else { %>\n  <p>\n    <%- gtxt('You can pay early to choose your games and start playing now.') %>\n  </p>\n\n  <table class=\"pay-early-breakdown\">\n    <tbody>\n      <tr>\n        <td><%- userSubscriptionPlan['human_name'] %></td>\n        <td><%- localizeMoney(basePlanPrice, MoneyFormatConstants.SHOW_ZERO_CENTS) %></td>\n      </tr>\n      <% if (activeCoupon && discount) { %>\n      <tr>\n        <td><%- activeCoupon['human_name'] %></td>\n        <td>- <%- localizeMoney(discount, MoneyFormatConstants.SHOW_ZERO_CENTS) %></td>\n      </tr>\n      <% } if (tax) { %>\n      <tr>\n        <td>Tax</td>\n        <td>+ <%- localizeMoney(tax, MoneyFormatConstants.SHOW_ZERO_CENTS) %></td>\n      </tr>\n      <% } if (tax || (activeCoupon && discount)) { %>\n      <tr>\n        <td><%- gtxt('Total') %></td>\n        <td><%- localizeMoney(total, MoneyFormatConstants.SHOW_ZERO_CENTS) %></td>\n      </tr>\n      <% } %>\n    </tbody>\n  </table>\n<% } %>\n\n<% if (userSubscriptionState.isPaused) { %>\n  <p><%- gtxt('This will automatically resume your paused subscription.') %></p>\n<% } %>\n\n<% if (activeCoupon && activeCoupon['discount_amount'] === 0 && activeCoupon['no_discount_reason'] === NO_DISCOUNT_WRONG_CURRENCY) { %>\n  <p class=\"error js-no-discount-warning\">\n    <%- gtxt('You have an active coupon (\"{coupon_human_name}\") that is not valid for your current currency. This may be the result of a recent change to your location.').format({coupon_human_name: activeCoupon['human_name']}) %>\n    <a href=\"https://support.humblebundle.com/hc/articles/360046798993#region_coupons\" target=\"_blank\">\n      <%- gtxt('Learn more') %>\n    </a>\n  </p>\n<% } %>\n\n</div>\n<div class=\"buttons-container\">\n  <button class=\"button-v2 rectangular-button green js-modal-submit\">\n    <% if (userSubscriptionState.isPaused) { %>\n      <% if (userSubscriptionState.creditsRemaining) { %>\n        <%- gtxt('Unpause and get now') %>\n      <% } else { %>\n        <%- gtxt('Unpause and pay now') %>\n      <% } %>\n    <% } else { %>\n      <% if (userSubscriptionState.creditsRemaining) { %>\n        <%- gtxt('Get now') %>\n      <% } else { %>\n        <%- gtxt('Pay now') %>\n      <% } %>\n    <% } %>\n  </button>\n</div>\n"},369:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayEarlyModel=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i};t.PayEarlyModel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{activeCoupon:null}}}]),t}()},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DateTimeFormatConstants={SHORT_MONTH_WITH_HOUR_MINUTE_SECOND:"medium",FULL_MONTH_WITH_DAY_OF_WEEK_AND_TIMEZONE:"full",FULL_MONTH_WITH_SHORT_TIMEZONE:"long"}},370:function(e,t,n){var i,o,r;o=[],i=function(){"use strict";if(!window||!document)return{};var e=function(e,t,n){var i;t=t||999,n||0===n||(n=9);var o=document.documentElement,r=function(){return e?e.scrollTop:window.scrollY||o.scrollTop},a=function(){return e?Math.min(e.offsetHeight,window.innerHeight):window.innerHeight||o.clientHeight},s=function(t){return e?t.offsetTop-e.offsetTop:t.getBoundingClientRect().top+r()-o.offsetTop},l=function(){clearTimeout(i),i=0},u=function(n,s,u){if(l(),"getComputedStyle"in window&&"smooth"===window.getComputedStyle(e||document.body)["scroll-behavior"])(e||window).scrollTo(0,n),u&&u();else{var c=r(),d=Math.max(n,0)-c;s=s||Math.min(Math.abs(d),t);var h=(new Date).getTime();!function t(){i=setTimeout(function(){var n=Math.min(((new Date).getTime()-h)/s,1),i=Math.max(Math.floor(c+d*(n<.5?2*n*n:n*(4-2*n)-1)),0);e?e.scrollTop=i:window.scrollTo(0,i),n<1&&a()+i<(e||o).scrollHeight?t():(setTimeout(l,99),u&&u())},9)}()}},c=function(e,t,i){u(s(e)-n,t,i)};return{setup:function(e,i){e&&(t=e),(0===i||i)&&(n=i)},to:c,toY:u,intoView:function(e,t,i){var o=e.getBoundingClientRect().height+2*n,l=a(),d=s(e),h=d+o-n,p=r();d-p<n||o>l?c(e,t,i):p+l-h<0?u(h-l,t,i):i&&i()},center:function(e,t,n,i){u(Math.max(s(e)-a()/2+(n||e.getBoundingClientRect().height/2),0),t,i)},stop:l,moving:function(){return!!i}}},t=e();if("addEventListener"in window&&"smooth"!==document.body.style.scrollBehavior&&!window.noZensmooth){var n=function(e){try{history.replaceState({},"",window.location.href.split("#")[0]+e)}catch(e){}};window.addEventListener("click",function(e){for(var i=e.target;i&&"A"!==i.tagName;)i=i.parentNode;if(!(!i||1!==e.which||e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)){var o=i.getAttribute("href")||"";if(0===o.indexOf("#"))if("#"===o)e.preventDefault(),t.toY(0),n("");else{var r=i.hash.substring(1),a=document.getElementById(r);a&&(e.preventDefault(),t.to(a),n("#"+r))}}},!1)}return{createScroller:e,setup:t.setup,to:t.to,toY:t.toY,intoView:t.intoView,center:t.center,stop:t.stop,moving:t.moving}}(),void 0===(r="function"==typeof i?i.apply(t,o):i)||(e.exports=r)},377:function(e,t,n){(function(t,n){var i={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(e){e.domains=e.domains||i.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||i.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||i.sift3Distance;var t=i.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);t?e.suggested&&e.suggested(t):e.empty&&e.empty()},suggest:function(e,t,n,i){e=e.toLowerCase();var o=this.splitEmail(e),r=this.findClosestDomain(o.domain,t,i);if(r){if(r!=o.domain)return{address:o.address,domain:r,full:o.address+"@"+r}}else{var a=this.findClosestDomain(o.topLevelDomain,n);if(o.domain&&a&&a!=o.topLevelDomain){var s=o.domain;return r=s.substring(0,s.lastIndexOf(o.topLevelDomain))+a,{address:o.address,domain:r,full:o.address+"@"+r}}}return!1},findClosestDomain:function(e,t,n){var i,o=99,r=null;if(!e||!t)return!1;n||(n=this.sift3Distance);for(var a=0;a<t.length;a++){if(e===t[a])return e;(i=n(e,t[a]))<o&&(o=i,r=t[a])}return o<=this.threshold&&null!==r&&r},sift3Distance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var n=0,i=0,o=0,r=0;n+i<e.length&&n+o<t.length;){if(e.charAt(n+i)==t.charAt(n+o))r++;else{i=0,o=0;for(var a=0;a<5;a++){if(n+a<e.length&&e.charAt(n+a)==t.charAt(n)){i=a;break}if(n+a<t.length&&e.charAt(n)==t.charAt(n+a)){o=a;break}}}n++}return(e.length+t.length)/2-r},splitEmail:function(e){var t=e.split("@");if(t.length<2)return!1;for(var n=0;n<t.length;n++)if(""===t[n])return!1;var i=t.pop(),o=i.split("."),r="";if(0==o.length)return!1;if(1==o.length)r=o[0];else{for(n=1;n<o.length;n++)r+=o[n]+".";o.length>=2&&(r=r.substring(0,r.length-1))}return{topLevelDomain:r,domain:i,address:t.join("@")}}}};void 0!==e&&e.exports&&(e.exports=i.mailcheck),"undefined"!=typeof window&&t&&(n.fn.mailcheck=function(e){var t=this;if(e.suggested){var n=e.suggested;e.suggested=function(e){n(t,e)}}if(e.empty){var o=e.empty;e.empty=function(){o.call(null,t)}}e.email=this.val(),i.mailcheck.run(e)})}).call(this,n(1),n(1))},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindEmailField=t.isValidEmail=t.MAILCHECK_DOMAINS=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i};n(356),n(377);var a=t.MAILCHECK_DOMAINS=["gmail.com","hotmail.com","yahoo.com","hotmail.co.uk","googlemail.com","gmx.de","live.com","live.ca","web.de","aol.com","msn.com","comcast.net","me.com","gmx.net","hotmail.fr","mail.ru","yahoo.co.uk","live.co.uk","yandex.ru","mac.com","yahoo.de","yahoo.fr"],s=t.isValidEmail=function(e){return""!=e&&/.+@.+\..+/.test(e)};t.bindEmailField=function(e,t){if(window.humble&&"en"===window.humble.locale){e.typeWatch({callback:function(){!function e(t,n){var i=!1;return t.mailcheck({domains:a,suggested:function(o,a){var s=a.full,l=a.address+"@<strong>"+a.domain+"</strong>";n(t,'Did you mean <a href="#" class="suggested-email" data-email="'+s+'">'+l+"</a>?").find(".suggested-email").click(function(i){i.preventDefault(),o.val((0,r.default)(i.currentTarget).data("email")),e(t,n)}),i=!0},empty:function(e){var o=e.val();(i=s(o))?n(t,!1):n(t,"Email address is not valid",!0)}}),i}(e,t)},captureLength:-1,highlight:!1,wait:500})}}},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClick=t.renderControls=t.paginate=void 0;var i=a(n(1)),o=a(n(0)),r=a(n(397));function a(e){return e&&e.__esModule?e:{default:e}}t.paginate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=n*t;return{controls:s(e.length,t,n),pageItems:e.slice(i,i+n)}};var s=t.renderControls=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=Math.ceil(e/n),a=[0,1,i-1,i-2,t-1,t,t+1];return o.default.template(r.default)({totalPages:i,currentPage:t,indicesToShow:a})};t.parseClick=function(e){return parseInt((0,i.default)(e.target).closest(".js-jump-to-page").data("index"))}},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockyCountdownTimerView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(3)),r=s(n(0)),a=s(n(399));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.BlockyCountdownTimerView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"className",value:function(){return["timer","blocky-timer",this.size].join(" ")}},{key:"initialize",value:function(e){this.size=e.size||"small"}},{key:"switchToEndingSoonState",value:function(){this.ui.timeBlocks.addClass("ending-soon")}},{key:"onNumberChange",value:function(e){for(var t in this.model.isEndingSoon()&&this.switchToEndingSoonState(),e.changed){var n=e.changed[t];this.ui[t].text(n>9?""+n:"0"+n)}}},{key:"onRender",value:function(){this.$el.attr("class",this.className()),this.listenTo(this.model,"change:days change:hours change:minutes change:seconds",this.onNumberChange)}},{key:"serializeData",value:function(){var e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serializeData",this).call(this);return e.size=this.size,e}}]),t}();l.prototype.template=r.default.template(a.default),l.prototype.ui={timeBlocks:".js-countdown-timer-counter",days:".js-countdown-timer-counter[data-unit=days] .js-countdown-timer-number",hours:".js-countdown-timer-counter[data-unit=hours] .js-countdown-timer-number",minutes:".js-countdown-timer-counter[data-unit=minutes] .js-countdown-timer-number",seconds:".js-countdown-timer-counter[data-unit=seconds] .js-countdown-timer-number"}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.displayConfirmation=t.displayDialog=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i},a=n(71),s=n(69),l=n(4);t.displayDialog=function(e,t,n){var i=new r.default.Model({title:e,message:t,goto:n||""});new s.AccountMessageModal({model:i}).render()},t.displayConfirmation=function(e,t,n,i,o,s,u){var c=new r.default.Model({title:e,message:t,confirmText:n,cancelText:i,goto:u||""}),d=new a.ActionConfirmationModal({model:c});d.submit="function"==typeof o?o:function(){var e=c.get("goto");e&&(0,l.redirectInDomain)(e)},"function"==typeof s&&(d.cancel=s),d.render()}},397:function(e,t){e.exports='<% if (totalPages > 1) { %>\n<div class="pagination">\n  <% let lastRendered = 0 %>\n  <% if (currentPage !== 0) { %>\n  <div class="js-jump-to-page jump-to-page" data-index="<%= currentPage - 1 %>"><i class="hb hb-chevron-left"></i></div>\n  <% } %>\n  <% for (let i = 0; i < totalPages; i++) { %>\n    <% let shouldShow = indicesToShow.indexOf(i) !== -1 %>\n    <% if (shouldShow) { %>\n      <% if (i - lastRendered > 1) { %>\n    ...\n      <% } %>\n      <% lastRendered = i %>\n  <div class="js-jump-to-page jump-to-page<% if (i === currentPage) { %> current<% } %>" data-index="<%= i %>"><%= i + 1 %></div>\n    <% } %>\n  <% } %>\n  <% if (currentPage !== totalPages - 1) { %>\n  <div class="js-jump-to-page jump-to-page" data-index="<%= currentPage + 1 %>"><i class="hb hb-chevron-right"></i></div>\n  <% } %>\n</div>\n<% } %>\n'},398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PubSub=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(2)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.PubSub=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.default.extend(this,o.default.Events),this._store={}}return i(e,[{key:"subscribe",value:function(e,t){r.default.has(this._store,e)&&t.apply(null,this._store[e]),this.on(e,t)}},{key:"publish",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],o=Array.prototype.slice.call(t,1);this._store[i]=o,this.trigger.apply(this,t)}}]),e}()},399:function(e,t){e.exports='<div class="countdown-timer-counter js-countdown-timer-counter" data-unit="days">\n  <div class="countdown-timer-number js-countdown-timer-number"><%= days > 9 ? days : \'0\' + days %></div>\n  <span><%- gtxt(\'days\') %></span>\n</div>\n<div class="countdown-timer-counter js-countdown-timer-counter" data-unit="hours">\n  <div class="countdown-timer-number js-countdown-timer-number"><%= hours > 9 ? hours : \'0\' + hours %></div>\n  <span><%- size === \'mini\' ? gtxt(\'hrs\') : gtxt(\'hours\') %></span>\n</div>\n<div class="countdown-timer-counter js-countdown-timer-counter" data-unit="minutes">\n  <div class="countdown-timer-number js-countdown-timer-number"><%= minutes > 9 ? minutes : \'0\' + minutes %></div>\n  <span><%- gtxt(\'min\') %></span>\n</div>\n<div class="countdown-timer-counter js-countdown-timer-counter" data-unit="seconds">\n  <div class="countdown-timer-number js-countdown-timer-number"><%= seconds > 9 ? seconds : \'0\' + seconds %></div>\n  <span><%- gtxt(\'sec\') %></span>\n</div>\n'},4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserCanUsePositionSticky=t.toTitleCase=t.applyInfieldLabels=t.queryToHash=t.warnBeforeClosing=t.forceRedraw=t.preventPageReload=t.preloadBackgroundImageWithDefault=t.replaceAllInString=t.logoutUser=t.setGotoAndRedirect=t.redirectInDomain=t.isRetinaDisplay=t.randomString=t.serializeToJson=t.isDebugUnsafe=t.isDefaultVersion=t.selectText=t.initJQueryPlugin=t.getQueryParam=t.updateQueryString=t.makeQueryString=t.isHumbleUrl=t.getHostName=t.isIE11=t.parseUrl=t.saveAs=t.loadFromLocalStorage=t.getTopMostUrl=t.getEnclosingIframe=t.renderTimeRemainingUntil=t.zeroPad=t.allCombination=t.kCombination=t.humanFileSize=t.getLocalStorage=t.asyncJs=t.isValidUrl=t.isValidEmail=t.twitterLinkify=t.stripJsonPrefix=t.listToEnglishStr=t.clamp=t.roundDecimalToMoneyAmount=t.unformatMoney=t.formatMoney=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=d(n(1)),r=d(n(0)),a=d(n(21)),s=n(10),l=d(n(5));n(24);var u=n(8),c=n(11);function d(e){return e&&e.__esModule?e:{default:e}}t.formatMoney=function(e,t,n,i,o){var u={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"}},c=!0,d=!1,h=void 0;try{for(var p,f=s.CURRENCY_CONSTANTS.SUPPORTED_CURRENCIES[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value,y=r.default.extend({},u);y.currency={symbol:s.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[m]},["EUR","RUB","TRY"].includes(m)&&(y=r.default.extend({},y,{delimiters:{thousands:"",decimal:","}})),a.default.language(m,y)}}catch(e){d=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw h}}if(Array.isArray(e))throw"formatMoney: `amount` argument cannot be an array";"RUB"===t&&void 0===n&&(n=!0);var v="",g=o?"$0,0[.]00":"$0,0.00";return g=n?"$0,0":g,"USD"===t?(a.default.language("en"),i&&(v=" USD")):s.CURRENCY_CONSTANTS.SUPPORTED_CURRENCIES.includes(t)?a.default.language(t):a.default.language("en"),e instanceof l.default&&(e=e.toFixed(2,l.default.ROUND_HALF_UP)),isNaN(e)&&(e=0),""+(0,a.default)(e).format(g)+v},t.unformatMoney=function(e){(e=e.replace(/[^0-9.,]/gi,"")).match(/[0-9.,]*[,.][0-9]{2}/)&&(e=e.lastIndexOf(".")>e.lastIndexOf(",")?e.replace(",",""):(e=e.replace(".","")).replace(",","."));return e.match(/^[0-9]*([,.][0-9]{0,2})?$/)?e:0},t.roundDecimalToMoneyAmount=function(e){return e.toFixed(2,l.default.ROUND_HALF_UP)},t.clamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return void 0!=t&&e<t?t:void 0!=n&&e>n?n:e},t.listToEnglishStr=function(e,t){var n=e.slice();return t=t?t+" ":"",n.length<=2?n.join(" "+t):(n[n.length-1]=""+t+n[n.length-1],n.join(", "))},t.stripJsonPrefix=function(e){return e.substr("while(1);".length)},t.twitterLinkify=function(e){var t=e.text();if(t.match(/@\S/)){e.html("");var n=t.split(" ");n.forEach(function(t,i){if(0===t.indexOf("@")&&t.length>1&&-1===t.indexOf("@",1)){var r=(0,o.default)("<a>");r.text(t),r.attr("href","https://www.twitter.com/"+t),r.attr("target","_blank"),r.appendTo(e),i!==n.length-1&&e.append(document.createTextNode(" "))}else{var a=t;i!==n.length-1&&(a+=" "),e.append(document.createTextNode(a))}})}},t.isValidEmail=function(e){if(!e||""===e)return!1;if(e.length>=500)return!1;var t=e.lastIndexOf("@");if(-1===t)return!1;var n=e.substring(0,t).toLowerCase(),i=e.substring(t+1).toLowerCase();return!!n.match(/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*$/)&&!!i.match(/^(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/)},t.isValidUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},t.asyncJs=function(e,t){var n=function(){var n=o.default.ajax({dataType:"script",cache:!0,url:e});t&&n.done(t)};"complete"===document.readyState?n():(0,o.default)(window).load(n)};var h=function(){return new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type=t;var n="session"===t?window.name:this._readCookie("localStorage");this._data=n?JSON.parse(n):{},this.length=r.default.size(this._data)}return i(e,[{key:"clear",value:function(){this._data={},this.length=0,"session"===this._type?window.name="":this._createCookie("localStorage","",180)}},{key:"getItem",value:function(e){return void 0===this._data[e]?null:this._data[e]}},{key:"key",value:function(e){var t=0;for(var n in this._data){if(t===e)return n;t++}return null}},{key:"removeItem",value:function(e){delete this._data[e],this.length--,this._setData(this._data)}},{key:"setItem",value:function(e,t){this._data[e]=""+t,this.length++,this._setData(this._data)}},{key:"_createCookie",value:function(e,t,n){var i=void 0,o=void 0;n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=e+"="+(t+o)+"; path=/"}},{key:"_readCookie",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=void 0,o=0;o<n.length;o++){for(i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},{key:"_setData",value:function(e){e=JSON.stringify(e),"session"===this._type?window.name=e:this._createCookie("localStorage",e,180)}}]),e}())("local")},p=t.getLocalStorage=function e(){if(void 0===e.storage){var t=void 0;try{t=void 0!==window.localStorage&&null!==window.localStorage&&function(e){if(void 0===e)return!1;try{return e.setItem("storage",""),e.getItem("storage"),e.removeItem("storage"),!0}catch(e){return!1}}(window.localStorage)?window.localStorage:h()}catch(e){t=h()}e.storage=t}return e.storage},f=(t.humanFileSize=function(e,t){void 0===t&&(t=2);var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(t)+" "+["B","KB","MB","GB","TB"][n]},t.kCombination=function e(t,n){var i=[];if(n>t.length||n<=0)return i;if(n===t.length)i.push(t);else if(1===n)for(var o=0;o<t.length;o++)i.push([t[o]]);else for(var r=0;r<t.length-n+1;r++)for(var a=t.slice(r,r+1),s=e(t.slice(r+1),n-1),l=0;l<s.length;l++)i.push(a.concat(s[l]));return i}),m=(t.allCombination=function(e){for(var t=[],n=1;n<=e.length;n++)for(var i=f(e,n),o=0;o<i.length;o++)t.push(i[o]);return t},t.zeroPad=function(e){return 1==String(e).length?"0"+e:""+e}),y=(t.renderTimeRemainingUntil=function(e){var t=e-(new Date).getTime()/1e3;t<0&&(t=0);var n=Math.floor(t/86400),i=Math.floor(t/3600)%24,o=Math.floor(t/60)%60,r=Math.floor(t)%60,a="";return n>0&&(a+=m(n)+":"),a+=m(i)+":",a+=m(o)+":",a+=m(r)},t.getEnclosingIframe=function(){var e=void 0;try{e=parent.document.getElementsByTageName("iframe")}catch(e){return null}for(var t=0;t<e.length;t++){var n=e[t];if(n.contentWindow===window)return n}},t.getTopMostUrl=function(){var e=window,t=window.document.referrer||window.location.href;try{for(;e!==e.parent;)t=(e=e.parent).document.referrer}catch(e){}return t},t.loadFromLocalStorage=function(e,t){try{return JSON.parse(p()[e])}catch(e){return t}},t.saveAs=function(e,t){var n=(0,o.default)("<a/>",{href:e,download:t});n.appendTo((0,o.default)("body")),n[0].click(),n.remove()},t.parseUrl=function(e){for(var t=[],n=[],i=[],o=t,r=0;r<e.length;r++){var a=e[r];"?"===a?o=i:"#"===a?o=n:o.push(a)}return i=i.join(""),{baseUrl:t.join(""),hash:n.join(""),queryString:i,queryParams:function(e){if(!(e=e||"").trim())return{};var t={};return e.split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]||null}),t}(i)}}),v=t.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode},g=t.getHostName=function(e){var t=(0,c.getWindow)();if(v()){var n=document.createElement("a");return n.href=e,n.hostname}return new t.URL(e,location).hostname},_=(t.isHumbleUrl=function(e){var t=g(e);return"localhost"===t||r.default.endsWith(t,"-dot-hr-humblebundle.appspot.com")||r.default.endsWith(t,".humblebundle.com")},t.makeQueryString=function(e){return o.default.param(e)}),b=(t.updateQueryString=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=y(t);r.default.forEach(e,function(e,t){null==e&&n?delete i.queryParams[t]:i.queryParams[t]=e});var o=_(i.queryParams),a=i.baseUrl+"?"+o;return i.hash&&(a+="#"+i.hash),a},t.getQueryParam=function(e,t){t=t||(0,c.getWindow)().location,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n,i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t.search);return null===i?"":(n=i[1],decodeURIComponent(n.replace(/\+/g," ")))},t.initJQueryPlugin=function(e,t,n,i,r){void 0===n&&(n=[]),void 0===i&&(i=100),r||(r=o.default.noop);var a=function(){var i=(0,o.default)(e);if(i.length){try{i[t].apply(i,n),r()}catch(e){console.error("Error during initialization of "+t+": "+e.stack)}return!0}return!1};if(!a())var s=setInterval(function(){a()&&clearInterval(s)},i)},t.selectText=function(e){var t=void 0;e instanceof o.default&&(e=e[0]);var n=document;if(n.body.createTextRange)(t=n.body.createTextRange()).moveToElementText(e),t.select();else if(window.getSelection){var i=window.getSelection();(t=n.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(t)}},t.isDefaultVersion=function(){return r.default.endsWith(window.location.hostname,".humblebundle.com")},t.isDebugUnsafe=function(){return r.default.includes(["localhost:8080","localhost:8888"],window.location.host)},t.serializeToJson=function(e){var t={},n=e.serializeArray();for(var i in n){var o=n[i];t[o.name]?(t[o.name].push||(t[o.name]=[t[o.name]]),t[o.name].push(o.value||"")):t[o.name]=o.value||""}return t},t.randomString=function(e){return(Math.random()+1).toString(36).substr(2,e)},t.isRetinaDisplay=function(){return window.devicePixelRatio>1},t.redirectInDomain=function(e){var t=document.createElement("a");t.href=window.location.origin+e;var n=function(e){var t=e.indexOf(":");return-1===t?e:e.substring(0,t)};n(t.host)!==n(window.location.host)||-1!==t.pathname.indexOf("//")?window.location.href="/":window.location.href=t.href});t.setGotoAndRedirect=function(e){var t=(0,c.getWindow)(),n=e,i=encodeURIComponent(t.location.pathname);(r.default.includes(e,"?")?n+="&goto="+i:n+="?goto="+i,t.location.search)&&(n+="&qs="+encodeURIComponent(t.location.search.substring(1)));b(n)},t.logoutUser=function(){var e=(0,c.getWindow)().models.user_json.logout_url;e||(console.error("No logout URL available"),e="/logout?goto=/");var t=(0,o.default)("<form>",{action:e,method:"POST"});(0,o.default)("<input>").attr({type:"hidden",class:"csrftoken",name:u.csrfFormKey,value:(0,u.getCsrf)()}).appendTo(t),t.appendTo("body").submit()},t.replaceAllInString=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},t.preloadBackgroundImageWithDefault=function(e,t){var n=(0,o.default)(e),i=n.css("background-image");i=(i=/^url\((['"]?)(.*)\1\)$/.exec(i))?i[2]:"";var r=new Image;r.src=i,r.complete||(n.css("background-image",'url("'+t+'")'),r.addEventListener("load",function(){n.css("background-image",'url("'+i+'")')}))},t.preventPageReload=function(e){e.$rootEl.on("click","a[href^='/']:not([data-reload=1])",function(t){var n=(0,o.default)(t.currentTarget).attr("href");if(!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)){t.preventDefault();var i=n.replace(/^\//,"").replace("#!/","");return e.navigate(i,{trigger:!0}),!1}})},t.forceRedraw=function(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t},t.warnBeforeClosing=function(e,t){window.addEventListener("beforeunload",function(n){var i=!0;if(t&&(i=t()),i)return n.returnValue=e,e})},t.queryToHash=function(e){if("string"!=typeof e||0===e.length)return{};var t={};return e.split("&").forEach(function(e){var n=e.split("="),i=decodeURIComponent(n[0]);if(0!==i.length){var o=decodeURIComponent(n[1]);Array.isArray(t[i])?t[i].push(o):t[i]?t[i]=[t[i],o]:t[i]=o}}),t},t.applyInfieldLabels=function(e){e.inFieldLabels({fadeOpacity:.6,fadeDuration:250,hideDuration:200})},t.toTitleCase=function(e){if(e){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return e.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,n,i){return n>0&&n+e.length!==i.length&&e.search(t)>-1&&":"!==i.charAt(n-2)&&("-"!==i.charAt(n+e.length)||"-"===i.charAt(n-1))&&i.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})}},t.browserCanUsePositionSticky=function(){var e=document.createElement("test").style;return e.cssText="position: sticky; position: -webkit-sticky;",-1!==e.position.indexOf("sticky")}},400:function(e,t){e.exports='<a class="js-close-modal close-modal" href="javascript:void(0);">\n  <i class="hb hb-times"></i>\n</a>\n<div class=\'charity-info-wrapper\'>\n  <div class="charity-media">\n<% if (youtubeURL) { %>\n    <iframe class="charity-video" width="300" height="168" src="<%- youtubeURL %>" frameborder="0" allowfullscreen></iframe>\n<% } %>\n<% if (logo_url) { %>\n    <img class="charity-logo" src="<%= logo_url %>"/>\n<% } %>\n  </div>\n  <div class="charity-details">\n    <div class=\'charity-title\'>\n      <h2><%= human_name %></h2>\n    </div>\n<% if (charity_id) { %>\n    <p class=\'charity-info\'><strong><%- gtxt(\'Category:\') %></strong> <i><%= category %></i></p>\n    <p class=\'charity-info\'><strong><%- gtxt(\'Location:\') %></strong>\n      <i>\n<% if (country == \'United States\') { %>\n        <%- city %>, <%- state %>\n<% } else { %>\n        <%- country %>\n<% } %>\n      </i>\n    </p>\n<% } %>\n<% if (url) { %>\n    <a class=\'charity-link\' href=\'<%= url %>\' rel="nofollow" target="_blank"><%- gtxt(\'Visit their website\') %></a>\n<% } %>\n    <div class=\'charity-description\'>\n<% if (ppgfDisclaimer) { %>\n      <em><%= gtxt(\'Payments to {name} are made via the <a {attrs}>PayPal Giving Fund</a>.\').format({name: human_name, attrs: \'href="https://support.humblebundle.com/hc/articles/205183597" target="_blank"\'}) %></em><br /><br />\n<% } %>\n      <%= description %>\n    </div>\n<% if (charity_id) { %>\n    <p class=\'charity-info\'>\n      <strong><%- gtxt(\'Recommend this charity\') %></strong><br>\n      <%- gtxt(\'Use this link to refer a friend to this bundle in support of {name}:\').format({name: human_name}) %><br>\n      <a href="<%= currentUrl %>?charity=<%= charity_id %>" rel="nofollow"><%= currentUrl %>?charity=<%= charity_id %></a>\n    </p>\n<% } %>\n  </div>\n</div>\n'},406:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CharitySelectionModal=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=f(n(2)),r=f(n(0)),a=f(n(481)),s=f(n(480)),l=f(n(479)),u=n(361),c=n(478),d=n(85),h=n(9),p=n(387);function f(e){return e&&e.__esModule?e:{default:e}}var m=t.CharitySelectionModal=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,d.DisplayModal),i(n,[{key:"initialize",value:function(e){this.pubSub=e.pubSub,this.lastSentRequestId=0,this.lastReceivedRequestId=-1,this.num_results=0,this.page=1,this.selectionErrorTemplate=r.default.template(a.default),this.selectionLoadingTemplate=r.default.template(s.default),r.default.bindAll(this,"handleServerResponse","handleCountryChange","showNoResultsState","showLoadingState","showErrorState","submitSearch","jumpToPage"),this.constants=e.constants,this.isModal=e.isModal,this.user=e.user,this.collection||(this.collection=new u.CharityList(this.constants.featured_charities)),this.searchResultsCollection||(this.searchResultsCollection=new u.CharityList(this.collection.models)),this.PAGE_SIZE=e.page_size,this.UNITED_STATES="US",this.charitySearchResultsView=new c.CharityListView({disallowedCharityIds:this.constants.disallowed_charity_ids,collection:this.searchResultsCollection,constants:this.constants,user:this.user,disableSelection:e.disableSelection}),this.model=new o.default.Model(e),this.model.set({categories:this.constants.CHARITY_SEARCH_PARAMS.category,countries:this.constants.CHARITY_SEARCH_PARAMS.country,states:this.constants.CHARITY_SEARCH_PARAMS.state,isModal:this.isModal})}},{key:"handleServerResponse",value:function(e){this.num_results=Math.min(1e3,e.num_results),0!==e.results.length?(e.num_results>1e3?(this.$(".js-results-heading").text((0,h.gtxt)("{one_thousand}+ results").format({one_thousand:1e3})),this.$(".js-results-heading-disclaimer").show()):this.$(".js-results-heading").text((0,h.ngtxt)("{one} result for search","{num_results} results for search",e.num_results).format({one:(0,h.localizeNumber)(1),num_results:(0,h.localizeNumber)(e.num_results)})),this.collection.add(e.results),this.searchResultsCollection.reset(e.results),this.renderSearchResults()):this.showNoResultsState()}},{key:"handleCountryChange",value:function(){var e=this.$(".js-country-label"),t=this.$(".js-state-label");this.$(".js-charity-country").val()===this.UNITED_STATES?(t.addClass("is-united-states"),e.addClass("is-united-states")):(t.removeClass("is-united-states"),e.removeClass("is-united-states"))}},{key:"showLoadingState",value:function(){this.$(".js-results-heading").text(""),this.$(".js-results-heading-disclaimer").hide(),this.$(".js-charity-results").html(this.selectionLoadingTemplate({}))}},{key:"showErrorState",value:function(){this.$(".js-results-heading").text(""),this.$(".js-charity-results").html(this.selectionErrorTemplate({}))}},{key:"showNoResultsState",value:function(){this.$(".js-results-heading").text((0,h.gtxt)("No results found")),this.$(".js-charity-results").empty()}},{key:"searchCharities",value:function(t){var n=this;t.page-=1;!function i(o){t.request=++n.lastSentRequestId,n.showLoadingState(),e.ajax({type:"GET",url:"/api/v1/charity/search",data:t,dataType:"json",error:function(){0===o?n.showErrorState():i(o-1)},success:function(e){var t=parseInt(e.request);t>n.lastReceivedRequestId&&(n.lastReceivedRequestId=t,n.handleServerResponse(e))}})}(5)}},{key:"jumpToPage",value:function(e){e.preventDefault();var t=(0,p.parseClick)(e);this.page=t+1,this.submitSearch(e)}},{key:"submitSearch",value:function(e){if(!e.keyCode||13===e.keyCode){e.preventDefault();var t=this.$(".js-charity-query").val(),n=this.$(".js-charity-category").val(),i=this.$(".js-charity-country").val(),o="";i===this.UNITED_STATES&&(o=this.$(".js-charity-state").val()),this.searchCharities({query:t,category:n,country:i,state:o,page:this.page,page_size:this.PAGE_SIZE})}}},{key:"renderSearchResults",value:function(){this.$(".pagination").remove();var e=this.$(".js-charity-results");e.empty(),e.append(this.charitySearchResultsView.render()),e.append((0,p.renderControls)(this.num_results,this.page-1,this.PAGE_SIZE))}}]),n}();m.prototype.keyControl=!1,m.prototype.template=r.default.template(l.default),m.prototype.className="charity-selection-modal",m.prototype.events={"click .js-submit-search":"submitSearch","keyup .js-charity-query":"submitSearch","change .js-charity-country":"handleCountryChange","click .js-jump-to-page":"jumpToPage"}}).call(this,n(1))},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DateFormatConstants={SHORT_MONTH:"medium",COMPLETE_MONTH:"long",COMPLETE_MONTH_WITH_DAY_OF_WEEK:"full",MONTH_AND_YEAR_ONLY:"MMMM YYY"}},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLATFORM_AND_DELIVERY_CONSTANTS={web_delivery_methods:{asmjs:"asmjs",unitywasm:"unitywasm"},console_platforms:["switch","3DS"],delivery_method_definition_dict:{origin:{human_name:"Origin",preamble:"Redeem for",icon:"hb-origin"},asmjs:{preamble:"Play in",icon:"hb-bundle"},blizzard:{importance:5,human_name:"Blizzard Battle.net",preamble:"Redeem for",icon:"hb-bnet"},external_key:{human_name:"Unique Links",icon:"hb-link"},xboxone:{human_name:"Xbox One",preamble:"Play on",icon:"hb-xboxone"},wiiu:{human_name:"WiiU",preamble:"Redeem on",icon:"hb-wiiu"},download:{importance:2,human_name:"DRM-free download",preamble:"Download for",icon:"hb-drmfree"},ps3:{human_name:"PS3",preamble:"Play on",icon:"hb-psthree"},ps4:{human_name:"PS4",preamble:"Play on",icon:"hb-psfour"},"video-download":{human_name:"Movie",preamble:"Download",icon:"hb-movie"},gog:{importance:3,human_name:"GOG",preamble:"Redeem for",icon:"hb-gog"},download_drm:{human_name:"DRM download",preamble:"Redeem for",icon:"hb-key"},epic:{human_name:"Epic Games store",preamble:"Redeem for",icon:"hb-epic"},"audio-download":{human_name:"Audio download",preamble:"Download",icon:"hb-audio"},we:{preamble:"Play in",icon:"hb-globe"},"3DS":{human_name:"Nintendo 3DS",preamble:"Redeem on",icon:"hb-threeds-wide"},iOS:{human_name:"iOS",preamble:"Redeem for",icon:"hb-osx"},"other-key":{human_name:"Key",preamble:"Redeem for",icon:"hb-key"},rifftrax:{preamble:"Available via",icon:"hb-rifftrax"},android:{human_name:"Android",preamble:"Download for",icon:"hb-android"},psvita:{human_name:"PSVita",preamble:"Play on",icon:"hb-psvita"},vhx:{human_name:"VHX",preamble:"Download/stream on",icon:"hb-movie"},"physical-copy":{human_name:"Physical Copy",icon:"hb-library"},new3ds:{human_name:"New Nintendo 3DS",preamble:"Redeem on",icon:"hb-new3ds"},switch:{human_name:"Nintendo Switch",preamble:"Redeem on",icon:"hb-switch-wide"},origin_keyless:{human_name:"Origin",preamble:"Redeem for",icon:"hb-origin"},uplay:{importance:4,human_name:"Uplay",preamble:"Redeem for",icon:"hb-uplay"},steam:{importance:1,human_name:"Steam",preamble:"Redeem for",icon:"hb-steam"}},platform_definition_dict:{firefox:{human_name:"Firefox",icon:"hb-firefox"},rifftrax:{human_name:"Rifftrax",icon:"hb-rifftrax"},xboxone:{human_name:"Xbox One",icon:"hb-xboxone"},"windows-mixed-reality":{human_name:"Windows Mixed Reality",icon:"hb-windows-mixed-reality"},mp3:{human_name:"MP3",icon:"hb-file-mp3"},wiiu:{human_name:"Nintendo Wii U",icon:"hb-wiiu"},linux:{importance:3,human_name:"Linux",icon:"hb-linux"},ps3:{human_name:"Playstation 3",icon:"hb-psthree"},ps4:{human_name:"Playstation 4",icon:"hb-psfour"},chrome:{human_name:"Chrome",icon:"hb-chrome"},wav:{human_name:"WAV",icon:"hb-file-audio-o"},android:{human_name:"Android",icon:"hb-android"},"3DS":{human_name:"Nintendo 3DS",icon:"hb-threeds"},iOS:{human_name:"iOS",icon:"hb-osx"},mac:{importance:2,human_name:"Mac",icon:"hb-osx"},flac:{human_name:"FLAC",icon:"hb-file"},hd:{human_name:"HD",icon:"hb-movie"},psvita:{human_name:"Playstation Vita",icon:"hb-psvita"},vive:{human_name:"HTC Vive",icon:"hb-vive"},windows:{importance:1,human_name:"Windows",icon:"hb-windows"},"physical-copy":{human_name:"Physical Copy",icon:"hb-library"},new3ds:{human_name:"New Nintendo 3DS",icon:"hb-new3ds"},"oculus-rift":{human_name:"Oculus Rift",icon:"hb-oculus"},switch:{human_name:"Nintendo Switch",icon:"hb-switch"},sd:{human_name:"SD",icon:"hb-movie"},browser:{human_name:"modern browsers like Chrome or Firefox",icon:"hb-singleplatform"}}}},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.USER_CONSTANTS={MIN_PASSWORD_LENGTH:8,HUMBLE_REWARDS_BASIC_PERCENT:10,HUMBLE_REWARDS_BASIC_DECIMAL:"0.1",HUMBLE_REWARDS_SUBSCRIBER_PERCENT:20,HUMBLE_REWARDS_DEFAULT_CHARITY_AMOUNT:0,HUMBLE_REWARDS_SUBSCRIBER_DECIMAL:"0.2",HUMBLE_REWARDS_DEFAULT_DISCOUNT_AMOUNT:0,HUMBLE_REWARDS_DEFAULT_WALLET_AMOUNT:10}},45:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=t.User=t.removeUserCharity=t.updateUserCharity=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(18),l=n(44),u=n(8);var c=t.updateUserCharity=function(t,n,i){t[s.CSRF_CONSTANTS.CSRF_FORM_KEY]=(0,u.getCsrf)(),e.ajax({type:"POST",url:"/api/v1/user/charity",data:t,dataType:"json",error:i,success:n})},d=t.removeUserCharity=function(t,n){var i={};i[s.CSRF_CONSTANTS.CSRF_HEADER_KEY]=(0,u.getCsrf)(),e.ajax({type:"DELETE",url:"/api/v1/user/charity",headers:i,dataType:"json",error:n,success:t})},h=t.User=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{email:"",rewardsDiscountAmount:l.USER_CONSTANTS.HUMBLE_REWARDS_DEFAULT_DISCOUNT_AMOUNT,rewardsWalletAmount:l.USER_CONSTANTS.HUMBLE_REWARDS_DEFAULT_WALLET_AMOUNT,rewardsCharityAmount:l.USER_CONSTANTS.HUMBLE_REWARDS_DEFAULT_CHARITY_AMOUNT,hasSharedDiscount:!1}}},{key:"isLoggedIn",value:function(){return!!this.get("email")}},{key:"updateCharity",value:function(e){var t=this;this.isLoggedIn()&&(e?c({charity_id:e},function(){return t.set("charity_api_success",!0)},function(){return t.set("charity_api_success",!1)}):d(function(){return t.set("charity_api_success",!0)},function(){return t.set("charity_api_success",!1)}));this.set("charity_id",e||this.featuredCharityId)}}]),t}();window.globalUser=window.globalUser||null;t.getUser=function(){return null===window.globalUser&&(window.models&&window.models.user_json?window.globalUser=new h(window.models.user_json):window.globalUser=new h),window.globalUser}}).call(this,n(1))},468:function(e,t){e.exports='<p class="partner-list-blurb"><i><%= gtxt(\'When sharing your Humble Partner affiliate link, please follow all applicable laws, rules, and requirements of the FTC and other governmental authorities that regulate these kinds of commercial relationships and disclosures. <u><b><a {link_attrs}>Please thoroughly review Disclosures 101 for Social Media Influencers, available here</a></b></u>.\').format({\'link_attrs\': \'href="https://www.ftc.gov/tips-advice/business-center/guidance/disclosures-101-social-media-influencers"\'}) %></i></p>\n<% if (partners.length > 1) { %>\n  <a href="#" data-jq-dropdown="#jq-dropdown-partner" class="partner-list-link">\n    <%- gtxt(\'Partner username:\') %>\n    <span class="current-partner"><%= current.escape(\'human_name\') %></span>\n    <i class="hb hb-caret-down"></i></a>\n  <div id="jq-dropdown-partner" class="jq-dropdown jq-dropdown-tip">\n    <ul class="jq-dropdown-menu">\n      <% partners.each(function(partner) { %>\n        <li id="<%= partner.cid %>" class="change-partner"\n          ><a><%= partner.escape(\'human_name\') %></a></li>\n      <% }) %>\n    </ul>\n  </div>\n<% } else if (partners.length) { %>\n  <div class="single-partner">\n    <%- gtxt(\'Partner username:\') %>\n    <span class="current-partner"><%= current.escape(\'human_name\') %></span>\n  </div>\n<% } %>\n'},469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartnerListView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(83),n(82);var o=s(n(2)),r=s(n(0)),a=s(n(468));function s(e){return e&&e.__esModule?e:{default:e}}(t.PartnerListView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){window.jqDropdownSetup(),this.settings=e.settings,this.listenTo(this.settings,"change:currentPartner",this.updatePartner),this.listenTo(this.collection,"add",this.render)}},{key:"updatePartner",value:function(e){var t=e.get("currentPartner");this.$(".current-partner").html(t.escape("human_name"))}},{key:"render",value:function(){return this.settings.get("currentPartner")||this.settings.set("currentPartner",this.collection.first()),this.$el.html(this.template({partners:this.collection,current:this.settings.get("currentPartner")})),this.$el}}]),t}()).prototype.template=r.default.template(a.default)},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PRODUCT_TILE_CONSTANTS={PRODUCT_TYPES:{MONTHLY:"monthly",COUPON:"coupon",STORE:"store",BUNDLE:"bundle",CUSTOM:"custom"},TILE_SIZES:{THREE_FOURTHS:"three-fourths",QUARTER:"quarter",FULL:"full",HALF:"half",ONE_THIRD:"one-third"},SMALL_TILE_SIZES:{QUARTER:"quarter",ONE_THIRD:"one-third"},STAMPS:{MIXED:"mixed",BOOKS:"books",GAMES:"games",CHOICE_STAMP:"choice_stamp",COMICS:"comics",MONTHLY_STAMP:"monthly_stamp",AUDIOBOOK:"audiobook",MOBILE:"mobile",STORE:"store",SOFTWARE:"software"},HERO_GRID:{SQUARE_LENGTH:150,GAME_WIDTH:308,GAME_HEIGHT:177,COVER_WIDTH:150,COVER_HEIGHT:218},CUSTOM_TILE_TYPES:{HTML:"html",BUNDLE_MONTHLY:"bundle/monthly"}}},470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartnerSettings=void 0;var i,o=n(2),r=(i=o)&&i.__esModule?i:{default:i};t.PartnerSettings=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Model),t}()},471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Partner=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=s(n(2)),r=s(n(0)),a=n(4);function s(e){return e&&e.__esModule?e:{default:e}}(t.Partner=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"getCharity",value:function(){if(!this.get("selectedCharity")){var e=JSON.parse((0,a.getLocalStorage)().getItem("charity"+this.escape("id")));this.set("selectedCharity",e)}return this.get("selectedCharity")}},{key:"link",value:function(e){var t=this.getUrlParam();return"https://www.humblebundle.com/"+r.default.trim(e,"/")+t}},{key:"getUrlParam",value:function(){var e=this.escape("id"),t=this.getCharity();return"?partner="+e+(t&&t.charityId?"&charity="+t.charityId:"")}}]),t}()).prototype.urlRoot="/partner/api/partners"},472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartnerCollection=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(471);var l=t.PartnerCollection=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Collection),o(t,[{key:"fetchIfNeeded",value:function(e){this.length||(e?this.fetch().then(e):this.fetch())}},{key:"parse",value:function(e){return e.partners}}]),t}();l.prototype.model=s.Partner,l.prototype.url="/partner/api/partners"},473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initLinkGen=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i},a=n(558);t.initLinkGen=function(e){var t=(0,r.default)(e);if(t.length){var n=new a.PartnerLinkGeneratorView({el:t});return n.initializeBanner(),n}}},474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharityPreviewView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(0)),a=n(360),s=n(4);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.BaseCharityPreviewView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.options=e,r.default.bindAll(this,"render","selectThisCharity","removeCharity"),this.constants=this.options.constants,this.isDisallowed=e.is_disallowed,this.pubSub=a.charityPubSub,this.rendered=!1}},{key:"render",value:function(){this.rendered=!0,this.model.disableSelection||this.$(".js-select-charity").on("click",this.selectThisCharity),this.isDisallowed&&this.$el.addClass("is-disallowed"),r.default.each(this.$(".charity-img"),function(e){return(0,s.preloadBackgroundImageWithDefault)(e,a.DEFAULT_CHARITY_IMAGE)})}},{key:"getTemplateParams",value:function(){var e=this.model.toJSON();e.url=e.url||"",e.country=this.constants.CHARITY_SEARCH_PARAMS.country[this.model.get("country")],e.isDisallowed=this.isDisallowed,e.currentUrl=""+window.location.origin+window.location.pathname;var t=this.model.get("youtube_link");return e.youtubeURL=t?"https://www.youtube.com/embed/"+t+"?modestbranding1&rel=0&showinfo=0":"",e}},{key:"selectThisCharity",value:function(e){e.preventDefault(),e.stopPropagation(),!this.isDisallowed&&this.model&&this.pubSub.publish("set_charity",{current_charity_is_random:!1,current_charity:this.model})}},{key:"removeCharity",value:function(){this.pubSub.publish("set_charity",{remove_charity:!0,current_charity_is_random:!0})}}]),t}();u.prototype.className="charity-preview",u.prototype.events={"click .js-remove-charity":"removeCharity"}},475:function(e,t){e.exports='<div class="js-see-details charity-img" style="background-image: url(\'<%= logo_url %>\');"></div>\n<div class="charity-name">\n  <a class="js-see-details see-details" data-charity-id="<%= charity_id %>">\n    <h4 title="<%= human_name %>"><%= human_name %></h4>\n    <h5 class="location"><% if (country == \'United States\') {  %><%- city %>, <%- state %><% } else { %><%- country %><% } %></h5>\n  </a>\n  <button class="\n    select-charity\n    js-select-charity\n<% if (featured && isSelected) { %>\n    is-featured\n<% } else if (isSelected) { %>\n    is-selected\n<% } else if (featured) { %>\n    is-unselected-featured\n<% } %>\n<% if (isDisallowed) { %>\n    is-disallowed\n<% } %>\n  ">\n    <span class="selected-text"><%- gtxt(\'Selected\') %></span>\n    <span class="featured-text"><%- gtxt(\'Featured\') %></span>\n    <span class="unselected-text"><%- gtxt(\'Select\') %></span>\n    <span class="disallowed-text"><%- gtxt(\'Default\') %></span>\n  </button>\n<% if (isSelected && !featured) { %>\n  <br>\n  <button class="js-remove-charity" title="<%- gtxt(\'Defer to our monthly featured charity\') %>">\n    <span><%- gtxt(\'Remove\') %></span>\n  </button>\n<% } %>\n</div>\n'},476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityPreviewView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=u(n(0)),a=u(n(475)),s=n(474),l=n(194);function u(e){return e&&e.__esModule?e:{default:e}}(t.CharityPreviewView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.BaseCharityPreviewView),i(t,[{key:"initialize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),r.default.bindAll(this,"render","selectThisCharity","removeCharity","seeDetails"),this.user=e.user,this.listenTo(this.user,"change:charity_id",this.render),this.charityPreviewTemplate=r.default.template(a.default)}},{key:"render",value:function(){var e=this.getTemplateParams();return e.isSelected=this.user.get("charity_id")===this.model.id,"function"==typeof this.charityPreviewTemplate&&this.$el.html(this.charityPreviewTemplate(e)),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),this.el}},{key:"selectThisCharity",value:function(){this.user.updateCharity(this.model&&this.model.id)}},{key:"removeCharity",value:function(){this.user.updateCharity(null)}},{key:"seeDetails",value:function(){new l.CharityDetailsView({constants:this.constants,model:this.model,user:this.user}).render()}}]),t}()).prototype.events={"click .js-see-details":"seeDetails","click .js-select-charity":"selectThisCharity","click .js-remove-charity":"removeCharity"}},477:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharityListView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(2)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.BaseCharityListView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.options=e,r.default.bindAll(this,"render","renderCharityPreview"),this.constants=this.options.constants,this.pubSub=this.options.pubSub,this.featuredCharityId=this.options.featuredCharityId}},{key:"render",value:function(){var e=this;return this.$el.empty(),this.collection.each(function(t){e.$el.append(e.renderCharityPreview(r.default.extend(t,{disableSelection:e.options.disableSelection})))}),this.delegateEvents(),this.el}}]),t}();s.prototype.className="charity-list",s.prototype.events={},s.prototype.tagName="div"},478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityListView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(477),l=n(476);t.CharityListView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.BaseCharityListView),o(t,[{key:"initialize",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this.user=e.user}},{key:"renderCharityPreview",value:function(e){var t=a.default.includes(this.constants.disallowed_charity_ids,e.get("charity_id"));return new l.CharityPreviewView({model:e,constants:this.constants,user:this.user,isDisallowed:t}).render()}}]),t}()},479:function(e,t){e.exports='<div class="content js-content">\n<% if (isModal) { %>\n  <h1><%- gtxt(\'Select a charity\') %></h1>\n<% } %>\n  <h2><%- gtxt(\'Charity Search\') %></h2>\n  <div class="js-featured-charities-holder"></div>\n  <div class="charity-search js-charity-search">\n    <label class="query">\n      <input type="text" name="search" class="js-charity-query" placeholder="<%- gtxt(\'Search names or keywords\') %>">\n      <i class="hb hb-search"></i>\n    </label>\n    <label class="category"><%- gtxt(\'Category\') %>\n      <select name="category" class="js-charity-category">\n        <option value="" selected><%- gtxt(\'All\') %></option>\n<% _.each(categories, function(val, key) { %>\n        <option value="<%- key %>"><%- val %></option>\n<% }); %>\n      </select>\n    </label>\n    <label class="country js-country-label"><%- gtxt(\'Country\') %>\n      <select name="country" class="js-charity-country">\n        <option value="" selected><%- gtxt(\'All\') %></option>\n<% _.each(countries, function(val, key) { %>\n        <option value="<%- key %>"><%- val %></option>\n<% }); %>\n      </select>\n    </label>\n    <label class="state js-state-label"><%- gtxt(\'State\') %>\n      <select name="state" class="js-charity-state">\n        <option value="" selected><%- gtxt(\'All\') %></option>\n<% _.each(_.sortBy(_.toPairs(states), function(tuple) { return tuple[1]; }), function(tuple) { %>\n        <option value="<%- tuple[0] %>"><%- tuple[1] %></option>\n<% }); %>\n      </select>\n    </label>\n    <button class="js-submit-search" type="submit"><%- gtxt(\'Search\') %></button>\n  </div>\n  <h3 class="js-results-heading results-heading"><%- gtxt(\'Suggested charities\') %></h3>\n  <h4 class="js-results-heading-disclaimer results-heading-disclaimer"><%- gtxt(\'Note: only 1000 results are displayed per search\') %></h4>\n  <div class="js-charity-results charity-results"></div>\n  <div class="partnership-line"><%= gtxt(\'In partnership with <a {attrs}>PayPal Giving Fund</a>\').format({attrs: \'href="https://www.paypal.com/givingfund/" target="_blank"\'}) %></div>\n</div>\n<a class="close-modal js-close-modal" href="#"><i class="hb hb-times"></i></a>\n'},480:function(e,t){e.exports='<div class="charity-selection-message">\n  <img src="https://humblebundle-a.akamaihd.net/static/hashed/26faf55c6e36ba3b1a57f9001942059fe05050f2.gif" alt="" />\n  <h1><%- gtxt(\'Loading...\') %></h1>\n</div>\n'},481:function(e,t){e.exports="<div class=\"charity-selection-message\">\n  <h1><%- gtxt('Loading failed') %></h1>\n  <p><%- gtxt('You may have a connection problem, or our server may be experiencing issues.') %></p>\n</div>\n"},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Charity=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i};(t.Charity=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Model),o(t,[{key:"defaults",value:function(){return{human_name:"",logoUrl:"",charity_id:"",featured:!1}}}]),t}()).prototype.idAttribute="charity_id"},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XPromoBannerView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),a=(i=r)&&i.__esModule?i:{default:i},s=n(79),l=n(168);(t.XPromoBannerView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.View),o(t,[{key:"initialize",value:function(e){this.payEarlyOptions={productMachineName:e.productMachineName},this.userSubscriptionPlan=e.planOptions}},{key:"initializeBanner",value:function(){var e=this.$(".js-page-banner-link");this.machineName=e.data("banner"),this.dismissable=this.$(".js-dismiss-button").length>0,this.dismissed=this.dismissable&&this.getDismissedFromLocalStorage(),this.$bannerEl=this.$el,this.dismissed?this.remove():this.onReveal()}},{key:"hasActiveBanner",value:function(){return this.machineName&&!this.dismissed}},{key:"onReveal",value:function(){this.$bannerEl.hasClass("is-hidden")&&this.$bannerEl.removeClass("is-hidden"),(0,s.renderTinyLinks)()}},{key:"onDismiss",value:function(e){var t=this;e&&e.preventDefault(),this.$bannerEl.slideUp({duration:500,easing:"linear",done:function(){t.remove()}}),this.saveDismissedToLocalStorage()}},{key:"payEarly",value:function(e){if(e.preventDefault(),this.payEarlyOptions)return window._gaTrackEvent(!1,"payearly","banner","openmodal"),(0,l.openPayEarlyModal)(this.payEarlyOptions,this.userSubscriptionPlan),!1}},{key:"getDismissedFromLocalStorage",value:function(){return"dismissed"===localStorage.getItem(this.machineName)}},{key:"saveDismissedToLocalStorage",value:function(){localStorage.setItem(this.machineName,"dismissed")}}]),t}()).prototype.events={"click .js-dismiss-button":"onDismiss","click .js-pay-early":"payEarly"}},489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PRODUCT_CONSTANTS={PRODUCT_PROMO:"promo",PRODUCT_TROVE_CONTENT:"trovecontent",PRODUCT_GAMEPAGE:"gamepage",PRODUCT_STOREFRONT:"storefront",PRODUCT_BUNDLE:"bundle",PRODUCT_WIDGET:"widget",PRODUCT_SUBSCRIPTION_PLAN:"subscriptionplan",max_machine_name_length:85,PRODUCT_SUBSCRIPTION_CONTENT:"subscriptioncontent"}},490:function(e,t,n){var i,o;
/*!
 * ScrollMagic v2.0.5 (2015-04-29)
 * The javascript library for magical scroll interactions.
 * (c) 2015 Jan Paepke (@janpaepke)
 * Project Website: http://scrollmagic.io
 * 
 * @version 2.0.5
 * @license Dual licensed under MIT license and GPL.
 * @author Jan Paepke - e-mail@janpaepke.de
 *
 * @file ScrollMagic main library.
 */void 0===(o="function"==typeof(i=function(){"use strict";var e=function(){i.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};e.version="2.0.5",window.addEventListener("mousewheel",function(){}),e.Controller=function(n){var o,r,a="ScrollMagic.Controller",s=t.defaults,l=this,u=i.extend({},s,n),c=[],d=!1,h=0,p="PAUSED",f=!0,m=0,y=!0,v=function(){u.refreshInterval>0&&(r=window.setTimeout(C,u.refreshInterval))},g=function(){return u.vertical?i.get.scrollTop(u.container):i.get.scrollLeft(u.container)},_=function(){return u.vertical?i.get.height(u.container):i.get.width(u.container)},b=this._setScrollPos=function(e){u.vertical?f?window.scrollTo(i.get.scrollLeft(),e):u.container.scrollTop=e:f?window.scrollTo(e,i.get.scrollTop()):u.container.scrollLeft=e},w=function(){if(y&&d){var e=i.type.Array(d)?d:c.slice(0);d=!1;var t=h,n=(h=l.scrollPos())-t;0!==n&&(p=n>0?"FORWARD":"REVERSE"),"REVERSE"===p&&e.reverse(),e.forEach(function(t,n){E(3,"updating Scene "+(n+1)+"/"+e.length+" ("+c.length+" total)"),t.update(!0)}),0===e.length&&u.loglevel>=3&&E(3,"updating 0 Scenes (nothing added to controller)")}},O=function(){o=i.rAF(w)},S=function(e){E(3,"event fired causing an update:",e.type),"resize"==e.type&&(m=_(),p="PAUSED"),!0!==d&&(d=!0,O())},C=function(){if(!f&&m!=_()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){(e=document.createEvent("Event")).initEvent("resize",!1,!1)}u.container.dispatchEvent(e)}c.forEach(function(e,t){e.refresh()}),v()},E=this._log=function(e,t){u.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+a+") ->"),i.log.apply(window,arguments))};this._options=u;var k=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach(function(e,t){l.addScene(e)});else if(t instanceof e.Scene){if(t.controller()!==l)t.addTo(l);else if(c.indexOf(t)<0){for(var n in c.push(t),c=k(c),t.on("shift.controller_sort",function(){c=k(c)}),u.globalSceneOptions)t[n]&&t[n].call(t,u.globalSceneOptions[n]);E(3,"adding Scene (now "+c.length+" total)")}}else E(1,"ERROR: invalid argument supplied for '.addScene()'");return l},this.removeScene=function(e){if(i.type.Array(e))e.forEach(function(e,t){l.removeScene(e)});else{var t=c.indexOf(e);t>-1&&(e.off("shift.controller_sort"),c.splice(t,1),E(3,"removing Scene (now "+c.length+" left)"),e.remove())}return l},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach(function(e,t){l.updateScene(e,n)}):n?t.update(!0):!0!==d&&t instanceof e.Scene&&(-1==(d=d||[]).indexOf(t)&&d.push(t),d=k(d),O()),l},this.update=function(e){return S({type:"resize"}),e&&w(),l},this.scrollTo=function(t,n){if(i.type.Number(t))b.call(u.container,t,n);else if(t instanceof e.Scene)t.controller()===l?l.scrollTo(t.scrollOffset(),n):E(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if(i.type.Function(t))b=t;else{var o=i.get.elements(t)[0];if(o){for(;o.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)o=o.parentNode;var r=u.vertical?"top":"left",a=i.get.offset(u.container),s=i.get.offset(o);f||(a[r]-=l.scrollPos()),l.scrollTo(s[r]-a[r],n)}else E(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",t)}return l},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)?g=e:E(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'."),l):g.call(l)},this.info=function(e){var t={size:m,vertical:u.vertical,scrollPos:h,scrollDirection:p,container:u.container,isDocument:f};return arguments.length?void 0!==t[e]?t[e]:void E(1,'ERROR: option "'+e+'" is not available'):t},this.loglevel=function(e){return arguments.length?(u.loglevel!=e&&(u.loglevel=e),l):u.loglevel},this.enabled=function(e){return arguments.length?(y!=e&&(y=!!e,l.updateScene(c,!0)),l):y},this.destroy=function(e){window.clearTimeout(r);for(var t=c.length;t--;)c[t].destroy(e);return u.container.removeEventListener("resize",S),u.container.removeEventListener("scroll",S),i.cAF(o),E(3,"destroyed "+a+" (reset: "+(e?"true":"false")+")"),null},function(){for(var t in u)s.hasOwnProperty(t)||(E(2,'WARNING: Unknown option "'+t+'"'),delete u[t]);if(u.container=i.get.elements(u.container)[0],!u.container)throw E(1,"ERROR creating object "+a+": No valid scroll container supplied"),a+" init failed.";(f=u.container===window||u.container===document.body||!document.body.contains(u.container))&&(u.container=window),m=_(),u.container.addEventListener("resize",S),u.container.addEventListener("scroll",S),u.refreshInterval=parseInt(u.refreshInterval)||s.refreshInterval,v(),E(3,"added new "+a+" controller (v"+e.version+")")}(),l};var t={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,n){t.defaults[e]=n},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(t){var o,r,a="ScrollMagic.Scene",s=n.defaults,l=this,u=i.extend({},s,t),c="BEFORE",d=0,h={start:0,end:0},p=0,f=!0,m={};this.on=function(e,t){return i.type.Function(t)?(e=e.trim().split(" ")).forEach(function(e){var n=e.split("."),i=n[0],o=n[1];"*"!=i&&(m[i]||(m[i]=[]),m[i].push({namespace:o||"",callback:t}))}):y(1,"ERROR when calling '.on()': Supplied callback for '"+e+"' is not a valid function!"),l},this.off=function(e,t){return e?((e=e.trim().split(" ")).forEach(function(e,n){var i=e.split("."),o=i[0],r=i[1]||"",a="*"===o?Object.keys(m):[o];a.forEach(function(e){for(var n=m[e]||[],i=n.length;i--;){var o=n[i];!o||r!==o.namespace&&"*"!==r||t&&t!=o.callback||n.splice(i,1)}n.length||delete m[e]})}),l):(y(1,"ERROR: Invalid event name supplied."),l)},this.trigger=function(t,n){if(t){var i=t.trim().split("."),o=i[0],r=i[1],a=m[o];y(3,"event fired:",o,n?"->":"",n||""),a&&a.forEach(function(t,i){r&&r!==t.namespace||t.callback.call(l,new e.Event(o,t.namespace,l,n))})}else y(1,"ERROR: Invalid event name supplied.");return l},l.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?w():"reverse"===e.what&&l.update())}).on("shift.internal",function(e){_(),l.update()});var y=this._log=function(e,t){u.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+a+") ->"),i.log.apply(window,arguments))};this.addTo=function(t){return t instanceof e.Controller?r!=t&&(r&&r.removeScene(l),r=t,C(),b(!0),w(!0),_(),r.info("container").addEventListener("resize",O),t.addScene(l),l.trigger("add",{controller:r}),y(3,"added "+a+" to controller"),l.update()):y(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller"),l},this.enabled=function(e){return arguments.length?(f!=e&&(f=!!e,l.update(!0)),l):f},this.remove=function(){if(r){r.info("container").removeEventListener("resize",O);var e=r;r=void 0,e.removeScene(l),l.trigger("remove"),y(3,"removed "+a+" from controller")}return l},this.destroy=function(e){return l.trigger("destroy",{reset:e}),l.remove(),l.off("*.*"),y(3,"destroyed "+a+" (reset: "+(e?"true":"false")+")"),null},this.update=function(e){if(r)if(e)if(r.enabled()&&f){var t,n=r.info("scrollPos");t=u.duration>0?(n-h.start)/(h.end-h.start):n>=h.start?1:0,l.trigger("update",{startPos:h.start,endPos:h.end,scrollPos:n}),l.progress(t)}else v&&"DURING"===c&&P(!0);else r.updateScene(l,!1);return l},this.refresh=function(){return b(),w(),l},this.progress=function(e){if(arguments.length){var t=!1,n=c,i=r?r.info("scrollDirection"):"PAUSED",o=u.reverse||e>=d;if(0===u.duration?(t=d!=e,c=0==(d=e<1&&o?0:1)?"BEFORE":"DURING"):e<0&&"BEFORE"!==c&&o?(d=0,c="BEFORE",t=!0):e>=0&&e<1&&o?(d=e,c="DURING",t=!0):e>=1&&"AFTER"!==c?(d=1,c="AFTER",t=!0):"DURING"!==c||o||P(),t){var a={progress:d,state:c,scrollDirection:i},s=c!=n,h=function(e){l.trigger(e,a)};s&&"DURING"!==n&&(h("enter"),h("BEFORE"===n?"start":"end")),h("progress"),s&&"DURING"!==c&&(h("BEFORE"===c?"start":"end"),h("leave"))}return l}return d};var v,g,_=function(){h={start:p+u.offset},r&&u.triggerElement&&(h.start-=r.info("size")*u.triggerHook),h.end=h.start+u.duration},b=function(e){o&&E("duration",o.call(l))&&!e&&(l.trigger("change",{what:"duration",newval:u.duration}),l.trigger("shift",{reason:"duration"}))},w=function(e){var t=0,n=u.triggerElement;if(r&&n){for(var o=r.info(),a=i.get.offset(o.container),s=o.vertical?"top":"left";n.parentNode.hasAttribute("data-scrollmagic-pin-spacer");)n=n.parentNode;var c=i.get.offset(n);o.isDocument||(a[s]-=r.scrollPos()),t=c[s]-a[s]}var d=t!=p;p=t,d&&!e&&l.trigger("shift",{reason:"triggerElementPosition"})},O=function(e){u.triggerHook>0&&l.trigger("shift",{reason:"containerResize"})},S=i.extend(n.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return r?r.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o())}catch(t){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||e<0)throw o?(o=void 0,['Invalid return value of supplied function for option "duration":',e]):['Invalid value for option "duration":',e];return e}}),C=function(e){(e=arguments.length?[e]:Object.keys(S)).forEach(function(e,t){var n;if(S[e])try{n=S[e](u[e])}catch(t){n=s[e];var o=i.type.String(t)?[t]:t;i.type.Array(o)?(o[0]="ERROR: "+o[0],o.unshift(1),y.apply(this,o)):y(1,"ERROR: Problem executing validation callback for option '"+e+"':",t.message)}finally{u[e]=n}})},E=function(e,t){var n=!1,i=u[e];return u[e]!=t&&(u[e]=t,C(e),n=i!=u[e]),n},k=function(e){l[e]||(l[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),E(e,t)&&(l.trigger("change",{what:e,newval:u[e]}),n.shifts.indexOf(e)>-1&&l.trigger("shift",{reason:e})),l):u[e]})};this.controller=function(){return r},this.state=function(){return c},this.scrollOffset=function(){return h.start},this.triggerPosition=function(){var e=u.offset;return r&&(u.triggerElement?e+=p:e+=r.info("size")*l.triggerHook()),e},l.on("shift.internal",function(e){var t="duration"===e.reason;("AFTER"===c&&t||"DURING"===c&&0===u.duration)&&P(),t&&j()}).on("progress.internal",function(e){P()}).on("add.internal",function(e){j()}).on("destroy.internal",function(e){l.removePin(e.reset)});var P=function(e){if(v&&r){var t=r.info(),n=g.spacer.firstChild;if(e||"DURING"!==c){var o={position:g.inFlow?"relative":"absolute",top:0,left:0},a=i.css(n,"position")!=o.position;g.pushFollowers?u.duration>0&&("AFTER"===c&&0===parseFloat(i.css(g.spacer,"padding-top"))?a=!0:"BEFORE"===c&&0===parseFloat(i.css(g.spacer,"padding-bottom"))&&(a=!0)):o[t.vertical?"top":"left"]=u.duration*d,i.css(n,o),a&&j()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),j());var s=i.get.offset(g.spacer,!0),l=u.reverse||0===u.duration?t.scrollPos-h.start:Math.round(d*u.duration*10)/10;s[t.vertical?"top":"left"]+=l,i.css(g.spacer.firstChild,{top:s.top,left:s.left})}}},j=function(){if(v&&r&&g.inFlow){var e="DURING"===c,t=r.info("vertical"),n=g.spacer.firstChild,o=i.isMarginCollapseType(i.css(g.spacer,"display")),a={};g.relSize.width||g.relSize.autoFullWidth?e?i.css(v,{width:i.get.width(g.spacer)}):i.css(v,{width:"100%"}):(a["min-width"]=i.get.width(t?v:n,!0,!0),a.width=e?a["min-width"]:"auto"),g.relSize.height?e?i.css(v,{height:i.get.height(g.spacer)-(g.pushFollowers?u.duration:0)}):i.css(v,{height:"100%"}):(a["min-height"]=i.get.height(t?n:v,!0,!o),a.height=e?a["min-height"]:"auto"),g.pushFollowers&&(a["padding"+(t?"Top":"Left")]=u.duration*d,a["padding"+(t?"Bottom":"Right")]=u.duration*(1-d)),i.css(g.spacer,a)}},T=function(){r&&v&&"DURING"===c&&!r.info("isDocument")&&P()},R=function(){r&&v&&"DURING"===c&&((g.relSize.width||g.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(g.spacer.parentNode)||g.relSize.height&&i.get.height(window)!=i.get.height(g.spacer.parentNode))&&j()},M=function(e){r&&v&&"DURING"===c&&!r.info("isDocument")&&(e.preventDefault(),r._setScrollPos(r.info("scrollPos")-((e.wheelDelta||e[r.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,t){if(t=i.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},t),!(e=i.get.elements(e)[0]))return y(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),l;if("fixed"===i.css(e,"position"))return y(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),l;if(v){if(v===e)return l;l.removePin()}var n=(v=e).parentNode.style.display,o=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];v.parentNode.style.display="none";var r="absolute"!=i.css(v,"position"),a=i.css(v,o.concat(["display"])),s=i.css(v,["width","height"]);v.parentNode.style.display=n,!r&&t.pushFollowers&&(y(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),t.pushFollowers=!1),window.setTimeout(function(){v&&0===u.duration&&t.pushFollowers&&y(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")},0);var c=v.parentNode.insertBefore(document.createElement("div"),v),d=i.extend(a,{position:r?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(r||i.extend(d,i.css(v,["width","height"])),i.css(c,d),c.setAttribute("data-scrollmagic-pin-spacer",""),i.addClass(c,t.spacerClass),g={spacer:c,relSize:{width:"%"===s.width.slice(-1),height:"%"===s.height.slice(-1),autoFullWidth:"auto"===s.width&&r&&i.isMarginCollapseType(a.display)},pushFollowers:t.pushFollowers,inFlow:r},!v.___origStyle){v.___origStyle={};var h=v.style,p=o.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]);p.forEach(function(e){v.___origStyle[e]=h[e]||""})}return g.relSize.width&&i.css(c,{width:s.width}),g.relSize.height&&i.css(c,{height:s.height}),c.appendChild(v),i.css(v,{position:r?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(g.relSize.width||g.relSize.autoFullWidth)&&i.css(v,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",T),window.addEventListener("resize",T),window.addEventListener("resize",R),v.addEventListener("mousewheel",M),v.addEventListener("DOMMouseScroll",M),y(3,"added pin"),P(),l},this.removePin=function(e){if(v){if("DURING"===c&&P(!0),e||!r){var t=g.spacer.firstChild;if(t.hasAttribute("data-scrollmagic-pin-spacer")){var n=g.spacer.style;margins={},["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach(function(e){margins[e]=n[e]||""}),i.css(t,margins)}g.spacer.parentNode.insertBefore(t,g.spacer),g.spacer.parentNode.removeChild(g.spacer),v.parentNode.hasAttribute("data-scrollmagic-pin-spacer")||(i.css(v,v.___origStyle),delete v.___origStyle)}window.removeEventListener("scroll",T),window.removeEventListener("resize",T),window.removeEventListener("resize",R),v.removeEventListener("mousewheel",M),v.removeEventListener("DOMMouseScroll",M),v=void 0,y(3,"removed pin (reset: "+(e?"true":"false")+")")}return l};var x,N=[];return l.on("destroy.internal",function(e){l.removeClassToggle(e.reset)}),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(N.length>0&&l.removeClassToggle(),x=t,N=n,l.on("enter.internal_class leave.internal_class",function(e){var t="enter"===e.type?i.addClass:i.removeClass;N.forEach(function(e,n){t(e,x)})}),l):(y(1,"ERROR calling method 'setClassToggle()': Invalid "+(0===n.length?"element":"classes")+" supplied."),l)},this.removeClassToggle=function(e){return e&&N.forEach(function(e,t){i.removeClass(e,x)}),l.off("start.internal_class end.internal_class"),x=void 0,N=[],l},function(){for(var e in u)s.hasOwnProperty(e)||(y(2,'WARNING: Unknown option "'+e+'"'),delete u[e]);for(var t in s)k(t);C()}(),l};var n={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw['Invalid value for option "offset":',e];return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t)throw['Element defined in option "triggerElement" was not found:',e];e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw['Invalid value for option "triggerHook": ',e];e=t[e]}return e},reverse:function(e){return!!e},loglevel:function(e){if(e=parseInt(e),!i.type.Number(e)||e<0||e>3)throw['Invalid value for option "loglevel":',e];return e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(t,i,o,r){t in n.defaults?e._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+t+"', because it already exists."):(n.defaults[t]=i,n.validate[t]=o,r&&n.shifts.push(t))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,i){for(var o in i=i||{})this[o]=i[o];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},i=function(e){return parseFloat(e)||0},o=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},r=function(t,n,r,a){if((n=n===document?e:n)===e)a=!1;else if(!f.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var s=(r?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(r&&a){var l=o(n);s+="Height"===t?i(l.marginTop)+i(l.marginBottom):i(l.marginLeft)+i(l.marginRight)}return s},a=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var s=0,l=["ms","moz","webkit","o"],u=e.requestAnimationFrame,c=e.cancelAnimationFrame;for(t=0;!u&&t<l.length;++t)u=e[l[t]+"RequestAnimationFrame"],c=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];u||(u=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-s)),o=e.setTimeout(function(){t(n+i)},i);return s=n+i,o}),c||(c=function(t){e.clearTimeout(t)}),n.rAF=u.bind(e),n.cAF=c.bind(e);var d=["error","warn","log"],h=e.console||{};for(h.log=h.log||function(){},t=0;t<d.length;t++){var p=d[t];h[p]||(h[p]=h.log)}n.log=function(e){(e>d.length||e<=0)&&(e=d.length);var t=new Date,n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+":"+("00"+t.getMilliseconds()).slice(-3),i=d[e-1],o=Array.prototype.splice.call(arguments,1),r=Function.prototype.bind.call(h[i],h);o.unshift(n),r.apply(h,o)};var f=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};f.String=function(e){return"string"===f(e)},f.Function=function(e){return"function"===f(e)},f.Array=function(e){return Array.isArray(e)},f.Number=function(e){return!f.Array(e)&&e-parseFloat(e)+1>=0},f.DomElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var m=n.get={};return m.elements=function(t){var n=[];if(f.String(t))try{t=document.querySelectorAll(t)}catch(e){return n}if("nodelist"===f(t)||f.Array(t))for(var i=0,o=n.length=t.length;i<o;i++){var r=t[i];n[i]=f.DomElement(r)?r:m.elements(r)}else(f.DomElement(t)||t===document||t===e)&&(n=[t]);return n},m.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},m.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},m.width=function(e,t,n){return r("width",e,t,n)},m.height=function(e,t,n){return r("height",e,t,n)},m.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect();n.top=i.top,n.left=i.left,t||(n.top+=m.scrollTop(),n.left+=m.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(f.String(t))return o(e)[a(t)];if(f.Array(t)){var n={},i=o(e);return t.forEach(function(e,t){n[e]=i[a(e)]}),n}for(var r in t){var s=t[r];s==parseFloat(s)&&(s+="px"),e.style[a(r)]=s}},n}(window||{});return e.Scene.prototype.addIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.removeIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.setTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.removeTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.setVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e.Scene.prototype.removeVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e})?i.call(t,n,t,e):i)||(e.exports=o)},491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gaTrackEventWithoutCategory=t.registerGoogleAnalytics=void 0;var i,o=n(1),r=(i=o)&&i.__esModule?i:{default:i};t.registerGoogleAnalytics=function(e){(0,r.default)("[data-ga-track]").click(function(t){var n=(0,r.default)(t.currentTarget).data("ga-track"),i=void 0,o=void 0;n&&(i=(n=n.split("-"))[0],n.length>1&&(o=n[1])),window._gaTrackEvent(i,o,e)})},t.gaTrackEventWithoutCategory=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];window._gaTrackEvent&&window._gaTrackEvent.apply(null,t)}},5:function(e,t){e.exports=Decimal},50:function(e,t,n){var i,o,r;
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */o=[n(1)],void 0===(r="function"==typeof(i=function(e){var t=/\+/g;function n(e){return o.raw?e:encodeURIComponent(e)}function i(n,i){var r=o.raw?n:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),o.json?JSON.parse(e):e}catch(e){}}(n);return e.isFunction(i)?i(r):r}var o=e.cookie=function(t,r,a){if(void 0!==r&&!e.isFunction(r)){if("number"==typeof(a=e.extend({},o.defaults,a)).expires){var s=a.expires,l=a.expires=new Date;l.setTime(+l+864e5*s)}return document.cookie=[n(t),"=",function(e){return n(o.json?JSON.stringify(e):String(e))}(r),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var u,c=t?void 0:{},d=document.cookie?document.cookie.split("; "):[],h=0,p=d.length;h<p;h++){var f=d[h].split("="),m=(u=f.shift(),o.raw?u:decodeURIComponent(u)),y=f.join("=");if(t&&t===m){c=i(y,r);break}t||void 0===(y=i(y))||(c[m]=y)}return c};o.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}})?i.apply(t,o):i)||(e.exports=r)},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PROCESSOR_CONSTANTS={ALIPAY:"alipay",YOOMONEY:"yandex",GOOGLEWALLET:"wallet",ALIPAY_PAYMENT_INTENT:"alipay_payment_intent",AMAZONHP:"amazonhp",SIMULATOR:"simulator",PAYPAL:"paypal",STRIPE_PAYMENT_INTENT:"stripe_payment_intent",STRIPE_CHECKOUT:"stripe_checkout",FREE:"free",IDEAL:"ideal",SOFORT:"sofort",STRIPE:"stripe",COINBASE:"coinbase",HUMBLEWALLET:"humblewallet",STORED_CREDENTIAL:"stored_credential"}},558:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PartnerLinkGeneratorView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(116),a=(i=r)&&i.__esModule?i:{default:i},s=n(483),l=n(472),u=n(470),c=n(469);(t.PartnerLinkGeneratorView=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.XPromoBannerView),o(n,[{key:"initialize",value:function(t){this.productUrl=t.productUrl,this.partners=new l.PartnerCollection,this.partnerSettings=new u.PartnerSettings,e(window).resize(this.changeHiddenIfNecessary.bind(this))}},{key:"fetchPartnerLink",value:function(e){var t=this;window._gaTrackEventNoninteractive("Partner Link Generator","Fetched partner link"),this.partner||this.partners.fetchIfNeeded(function(){t.partner=t.partners.at(0),t.partnerSettings.set("currentPartner",t.partner),t.$(".partner-fetch-button").remove(),t.updateClipboardButton()}),this.partnerListView||(this.partnerListView=new c.PartnerListView({collection:this.partners,settings:this.partnerSettings})),this.$(".partner-list-container").html(this.partnerListView.render()),this.render()}},{key:"changePartner",value:function(t){t.preventDefault();var n=e(t.currentTarget).attr("id"),i=this.partners.get(n);this.partnerSettings.set("currentPartner",i),this.partner=i,this.updateClipboardButton()}},{key:"updateClipboardButton",value:function(){var e=window.location.origin,t=window.location.pathname,n=this.partner.getUrlParam();this.partnerLink=""+e+t+n,this.$(".partner-link-button").html('<a class="partner-link-button partner-button js-clipboard-button button blue" data-clipboard-text="'+this.partnerLink+'">Copy Partner Link</a>'),new a.default(".js-clipboard-button")}},{key:"notifyCopy",value:function(){this.$(".partner-link-copied-popup").text("Copied").show().delay(1500).fadeOut()}},{key:"showUrl",value:function(){this.$(".partner-link-preview-popup").text(this.partnerLink).show()}},{key:"hideUrl",value:function(){this.$(".partner-link-preview-popup").fadeOut()}},{key:"onReveal",value:function(){this.changeHiddenIfNecessary()}},{key:"changeHiddenIfNecessary",value:function(){window.innerWidth<795?this.$bannerEl.addClass("is-hidden"):(this.$bannerEl.removeClass("is-hidden"),this.$bannerEl.slideDown({duration:500,easing:"linear"}))}}]),n}()).prototype.events={"click .js-partner-fetch":"fetchPartnerLink","click .change-partner":"changePartner","click .js-clipboard-button":"notifyCopy","mouseover .js-clipboard-button":"showUrl","mouseout .js-clipboard-button":"hideUrl"}}).call(this,n(1))},559:function(e,t){e.exports='<h1><%- gtxt(\'Steam Link Required\') %></h1>\n<p class="message-holder">\n<% if (isProductFree) { %>\n  <%- gtxt(\'Before you can redeem your free copy of {product_name}, you must link your Steam account to your Humble Bundle account.\').format({product_name: productHumanName}) %>\n<% } else { %>\n  <%- gtxt(\'Before you can purchase your copy of {product_name}, you must link your Steam account to your Humble Bundle account.\').format({product_name: productHumanName}) %>\n<% } %>\n</p>\n<div class="no-center">\n  <div class="button-holder">\n    <a class="button-link cancel js-close-modal" href="#"><span class="gray-button"><%- gtxt(\'Cancel\') %></span></a>\n    <a class="button-link" href="/steam/link?redirect=<%= productRedirect %>"><span class="green-button"><%- gtxt(\'Link Steam Account\') %></span></a>\n  </div>\n</div>\n'},560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSteamLinkProductModal=void 0;var i=a(n(559)),o=n(29),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}(t.AccountSteamLinkProductModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseModal),t}()).prototype.template=r.default.template(i.default)},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.twitchStreamInit=function(e,t){if(t.show_stream){var n=i(e,t),r=o(n);document.body.appendChild(r)}};var i=function(e,t){return function(){var n=new window.Twitch.Embed(e,{channel:t.twitch_channel,video:t.twitch_vod,layout:"video",theme:"dark",width:t.twitch_width||"100%",height:t.twitch_height||"100%",autoplay:t.autoplay||!1});n.addEventListener(window.Twitch.Embed.VIDEO_READY,function(){n.getPlayer().setVolume(0)})}},o=function(e){var t=document.createElement("script");return t.src="//embed.twitch.tv/embed/v1.js",t.async=!0,t.onload=e,t}},599:function(e,t){e.exports='<div class="purchase-in-progress-spinner js-purchase-in-progress-spinner">\n  <img src="https://humblebundle-a.akamaihd.net/static/hashed/26faf55c6e36ba3b1a57f9001942059fe05050f2.gif" alt=""/>\n  Processing...\n</div>\n\n<div class="payment-options-container">\n  <% if (previousOptions) { %>\n    <div class="payment-button-wrapper">\n      <button\n        class="simple-payment-button js-show-more-button processor-button"\n        data-previous="true"\n        title="<%- gtxt(\'Previous payment options\') %>"\n        aria-label="<%- gtxt(\'Previous payment options\') %>"\n      >\n        <i class="hb hb-menu"></i>\n      </button>\n   </div>\n  <% } %>\n  <% _.each(processors, function(processor) { %>\n  <div class="payment-button-wrapper<% if (isSingleOption) { %> payment-full-width<% } %>">\n    <button type="button"\n            class="<%= processor.escape(\'className\') %> js-payment-button processor-button"\n          <% if (processor.get(\'alipayImage\')) { %>\n            style="background-image: url(https://humblebundle-a.akamaihd.net/static/hashed/6e104181dc93b5f386d1549d78bd421ca8ed1d92.png)"\n          <% } else if (processor.get(\'idealImage\')) { %>\n            style="background-image: url(https://humblebundle-a.akamaihd.net/static/hashed/f918d227b8b4d463fe3afb625a6d35ca7cdba111.png)"\n          <% } else if (processor.get(\'sofortImage\')) { %>\n            style="background-image: url(https://humblebundle-a.akamaihd.net/static/hashed/ec2cfbfe1d0545a1c3a2318f0d510f897df788f4.png)"\n          <% } %>\n            data-processor="<%- processor.id %>">\n    <% if (processor.get(\'icon\')) { %>\n      <i class="hb hb-<%= processor.escape(\'icon\') %>"></i>\n    <% } %>\n    <% if (processor.get(\'text\')) { %>\n      <%= processor.get(\'text\') %>\n    <% } else if (processor.get(\'alipayImage\')) { %>\n        <span class="sr-only"><%- gtxt(\'Pay with Alipay\') %></span>\n    <% } %>\n    </button>\n    <% if (processor.get(\'credentialText\')) { %>\n      <div heap-ignore="true" class="stored-payment-text"><%= processor.escape(\'credentialText\') %></div>\n    <% } %>\n  </div>\n  <% }) %>\n  <% if (moreModalOptions) { %>\n  <div class="payment-button-wrapper">\n    <button type="button" class="simple-payment-button js-show-more-button processor-button">\n      <i class="hb hb-menu"></i> <%- gtxt(\'More Payment Options\') %>\n    </button>\n  </div>\n  <% } %>\n  <% if (nextOptions) { %>\n    <div class="payment-button-wrapper">\n      <button\n        class="simple-payment-button js-show-more-button processor-button"\n        data-next="true"\n        aria-label="<%- gtxt(\'More payment options\') %>"\n        title="<%- gtxt(\'More payment options\') %>"\n      >\n        <i class="hb hb-menu"></i>\n      </button>\n   </div>\n  <% } %>\n</div>\n'},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentProcessors=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(2)),r=l(n(0)),a=n(53),s=n(9);function l(e){return e&&e.__esModule?e:{default:e}}var u={};u[a.PROCESSOR_CONSTANTS.YOOMONEY]={order:10,text:(0,s.gtxt)("<span {attrs}>YooMoney</span>").format({attrs:'class="yoomoney-logo"'}),className:"yoomoney-payment-button"},u[a.PROCESSOR_CONSTANTS.PAYPAL]={order:11,text:(0,s.gtxt)('Pay with <span class="paypal-logo">Paypal</span>'),className:"paypal-payment-button"},u[a.PROCESSOR_CONSTANTS.STRIPE_CHECKOUT]={order:12,icon:"stripe",text:(0,s.gtxt)("Pay with card"),className:"stripe-payment-button",processor:a.PROCESSOR_CONSTANTS.STRIPE},u[a.PROCESSOR_CONSTANTS.AMAZONHP]={order:13,icon:"amazon",text:(0,s.gtxt)("Pay with Amazon"),className:"amazon-payment-button"},u[a.PROCESSOR_CONSTANTS.IDEAL]={order:14,className:"image-payment-button",processor:a.PROCESSOR_CONSTANTS.STRIPE,idealImage:!0},u[a.PROCESSOR_CONSTANTS.SOFORT]={order:15,className:"image-payment-button",processor:a.PROCESSOR_CONSTANTS.STRIPE,sofortImage:!0},u[a.PROCESSOR_CONSTANTS.ALIPAY]={order:16,alipayImage:!0,processor:a.PROCESSOR_CONSTANTS.STRIPE,className:"image-payment-button"},u[a.PROCESSOR_CONSTANTS.SIMULATOR]={order:17,text:"Simulator",className:"payment-simulator-button"},u[a.PROCESSOR_CONSTANTS.FREE]={order:18,className:"free-payment-button",text:(0,s.gtxt)("Get it for free!")},u[a.PROCESSOR_CONSTANTS.HUMBLEWALLET]={order:19,className:"humblewallet-payment-button",text:(0,s.gtxt)("Purchase")};var c=t.PaymentProcessors=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Collection),i(t,[{key:"generateProcessors",value:function(e,t,n){"US"===n&&this.US_ORDER_OVERRIDE.forEach(function(e,t){u[e].order=t}),"RU"===n&&this.YOOMONEY_ORDER_OVERRIDE.forEach(function(e,t){u[e].order=t}),r.default.includes(this.ALIPAY_REGIONS,n)&&this.ALIPAY_ORDER_OVERRIDE.forEach(function(e,t){u[e].order=t});var i=e.map(function(e){if(u[e])return r.default.assignIn(u[e],{id:e})});if(t&&e.indexOf(t.processor)>-1){var o="stored-payment-button",l=t.processor===a.PROCESSOR_CONSTANTS.PAYPAL,c=t.processor===a.PROCESSOR_CONSTANTS.YOOMONEY,d=(0,s.gtxt)("Pay instantly with card");l?d=(0,s.gtxt)('Pay instantly with <span class="paypal-logo">Paypal</span>'):c&&(o="stored-payment-button yoomoney-payment-button",d=(0,s.gtxt)("Pay instantly with <span {attrs}>YooMoney</span>").format({attrs:'class="yoomoney-logo"'}));var h={order:-1,id:a.PROCESSOR_CONSTANTS.STORED_CREDENTIAL,text:d,className:o,credentialText:t.text};i.push(h)}this.add(r.default.compact(i))}},{key:"getDefaults",value:function(e){if(!this.defaults){var t=this.HIDE;e||(t+=this.NON_DEFAULT),this.defaults=this.reject(function(e){return t.indexOf(e.id)>-1})}return this.defaults}}]),t}();c.prototype.comparator="order",c.prototype.NON_DEFAULT=[a.PROCESSOR_CONSTANTS.AMAZONHP,a.PROCESSOR_CONSTANTS.ALIPAY],c.prototype.HIDE=[a.PROCESSOR_CONSTANTS.FREE,a.PROCESSOR_CONSTANTS.HUMBLEWALLET],c.prototype.US_ORDER_OVERRIDE=[a.PROCESSOR_CONSTANTS.STRIPE_CHECKOUT,a.PROCESSOR_CONSTANTS.PAYPAL,a.PROCESSOR_CONSTANTS.AMAZONHP],c.prototype.ALIPAY_ORDER_OVERRIDE=[a.PROCESSOR_CONSTANTS.ALIPAY,a.PROCESSOR_CONSTANTS.PAYPAL,a.PROCESSOR_CONSTANTS.STRIPE_CHECKOUT],c.prototype.YOOMONEY_ORDER_OVERRIDE=[a.PROCESSOR_CONSTANTS.YOOMONEY,a.PROCESSOR_CONSTANTS.STRIPE_CHECKOUT,a.PROCESSOR_CONSTANTS.PAYPAL],c.prototype.ALIPAY_REGIONS=["CN","HK","JP","MO","TW"]},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentOptionsView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=h(n(3)),r=h(n(1)),a=h(n(0)),s=n(600),l=h(n(599)),u=n(53),c=n(25),d=n(4);function h(e){return e&&e.__esModule?e:{default:e}}var p=t.PaymentOptionsView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.hasFreeContent=e.hasFreeContent,this.setDefaultPaymentCredential(e.paymentCredentials);var t=(0,d.isDefaultVersion)(),n=(0,d.isDebugUnsafe)();this.shouldShowAll=t||n,this.listenTo(this.model,"change:in_progress",this.updateLoadingView.bind(this)),this.isOrderAdder=e.isOrderAdder}},{key:"generateProcessorCollection",value:function(e,t){this.collection=new s.PaymentProcessors,this.collection.generateProcessors(e,this.defaultPaymentCredential,t)}},{key:"setDefaultPaymentCredential",value:function(e){var t=this.getSupportedDefaultPaymentCredential(e);if(t){this.defaultPaymentCredential=t,this.defaultPaymentCredentialUid=this.defaultPaymentCredential.credentials_uid;var n=this.defaultPaymentCredential.credentials_name;/^\d{4}$/.test(n)?this.defaultPaymentCredential.text="Ending in: "+n:n.length>21?this.defaultPaymentCredential.text="Account: "+n.slice(0,18)+"...":this.defaultPaymentCredential.text="Account: "+n}}},{key:"getSupportedDefaultPaymentCredential",value:function(e){if(e){var t=e.filter(function(e){return e.credentials_type!==u.PROCESSOR_CONSTANTS.ALIPAY})[0];if(t&&this.isSupportedDefaultPaymentCredential(t))return t}}},{key:"isSupportedDefaultPaymentCredential",value:function(e){return a.default.includes([u.PROCESSOR_CONSTANTS.STRIPE,u.PROCESSOR_CONSTANTS.PAYPAL,u.PROCESSOR_CONSTANTS.YOOMONEY],e.credentials_type)}},{key:"showMoreOptions",value:function(){console.error("showMoreOptions: not implemented")}},{key:"getProcessors",value:function(){console.error("getProcessors: not implemented")}},{key:"isSetToFree",value:function(){return this.hasFreeContent&&this.model.get("price")&&this.model.get("price").isZero()}},{key:"onClickSubmit",value:function(e){(0,c.logPageViewEvent)("payment-button-clicked"),this.submit((0,r.default)(e.currentTarget).data("processor"))}},{key:"submit",value:function(e){var t=this.collection.get(e);this.model.set("selected_processor",{processor:t.escape("processor")||t.id,paymentType:t.get("processor")?t.id:void 0}),this.model.trigger("change:submit_form"),this.modalView&&this.modalView.closeModal()}},{key:"hideOrderButtons",value:function(){this.ui.paymentOptions.hide(),this.ui.loadingSpinner.show()}},{key:"isMoreModalOptions",value:function(){return!1}},{key:"isSingleOption",value:function(){return this.isSetToFree()&&this.collection.get(u.PROCESSOR_CONSTANTS.FREE)||this.model.get("price")&&this.model.get("wallet_money")&&this.model.get("price").currencyMatches(this.model.get("wallet_money"))&&this.model.get("wallet_money").sub(this.model.get("price")).gte(0)}},{key:"getStoreOptions",value:function(){return{}}},{key:"showOrderButtons",value:function(){this.ui.loadingSpinner.hide(),this.ui.paymentOptions.show()}},{key:"updateLoadingView",value:function(){this.model.get("in_progress")?this.hideOrderButtons():this.showOrderButtons()}},{key:"serializeData",value:function(){var e=this.getProcessors(),t=!this.isSetToFree()&&this.isMoreModalOptions(e),n=this.getStoreOptions();return{processors:e,moreModalOptions:t,nextOptions:n.nextOptions,previousOptions:n.previousOptions,isSingleOption:this.isSingleOption()}}}]),t}();p.prototype.template=a.default.template(l.default),p.prototype.events={"click .js-show-more-button":"showMoreOptions","click .js-payment-button":"onClickSubmit"},p.prototype.ui={loadingSpinner:".purchase-in-progress-spinner",paymentOptions:".payment-options-container"}},602:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseGiftView=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),a=(i=r)&&i.__esModule?i:{default:i};(t.BaseGiftView=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.View),o(n,[{key:"initialize",value:function(){this.model.on("change:gift_link change:gift_selected change:gifting_available change:gift_anonymous",this.render),this.model.on("change:gifting_available",function(e){e.get("gifting_available")||e.set("gift_selected",!1)})}},{key:"clickGiftLink",value:function(){this.model.set("gift_link",!this.model.get("gift_link"))}},{key:"selectGift",value:function(t){this.model.get("gifting_available")&&this.model.set("gift_selected",e(t.currentTarget).prop("checked"))}},{key:"getOrderFormParameters",value:function(){var e={gift:this.model.get("gift_selected")?"on":null};return this.model.get("gift_selected")&&(this.model.get("gift_link")||(e.gift_email=this.$("#gift_email").val(),this.model.get("gift_anonymous")&&(e.gift_anonymous="on"))),e}},{key:"clickAnonymous",value:function(){this.model.set("gift_anonymous",!this.model.get("gift_anonymous"))}}]),n}()).prototype.events={"change .js-gift-box":"selectGift","click .js-gift-link":"clickGiftLink","click .js-gift-anonymous":"clickAnonymous"}}).call(this,n(1))},603:function(e,t){e.exports="<div class=\"charity-account-cta-message\">\n      <p>\n<% if (success) { %>\n      <%= gtxt('<strong>Selection updated.</strong> Your selection has been saved to your account for future purchases.') %>\n<% } else { %>\n      <%= gtxt('<strong>An error occurrred while saving your charity selection.</strong> However, your selection is still set for your current purchase.') %>\n<% } %>\n      </p>\n</div>\n"},604:function(e,t){e.exports='<div class="charity-support">\n  <div class="charity-highlight">\n  <% if (typeof logoUrl !== \'undefined\' && typeof humanName !== \'undefined\') { %>\n    <div class="charity-item">\n      <div class="charity-image-wrapper charity-img js-selected-charity-info" style="background-image:url(<%- logoUrl %>)"></div>\n      <div class="bottom-right js-cyoc-cta"><i class="hb hb-pencil charity-edit"></i></div>\n    </div>\n    <div class="charity-description">\n      <h4><%= humanName %></h4>\n      <p>\n        <%= gtxt(\'If you would like to support a different charity, <a href="javascript:void(0)" class="js-cyoc-cta">select a new one</a> from our database of thousands.\') %>\n      </p>\n    </div>\n  <% } else { %>\n    <div class="charity-item none-chosen">\n      <div class="charity-image-wrapper charity-img" style="background-color: grey;text-align: center;font-size: 24px;"><%- gtxt(\'Select a charity\') %></div>\n      <div class="bottom-right js-cyoc-cta"><i class="hb hb-pencil charity-edit"></i></div>\n    </div>\n    <div class="charity-description">\n      <p>\n        <%= gtxt(\'If you would like to support a different charity, <a href="javascript:void(0)" class="js-cyoc-cta">select a new one</a> from our database of thousands.\') %>\n      </p>\n    </div>\n  <% } %>\n</div>\n'},605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharityCTAView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=p(n(2)),r=p(n(1)),a=p(n(0)),s=n(360),l=p(n(604)),u=p(n(603)),c=n(194),d=n(406),h=n(4);function p(e){return e&&e.__esModule?e:{default:e}}var f=t.CharityCTAView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.user=e.user,this.featuredCharityId=e.featuredCharityId,this.constants=e.constants,this.isModal=e.isModal,this.charities=e.charities,this.initializeCharity(),this.charityCTAMessageTemplate=a.default.template(u.default),this.listenTo(this.user,"change:charity_id",this.updateCharity),this.listenTo(this.user,"change:charity_api_success",this.handleAPISuccess),(0,r.default)(window).bind("beforeunload",this.saveToLocalstorage.bind(this))}},{key:"initializeCharity",value:function(){var e=this.user.get("charity_id");if(this.user.featuredCharityId=this.featuredCharityId,this.isCharityAllowed(e)&&(this.model=this.charities.get(e)),!this.model){var t=this.loadFromLocalstorage();this.isCharityAllowed(t)&&(this.model=this.charities.get(t)),this.model?this.user.set("charity_id",t):this.isCharityAllowed(this.featuredCharityId)&&(this.user.set("charity_id",this.featuredCharityId),this.model=this.charities.get(this.user.get("charity_id")))}}},{key:"isCharityAllowed",value:function(e){return e&&!a.default.includes(this.constants.disallowed_charity_ids,e)}},{key:"loadFromLocalstorage",value:function(){return(0,h.getLocalStorage)().getItem(this.LOCALSTORAGE_KEY)}},{key:"saveToLocalstorage",value:function(){(0,h.getLocalStorage)().setItem(this.LOCALSTORAGE_KEY,this.user.get("charity_id"))}},{key:"updateCharity",value:function(){this.model=this.charities.get(this.user.get("charity_id")),this.modal&&this.modal.destroy(),this.render()}},{key:"displayCharitySelector",value:function(){this.modal=new d.CharitySelectionModal({page_size:s.BODY_SEARCH_PAGE_SIZE,constants:this.constants,collection:this.charities,user:this.user,isModal:this.isModal}),this.modal.render(),this.modal.$(".js-charity-results").append(this.modal.charitySearchResultsView.render())}},{key:"displayCharityInfo",value:function(){this.model&&new c.CharityDetailsView({constants:this.constants,model:this.model,user:this.user}).render()}},{key:"handleAPISuccess",value:function(){this.$el.append(this.charityCTAMessageTemplate({success:this.user.get("charity_api_success")}));var e=(0,r.default)(".charity-account-cta-message").clearQueue();e.animate({bottom:0},100),e.delay(5e3),e.animate({bottom:-100},300,"linear",function(){(0,r.default)(".charity-account-cta-message").remove()}),this.user.set("charity_api_success",null,{silent:!0})}},{key:"render",value:function(){return this.model?(this.$el.html(this.template({humanName:this.model.get("human_name"),logoUrl:this.model.get("logo_url")})),(0,h.preloadBackgroundImageWithDefault)(this.$(".charity-img"),s.DEFAULT_CHARITY_IMAGE)):this.$el.html(this.template()),this}}]),t}();f.prototype.events={"click .js-cyoc-cta":"displayCharitySelector","click .js-selected-charity-info":"displayCharityInfo"},f.prototype.LOCALSTORAGE_KEY="charity_id",f.prototype.template=a.default.template(l.default)},606:function(e,t){e.exports='<div class="sticky-navbar s-hidden js-sticky-navbar">\n  <div class="u-navbar-constrain-width">\n    <div class="dd-navbar-row js-dd-navbar-row">\n      <div class="remindme-countdown-container">\n        <div class="js-dd-navbar-remindme-button"></div>\n        <div class="js-dd-navbar-countdown-view"></div>\n      </div>\n      <div class="dd-navbar-button-list js-dd-navbar-button-list">\n<% _.each(sectionNames, function(sectionName, index) { %>\n        <div class="dd-navbar-button js-dd-navbar-button"\n             data-index="<%= index %>" data-button-label="<%= sectionName.replace(/\\s/g, \'-\').toLowerCase() %>">\n          <a class="section-name no-style-link" href=\'javascript:void(0)\'><%= sectionName %>\n\n  <% // TODO ENG-18693: Potentially remove deliveryMethodLists and platformLists %>\n  <% _.each(deliveryMethodLists[index], function(deliveryMethod) {\n      var methodDefinition = PlatformAndDelivery.delivery_method_definition_dict[deliveryMethod];\n      if (methodDefinition) { %>\n            <i class="operating-system hb <%- methodDefinition.icon %>" title="<%- methodDefinition.human_name %>"></i>\n  <% } }); %>\n  <% _.each(platformLists[index], function(platform) {\n      var platformDefinition = PlatformAndDelivery.platform_definition_dict[platform];\n      if (platformDefinition) { %>\n            <i class="operating-system hb <%- platformDefinition.icon %>" title="<%- platformDefinition.human_name %>"></i>\n  <% } }); %>\n          </a>\n        </div>\n<% }); %>\n      </div>\n    </div>\n    <div class="u-clear"></div>\n  </div>\n</div>\n'},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyNavbarView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(3)),r=l(n(1)),a=l(n(0)),s=l(n(606));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.StickyNavbarView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.$siteNavbar=(0,r.default)(".js-navbar"),this.listenTo(this.model,"change:highlightedSectionIndex",this.onHighlightedSectionChange),this.listenTo(this.model,"change:showing",this.onShowingChange)}},{key:"onSectionClicked",value:function(e){var t=(0,r.default)(e.currentTarget).data("index");this.model.scrollToSection(t)}},{key:"onHighlightedSectionChange",value:function(e){this.ui.navbarButtons.removeClass("s-selected");var t=e.changed.highlightedSectionIndex;void 0===t?e.set("showing",!1):(e.set("showing",!0),this.ui.navbarButtons.eq(t).addClass("s-selected"))}},{key:"onShowingChange",value:function(e){e.changed.showing?(this.ui.navbar.removeClass("s-hidden").addClass("s-fixed js-maintain-scrollbar-on-dropdown"),this.$siteNavbar&&this.$siteNavbar.addClass("hide-box-shadow")):(this.ui.navbar.removeClass("s-fixed js-maintain-scrollbar-on-dropdown").addClass("s-hidden"),this.$siteNavbar&&this.$siteNavbar.removeClass("hide-box-shadow"))}}]),t}();u.prototype.events={"click .js-dd-navbar-button":"onSectionClicked"},u.prototype.template=a.default.template(s.default),u.prototype.ui={countdownEl:".js-dd-navbar-countdown-view",navbar:".js-sticky-navbar",navbarRow:".js-dd-navbar-row",navbarButtons:".js-dd-navbar-button",remindMeEl:".js-dd-navbar-remindme-button"}},608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickyNavbarModel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=c(n(2)),r=c(n(1)),a=c(n(0)),s=c(n(490)),l=c(n(370)),u=n(43);function c(e){return e&&e.__esModule?e:{default:e}}t.StickyNavbarModel=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{sections:[],showing:!1,navbarHeightPx:50,deliveryMethodLists:[],platformLists:[],PlatformAndDelivery:u.PLATFORM_AND_DELIVERY_CONSTANTS}}},{key:"initialize",value:function(){var e=(0,r.default)(".js-navbar");this.totalNavHeightPx=e.outerHeight(!0)+this.get("navbarHeightPx"),this.initializeScrollMagic()}},{key:"initializeScrollMagic",value:function(){var e=this;this.scrollMagicController=new s.default.Controller;var t={triggerHook:.35,offset:this.totalNavHeightPx/-2};if(this.get("hiddenArea")){var n=new s.default.Scene(a.default.defaults({triggerElement:this.get("hiddenArea")},t));n.on("enter",function(){e.set("showing",!1)}),n.on("leave",function(){e.set("showing",!0)}),this.addScrollMagicScene(n)}a.default.each(this.get("sections"),function(n,i){var o=new s.default.Scene(a.default.defaults({triggerElement:n},t));o.on("enter",function(){e.set("highlightedSectionIndex",i)}),0===i?o.on("leave",function(){e.unset("highlightedSectionIndex")}):o.on("leave",function(){e.set("highlightedSectionIndex",i-1)}),e.addScrollMagicScene(o)})}},{key:"addScrollMagicScene",value:function(e){e.addTo(this.scrollMagicController)}},{key:"scrollToSection",value:function(e){var t=(0,r.default)(this.get("sections")[e]),n=t.outerHeight(!0),i=window.innerHeight-this.totalNavHeightPx,o=t.offset().top-this.totalNavHeightPx,a=o;n<=i&&(a+=(i-n)/-2,a=Math.min(a+.15*window.innerHeight,o)),l.default.toY(a,500)}}]),t}()},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullCaptcha=t.Recaptcha2=t.CreateCaptcha=t.initCaptcha=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),a=(i=r)&&i.__esModule?i:{default:i},s=n(77);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.runOnCaptchaLoaded=[];t.initCaptcha=function(){(0,a.default)(window).load(function(){window.on_captcha_loaded=function(){if(window.runOnCaptchaLoaded)for(var e=window.runOnCaptchaLoaded.length-1;e>=0;e--)window.runOnCaptchaLoaded[e](),window.runOnCaptchaLoaded.pop()};var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="https://www.recaptcha.net/recaptcha/api.js?render=explicit&onload=on_captcha_loaded&hl="+window.humble.locale,t.parentNode.insertBefore(e,t)})},t.CreateCaptcha=function(e,t,n){return window.models&&window.models.request.captcha_enabled?new u(e,t,n):new c(e,t,n)};var u=t.Recaptcha2=function(){function e(t,n,i){l(this,e),t&&this.render(t,n,i)}return o(e,[{key:"getSitekey",value:function(e){return e?window.production?s.CAPTCHA_CONSTANTS.grecaptcha.PROD_INVISIBLE_SITEKEY:s.CAPTCHA_CONSTANTS.grecaptcha.LOCAL_INVISIBLE_SITEKEY:window.production?s.CAPTCHA_CONSTANTS.grecaptcha.PROD_SITEKEY:s.CAPTCHA_CONSTANTS.grecaptcha.LOCAL_SITEKEY}},{key:"render",value:function(e,t,n){var i=this;if(n||(n={}),!window.grecaptcha)return window.runOnCaptchaLoaded.unshift(function(){i.render(e,t,n)}),null;var o="invisible"===n.size;if(n.sitekey=this.getSitekey(o),o){var r=(0,a.default)("#"+e);r.hide(),r.after('<input type="hidden" name="captcha-invisible" value="true"/>')}return null!=t&&"function"==typeof t&&(n.callback=t),this.clientId=window.grecaptcha.render(e,n),this.clientId}},{key:"getResponse",value:function(){if(!window.grecaptcha||!this.rendered())return"";try{return window.grecaptcha.getResponse(this.clientId)}catch(e){return""}}},{key:"reset",value:function(){window.grecaptcha&&this.rendered()&&window.grecaptcha.reset(this.clientId)}},{key:"rendered",value:function(){return null!=this.clientId}},{key:"execute",value:function(){var e=this;window.grecaptcha?window.grecaptcha.execute(this.clientId):window.runOnCaptchaLoaded.unshift(function(){window.grecaptcha.execute(e.clientId)})}},{key:"getResponseParameters",value:function(e,t){return e?{"g-recaptcha-response":e,"captcha-invisible":t}:{failed:!0}}}]),e}(),c=t.NullCaptcha=function(){function e(t,n,i){l(this,e),this.callbackOnSuccess=n,i&&"invisible"===i.size||this.render(t,n)}return o(e,[{key:"render",value:function(e,t){return this.invokeSuccessCallback(),!0}},{key:"getResponse",value:function(){}},{key:"getResponseParameters",value:function(){return{}}},{key:"reset",value:function(){}},{key:"rendered",value:function(){return!0}},{key:"execute",value:function(){this.invokeSuccessCallback()}},{key:"invokeSuccessCallback",value:function(){this.callbackOnSuccess&&this.callbackOnSuccess("fakeCaptchaToken")}}]),e}()},68:function(e,t){e.exports='<h1 class="noimg"><%= title %></h1>\n<div class="message-holder"><%= message %></div>\n<div class="button-holder">\n  <a class="button-v2 rectangular-button blue js-close-modal" href="#" data-goto="<%- goto %>"><%- gtxt(\'OK\') %></a>\n</div>\n'},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountMessageModal=void 0;var i=a(n(68)),o=n(29),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}(t.AccountMessageModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseModal),t}()).prototype.template=r.default.template(i.default)},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateIncludedTax=t.calculateRequiredTax=t.parseMoneyStringToFloat=t.Money=void 0;var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(5),l=n(15),u=n(10),c=n(12);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.Money=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.amount=void 0!==t?(0,s.Decimal)(t):(0,s.Decimal)(NaN),!this.amount.isFinite()||"string"!=typeof n)throw new Error("Invalid args for Money constructor: amount="+JSON.stringify(t)+", currency="+JSON.stringify(n));if(this.currency=n.toUpperCase(),!a.default.includes(u.CURRENCY_CONSTANTS.SUPPORTED_CURRENCIES,this.currency))throw new Error("Unsupported currency "+this.currency+". Please use any of the following currencies: "+u.CURRENCY_CONSTANTS.SUPPORTED_CURRENCIES)}return o(e,null,[{key:"isMoney",value:function(t){return t instanceof e}},{key:"isScalar",value:function(e){return Number.isFinite(e)||s.Decimal.isDecimal(e)&&e.isFinite()}},{key:"fromObject",value:function(t){if(t instanceof Object&&t.hasOwnProperty("amount")&&t.hasOwnProperty("currency"))return new e(t.amount,t.currency);throw new Error("Invalid args passed into Money.fromObject: "+JSON.stringify(t))}},{key:"fromArray",value:function(t){if(Array.isArray(t)&&2==t.length)return new e(t[0],t[1]);throw new Error("Invalid args passed into Money.fromArray: "+JSON.stringify(t))}}]),o(e,[{key:"toJSON",value:function(){return{amount:this.amount,currency:this.currency}}},{key:"_localize",value:function(e,t,n){var i,o={style:"currency",currency:this.currency};n===c.MoneyFormatConstants.HIDE_ZERO_CENTS&&this.amount.isInteger()&&(o.maximumFractionDigits=0,o.minimumFractionDigits=0);var r=Intl.NumberFormat(e,o).format(this.amount.toNumber()),a=function(e,t,n){return e.replace(t,n)},s=(d(i={},u.CURRENCY_CONSTANTS.CURRENCY_CODES.RUBLES,a(r,"RUB",u.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[this.currency])),d(i,u.CURRENCY_CONSTANTS.CURRENCY_CODES.PISOS,a(r,"PHP",u.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[this.currency])),d(i,u.CURRENCY_CONSTANTS.CURRENCY_CODES.LIRAS,a(r,"TRY",u.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[this.currency])),d(i,u.CURRENCY_CONSTANTS.CURRENCY_CODES.AU_DOLLARS,a(r,"A$",u.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[this.currency])),d(i,u.CURRENCY_CONSTANTS.CURRENCY_CODES.YUAN,a(r,"CN¥",u.CURRENCY_CONSTANTS.CURRENCY_SYMBOLS[this.currency])),i);return r=this.currency==u.CURRENCY_CONSTANTS.CURRENCY_CODES.DOLLARS&&"en"==e&&t!=l.COUNTRY_CONSTANTS.US_CC?a(r,"$","US$"):a(r,"US$","$"),s[this.currency]||r}},{key:"currencyMatches",value:function(e){return this.currency.toLowerCase()===e.currency.toLowerCase()}},{key:"mul",value:function(e){return this.times(e)}},{key:"times",value:function(t){if(!e.isScalar(t))throw new Error("Money objects can only be multiplied by scalars");return new e(this.amount.mul(t),this.currency)}},{key:"div",value:function(e){return this.dividedBy(e)}},{key:"dividedBy",value:function(t){if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("If two Money objects are divided, they must be of the same currency");return this.amount.div(t.amount)}if(e.isScalar(t))return new e(this.amount.div(t),this.currency);throw new Error("Money objects can only be divided with scalars or other Money objects")}},{key:"add",value:function(e){return this.plus(e)}},{key:"plus",value:function(t){var n=void 0;if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("If adding two Money objects, they must be of the same currency");n=this.amount.add(t.amount)}else{if(!e.isScalar(t))throw new Error("Money objects can only be added with scalars or other Money objects");n=this.amount.add(t)}return new e(n,this.currency)}},{key:"sub",value:function(e){return this.minus(e)}},{key:"minus",value:function(t){var n=void 0;if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("If subtracting two Money objects, they must be of the same currency");n=this.amount.sub(t.amount)}else{if(!e.isScalar(t))throw new Error("Money objects can only be subtracted by scalars or other Money objects");n=this.amount.sub(t)}return new e(n,this.currency)}},{key:"toDecimalPlaces",value:function(e,t){return this.toDP(e,t)}},{key:"toDP",value:function(t,n){return t=void 0!==t?t:2,n=void 0!==n?n:s.Decimal.ROUND_HALF_UP,new e(this.amount.toDP(t,n),this.currency)}},{key:"isZero",value:function(){return this.amount.eq((0,s.Decimal)(0))}},{key:"equals",value:function(t){if(e.isMoney(t))return!!this.currencyMatches(t)&&this.amount.equals(t.amount);if(e.isScalar(t))return this.amount.equals(t);throw new Error("Money objects or scalar objects can only be used for comparisons")}},{key:"eq",value:function(e){return this.equals(e)}},{key:"greaterThan",value:function(t){if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("Money objects should have same currency when using comparisons!");return this.amount.greaterThan(t.amount)}if(e.isScalar(t))return this.amount.greaterThan(t);throw new Error("Money objects or scalar objects can only be used for comparisons")}},{key:"gt",value:function(e){return this.greaterThan(e)}},{key:"greaterThanOrEqualTo",value:function(t){if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("Money objects should have same currency when using comparisons!");return this.amount.greaterThanOrEqualTo(t.amount)}if(e.isScalar(t))return this.amount.greaterThanOrEqualTo(t);throw new Error("Money objects or scalar objects can only be used for comparisons")}},{key:"gte",value:function(e){return this.greaterThanOrEqualTo(e)}},{key:"lessThan",value:function(t){if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("Money objects should have same currency when using comparisons!");return this.amount.lessThan(t.amount)}if(e.isScalar(t))return this.amount.lessThan(t);throw new Error("Money objects or scalar objects can only be used for comparisons")}},{key:"lt",value:function(e){return this.lessThan(e)}},{key:"lessThanOrEqualTo",value:function(t){if(e.isMoney(t)){if(!this.currencyMatches(t))throw new Error("Money objects should have same currency when using comparisons!");return this.amount.lessThanOrEqualTo(t.amount)}if(e.isScalar(t))return this.amount.lessThanOrEqualTo(t);throw new Error("Money objects or scalar objects can only be used for comparisons")}},{key:"lte",value:function(e){return this.lessThanOrEqualTo(e)}},{key:"floor",value:function(){return new e(this.amount.floor(),this.currency)}},{key:"ceil",value:function(){return new e(this.amount.ceil(),this.currency)}},{key:"absoluteValue",value:function(){return new e(this.amount.abs(),this.currency)}},{key:"abs",value:function(){return this.absoluteValue()}},{key:"convertToCurrency",value:function(t,n){if(!a.default.includes(a.default.keys(n),t))throw new Error("Money object cannot be converted due to missing exchange rate");if(this.currency==t)return new e(this.amount,this.currency);var i=n[t],o=n[this.currency],r=this.div(o).times(i);return r.currency=t,r}}]),e}(),t.parseMoneyStringToFloat=function(e){var t=/[^\d,.]*(\d+|\d.*?\d)?(?:[,.]+(\d{0,2}))?\D*$/.exec(e);if(!t)return 0;var n=t[1]?t[1].replace(/\D/g,""):"0",i=t[2]?t[2]:"00";return parseFloat(n+"."+i)},t.calculateRequiredTax=function(e,t){return e.mul(t)},t.calculateIncludedTax=function(e,t){return e.minus(e.div(t.plus(1)))}},70:function(e,t){e.exports='<h1 class="noimg"><%- title %></h1>\n\n<p class="message-holder"><%= message %></p>\n<div class="no-center">\n  <div class="button-holder">\n    <a class="submit js-modal-submit" href="#">\n      <%- confirmText || gtxt(\'Confirm\') %>\n    </a>\n    <a class="cancel js-close-modal" href="#">\n      <%- cancelText || gtxt(\'Cancel\') %>\n    </a>\n  </div>\n  <div class="clearfix"></div>\n</div>\n'},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionConfirmationModal=void 0;var i=a(n(0)),o=n(29),r=a(n(70));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.ActionConfirmationModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseModal),t}();s.prototype.className="action-confirmation-modal font-size-reset",s.prototype.template=i.default.template(r.default)},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasRewardsPerks=t.isLoggedInUserAnAdmin=void 0;var i,o=n(0),r=(i=o)&&i.__esModule?i:{default:i},a=n(45),s=n(32),l=n(11);t.isLoggedInUserAnAdmin=function(e){return function(){return r.default.get((0,l.getWindow)(),"models.user_json.has_admin_access",!1)?e.apply(void 0,arguments):null}},t.hasRewardsPerks=function(){var e=(0,l.getWindow)(),t=r.default.get(e,"models.userSubscriptionState.perksStatus",!1)===s.SUBSCRIPTION_CONSTANTS.ChoicePerksStatus.ACTIVE,n=(0,a.getUser)().get("hasSharedDiscount");return t||n}},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CAPTCHA_CONSTANTS={grecaptcha:{PROD_SITEKEY:"6Lf2JvsSAAAAAEVgWrlS8fa02_x8My6aU7AW34nM",LOCAL_INVISIBLE_SITEKEY:"6LcwEhsUAAAAAJA21x4YRCpNwW0sBe3K7LniD-3e",PROD_INVISIBLE_SITEKEY:"6LdsABsUAAAAAAWcUQhPOAGGWP4z9bkKrNaiCeK8",LOCAL_SITEKEY:"6Ld2RRoUAAAAADzgmNEsqnfug_oyEQLhT-CwYnrF"}}},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseProductTile=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(2)),r=a(n(23));function a(e){return e&&e.__esModule?e:{default:e}}(t.BaseProductTile=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"defaults",value:function(){return{is_custom:!1,end_date:void 0,tile_image:"",tile_logo:"",tile_stamp:"",tile_name:"",type:"",size:"quarter"}}},{key:"getEndDate",value:function(){var e=this.get("end_date");if(!e){if(!(e=this.get("sale_end")))return null;e*=1e3}return r.default.utc(e)}}]),t}()).prototype.idAttribute="machine_name"},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTinyLinks=t.renderMenu=void 0;var i=l(n(1)),o=l(n(0)),r=l(n(176)),a=l(n(175)),s=n(75);function l(e){return e&&e.__esModule?e:{default:e}}var u={product:"/admin/Product/edit/",display_item:"/admin/DisplayItem/edit/",coupon:"/admin/CouponDefinition/edit/",subproduct:"/admin/SubProduct/edit/",tpkd:"/admin/ThirdPartyKeyDefinition/edit/",banner:"/admin/Banner/edit/",partner:"/admin/Partner/edit/",store_page_layout:"/admin/StorePageLayout/edit/"},c={quickLinks:o.default.template(a.default),tinyLink:o.default.template(r.default)};t.renderMenu=(0,s.isLoggedInUserAnAdmin)(function(e){var t=(0,i.default)(".js-admin-quicklinks"),n=o.default.extend({editProductURL:"",editDisplayItemURL:"",editStorePageLayoutURL:""},e);t.length&&t.remove(),e.productMachineName&&(n.editProductURL=u.product+e.productMachineName),e.displayItemMachineName&&(n.editDisplayItemURL=u.display_item+e.displayItemMachineName),e.storePageLayoutMachineName&&(n.editStorePageLayoutURL=u.store_page_layout+e.storePageLayoutMachineName),(0,i.default)("body").prepend(c.quickLinks(n))}),t.renderTinyLinks=(0,s.isLoggedInUserAnAdmin)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=!t,r=(0,i.default)(".js-toggle-tiny-links").is(":checked");if(t=t||(0,i.default)(".js-admin-edit"),o.default.each(t,function(t){var n=(0,i.default)(t);if(!n.find(".js-admin-tiny-link").length){var o=n.data("entity-kind"),a=n.data("anchor-name")||"",s=n.data("machine-name")||"",l=n.data("link-position")||"";if(void 0!==o){switch(o){case"product":s=s||e.productMachineName;break;case"display_item":s=s||e.displayItemMachineName;break;case"store_page_layout":s=s||e.storePageLayoutMachineName;break;case"tpkd":s=s||e.tpkdMachineName}if(s){var d=c.tinyLink({url:u[o]+s+a,title:"Edit "+o.charAt(0).toUpperCase()+o.slice(1)+" "+s,enabled:r});switch(l){case"after":n.after(d);break;case"append":n.append(d);break;case"prepend":n.prepend(d);break;case"before":default:n.before(d)}}}}}),!n){var a=(0,i.default)(".js-page-banner-link");if(a.length){var s=a.data("banner"),l=c.tinyLink({url:u.banner+s,title:"Edit Banner "+s,enabled:r});a.parent().find(".js-admin-tiny-link").remove(),a.before(l)}}(0,i.default)(".js-toggle-tiny-links").on("change",function(e){e.target.checked?(0,i.default)(".admin-tiny-link").removeClass("disabled"):(0,i.default)(".admin-tiny-link").addClass("disabled")})})},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.csrfHeaderKey=t.csrfFormKey=t.getCsrf=void 0;var i=n(18);t.getCsrf=function(){var e=document.cookie,t=e.lastIndexOf(i.CSRF_CONSTANTS.CSRF_COOKIE_KEY);t=t+i.CSRF_CONSTANTS.CSRF_COOKIE_KEY.length+1;var n="";if((e=e.slice(t)).length){var o=e.indexOf(";");n=o>-1?e.slice(0,o):e}return n},t.csrfFormKey=i.CSRF_CONSTANTS.CSRF_FORM_KEY,t.csrfHeaderKey=i.CSRF_CONSTANTS.CSRF_HEADER_KEY},82:function(e,t,n){var i=n(109);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(28)(i,o);i.locals&&(e.exports=i.locals)},83:function(e,t,n){(function(e){
/*
 * jQuery Dropdown: A simple dropdown plugin
 *
 * Contribute: https://github.com/claviska/jquery-dropdown
 *
 * @license: MIT license: http://opensource.org/licenses/MIT
 *
 * NOTE (kevin 2019-08-20) Because of Humble changes, any code using this plugin
 * needs to call window.jqDropdownSetup() for the dropdowns to actually work.
 */
e&&function(e){function t(t,o){var r=t?e(this):o,a=e(r.attr("data-jq-dropdown")),s=r.hasClass("jq-dropdown-open");if(t){if(e(t.target).hasClass("jq-dropdown-ignore"))return;t.preventDefault(),t.stopPropagation()}else if(r!==o.target&&e(o.target).hasClass("jq-dropdown-ignore"))return;n(),s||r.hasClass("jq-dropdown-disabled")||(r.addClass("jq-dropdown-open"),a.data("jq-dropdown-trigger",r).show(),i(),a.trigger("show",{jqDropdown:a,trigger:r}))}function n(t){var n=t?e(t.target).parents().addBack():null;if(n&&n.is(".jq-dropdown")){if(!n.is(".jq-dropdown-menu"))return;if(!n.is("A"))return}e(document).find(".jq-dropdown:visible").each(function(){var t=e(this);t.hide().removeData("jq-dropdown-trigger").trigger("hide",{jqDropdown:t})}),e(document).find(".jq-dropdown-open").removeClass("jq-dropdown-open")}function i(){var t=e(".jq-dropdown:visible").eq(0),n=t.data("jq-dropdown-trigger"),i=n?parseInt(n.attr("data-horizontal-offset")||0,10):null,o=n?parseInt(n.attr("data-vertical-offset")||0,10):null;0!==t.length&&n&&(t.hasClass("jq-dropdown-relative")?t.css({left:t.hasClass("jq-dropdown-anchor-right")?n.position().left-(t.outerWidth(!0)-n.outerWidth(!0))-parseInt(n.css("margin-right"),10)+i:n.position().left+parseInt(n.css("margin-left"),10)+i,top:n.position().top+n.outerHeight(!0)-parseInt(n.css("margin-top"),10)+o}):t.css({left:t.hasClass("jq-dropdown-anchor-right")?n.offset().left-(t.outerWidth()-n.outerWidth())+i:n.offset().left+i,top:n.offset().top+n.outerHeight()+o}))}e.extend(e.fn,{jqDropdown:function(i,o){switch(i){case"show":return t(null,e(this)),e(this);case"hide":return n(),e(this);case"attach":return e(this).attr("data-jq-dropdown",o);case"detach":return n(),e(this).removeAttr("data-jq-dropdown");case"disable":return e(this).addClass("jq-dropdown-disabled");case"enable":return n(),e(this).removeClass("jq-dropdown-disabled")}}}),window.jqDropdownSetup=function(){window.jqDropdownInitialized||(e(document).on("click.jq-dropdown","[data-jq-dropdown]",t),e(document).on("click.jq-dropdown",n),e(window).on("resize",i),window.jqDropdownInitialized=!0)}}(e)}).call(this,n(1))},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GivingFundDisclaimer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=d(n(2)),r=d(n(3));n(359),n(358),n(357);var a=d(n(0)),s=d(n(1096)),l=d(n(1095)),u=d(n(1094)),c=d(n(1093));function d(e){return e&&e.__esModule?e:{default:e}}var h={ppgf:l.default,"ppgf-tides":u.default,"ppgf-direct":s.default,tides:c.default};t.GivingFundDisclaimer=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),i(t,[{key:"initialize",value:function(e){var t=e.givingFund,n=e.inContext;this.model=new o.default.Model({inContext:n}),this.givingFund=t}},{key:"getTemplate",value:function(){return a.default.template(h[this.givingFund])||!1}}]),t}()},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpsellItemView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(3)),r=u(n(0)),a=n(5),s=u(n(1100)),l=n(7);function u(e){return e&&e.__esModule?e:{default:e}}var c=t.UpsellItemView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){this.model.on("change:error_message",this.render),this.user=e.user}},{key:"add",value:function(){this.model.set("active",!0),this.render()}},{key:"remove",value:function(){this.model.set("agreed_to_terms",!1),this.model.set("active",!1),this.render()}},{key:"serializeData",value:function(){var e=this.model.toJSON(),t=this.model.getPreTaxPrice();if(e.discount_percentage=e.discount_percentage?e.discount_percentage.div(100):(0,a.Decimal)(0),e.eligible_for_monthly_discount){var n=e.discount_percentage,i=e.monthly_discount_decimal,o=n.plus(i).minus(n.times(i));e.discount_percentage=o}if(e.renewal_date=new Date(e.renewal_date),e.price=t,e.tax_amount=0,this.model.get("tax_rate").greaterThan(0)){var r=(0,l.calculateRequiredTax)(t,this.model.get("tax_rate"));e.tax_amount=r.toDP(2,a.Decimal.ROUND_DOWN)}return e.is_logged_in=this.user.get("is_logged_in"),e}}]),t}();c.prototype.className="order-summary-item-upsell-wrapper",c.prototype.template=r.default.template(s.default),c.prototype.events={"click .js-remove-upsell":"remove","click .js-add-to-cart":"add"}},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioAmountSelector=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=f(n(2)),r=f(n(3)),a=f(n(1)),s=f(n(0)),l=n(12),u=n(9),c=n(5),d=f(n(1122)),h=n(840),p=n(7);function f(e){return e&&e.__esModule?e:{default:e}}var m=t.RadioAmountSelector=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),i(t,[{key:"initialize",value:function(e){this.windowSize=e.windowSize;var t=this.getSelectionData(e.pricingTiers);this.selections=new o.default.Collection(t),this.listenTo(this.model,"change:price change:amount_set",this.render.bind(this)),this.listenTo(this.windowSize,"change:medium",this.render.bind(this))}},{key:"getSelectionData",value:function(e){var t=this;return(0,h.getRadioButtonAmounts)(e,this.model.get("currency")).map(function(e){return"custom"===e?{id:e,value:t.model.get("price").amount.toNumber(),label:(0,u.gtxt)("Custom Amount")}:{label:(0,u.localizeMoney)(e,l.MoneyFormatConstants.HIDE_ZERO_CENTS),id:e.amount.toNumber(),value:e.amount.toNumber()}})}},{key:"serializeData",value:function(){var e=this.model.get("price"),t=this.model.get("default_price");return this.model.get("amount_set")&&this.updateSelection(e),{selections:this.selections,customPrice:e,editing:this.editing||this.windowSize.get("medium"),defaultPrice:t}}},{key:"onRender",value:function(){this.editing&&this.selectInputField()}},{key:"updateSelection",value:function(e){this.selections.each(function(e){return e.set("selected",!1)});var t=this.selections.get(e);t?this.selections.get("custom").set("label","Custom Amount"):(t=this.selections.get("custom")).set("label",(0,u.localizeMoney)(e,l.MoneyFormatConstants.HIDE_ZERO_CENTS)),t&&t.set("selected",!0)}},{key:"setStandardAmount",value:function(e){var t=(0,a.default)(e.target).data("value");window._gaTrackEventNoninteractive(void 0,"Order form","Payment amount clicked",t),this.model.set({price:new p.Money((0,c.Decimal)(t),this.model.get("currency")),amount_set:!0})}},{key:"editCustomAmount",value:function(){this.editing=!0,window._gaTrackEventNoninteractive(void 0,"Order form","Custom payment amount clicked"),this.render()}},{key:"setCustomAmount",value:function(e){if("keypress"!==e.type||13===e.keyCode){e.preventDefault();var t=(0,p.parseMoneyStringToFloat)(e.target.value);this.editing=!1,this.model.set("price",new p.Money(t,this.model.get("currency"))),this.model.set("amount_set",!0)}}},{key:"selectInputField",value:function(){this.$(".js-custom-amount-input").select()}}]),t}();m.prototype.template=s.default.template(d.default),m.prototype.events={"click .js-custom-amount-button":"editCustomAmount","click .order-form-radio-amount-button":"setStandardAmount","keypress .js-custom-amount-input":"setCustomAmount","click .js-custom-amount-input":"selectInputField","blur .js-custom-amount-input":"setCustomAmount","change .js-custom-amount-input":"setCustomAmount"}},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AmountErrorView=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=d(n(3)),r=d(n(0)),a=n(12),s=n(9),l=n(1131),u=n(1129),c=n(7);function d(e){return e&&e.__esModule?e:{default:e}}t.AmountErrorView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(e){var t=e.product,n=e.personalTotal,i=e.avg,o=e.isOrderAdder;this.product=t,this.personalTotal=n,this.avg=i,this.isOrderAdder=o,this.errors=new l.Errors,this.errorViews={},this.sortMonetaryContentEventData(),this.validateAmount(),this.listenTo(this.model,"change:price",this.validateAmount.bind(this)),this.listenTo(this.model,"change:amount_set error:price_not_set",this.validatePriceNotSet.bind(this)),this.listenTo(this.errors,"add",this.addErrorView.bind(this)),this.listenTo(this.errors,"remove",this.removeError.bind(this))}},{key:"sortMonetaryContentEventData",value:function(){var e=this;this.monetaryContentEventData=this.product.get("monetary_content_event_data")||[],this.monetaryContentEventData=r.default.sortBy(this.monetaryContentEventData,function(t){return"average"===t.type&&e.avg?e.avg.amount.toNumber():"average_plus"===t.type&&e.avg?e.avg.plus(t.average_plus).amount.toNumber():t.price.amount.toNumber()})}},{key:"addError",value:function(e,t,n,i){c.Money.isMoney(e)||(e=new c.Money(e,this.model.get("currency")));var o=e.minus(this.model.getCurrentMoney()),l=(0,s.localizeMoney)(o,a.MoneyFormatConstants.HIDE_ZERO_CENTS),u=(0,s.localizeMoney)(e,a.MoneyFormatConstants.HIDE_ZERO_CENTS);i||(i=""),this.errors.get(t)&&this.errors.remove(t),this.errors.add({errorText:r.default.template(n)({money_difference:l,target_price:u}),price:e,priceDifference:o,identifierClass:t,warningClass:i})}},{key:"addErrorView",value:function(e){var t=new u.SingleErrorView({model:e,amountModel:this.model});this.$el.append(t.render().$el),this.errorViews[e.id]=t}},{key:"removeError",value:function(e){this.errorViews[e.id]&&(this.errorViews[e.id].remove(),delete this.errorViews[e.id])}},{key:"validateAmount",value:function(){this.validatePennyMinimum(),this.validateForSteamKeys(),this.createWarningMessages()}},{key:"validatePennyMinimum",value:function(){this.model.isPriceValid(this.product.get("has_free_content"))?this.errors.remove("penny-error"):this.addError(.01,"penny-error",(0,s.gtxt)("Please enter at least one penny (preferably a lot more to help cover our costs!)"))}},{key:"validatePriceNotSet",value:function(){this.model.get("amount_set")?this.errors.remove("unset-amount"):this.errors.add({errorText:(0,s.gtxt)("Please select an amount to pay for the bundle!"),identifierClass:"unset-amount",warningClass:"order-form-msg-is-error"})}},{key:"validateForSteamKeys",value:function(){var e=this.model.getCurrentMoney(),t=this.product.get("tpkd_cutoff_price");this.isOrderAdder&&(t=t.sub(this.personalTotal)),(this.product.get("has_any_keys")||this.product.get("cutoff_warning_override"))&&e.lt(t)?this.product.get("cutoff_warning_override")?this.addError(t,"tpkd-error",this.product.get("cutoff_warning_override")):this.product.get("has_steam_keys")&&!this.product.get("has_nonsteam_keys")?this.addError(t,"tpkd-error",(0,s.gtxt)("You must pay at least {cutoff_price} to get Steam keys").format({cutoff_price:(0,s.localizeMoney)(t,a.MoneyFormatConstants.HIDE_ZERO_CENTS)})):this.product.get("has_steam_keys")&&this.product.get("has_nonsteam_keys")?this.addError(t,"tpkd-error",(0,s.gtxt)("You must pay at least {cutoff_price} to get Steam keys and other keys").format({cutoff_price:(0,s.localizeMoney)(t,a.MoneyFormatConstants.HIDE_ZERO_CENTS)})):this.addError(t,"tpkd-error",(0,s.gtxt)("You must pay at least {cutoff_price} to get keys").format({cutoff_price:(0,s.localizeMoney)(t,a.MoneyFormatConstants.HIDE_ZERO_CENTS)})):this.errors.remove("tpkd-error")}},{key:"createWarningMessages",value:function(){for(var e=0;e<this.monetaryContentEventData.length;e++){var t=null,n=this.monetaryContentEventData[e],i=n.type;if("average"===i&&this.avg?t=this.avg.plus(.01):"average_plus"===i?t=this.avg.plus(n.average_plus):"price"===i&&(t=n.price),t){this.isOrderAdder&&(t=t.minus(this.personalTotal));var o="warning-"+e;this.model.getCurrentMoney().lt(t)?n["warning-locked"]?this.addError(t,o,n["warning-locked"],"warning-locked"):this.errors.remove(o):n["warning-unlocked"]?this.addError(t,o,n["warning-unlocked"],"warning-unlocked"):this.errors.remove(o)}}}},{key:"render",value:function(){var e=this;return this.errors.each(function(t){return e.addErrorView(t)}),this}}]),t}()},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashObject=t.getRadioButtonAmounts=t.currencyDefaultAmount=void 0;var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(0),a=(i=r)&&i.__esModule?i:{default:i},s=n(10),l=n(7);var u=t.currencyDefaultAmount={USD:[new l.Money(100,s.CURRENCY_CONSTANTS.CURRENCY_CODES.DOLLARS),new l.Money(50,s.CURRENCY_CONSTANTS.CURRENCY_CODES.DOLLARS),new l.Money(25,s.CURRENCY_CONSTANTS.CURRENCY_CODES.DOLLARS),new l.Money(10,s.CURRENCY_CONSTANTS.CURRENCY_CODES.DOLLARS)],EUR:[new l.Money(100,s.CURRENCY_CONSTANTS.CURRENCY_CODES.EUROS),new l.Money(50,s.CURRENCY_CONSTANTS.CURRENCY_CODES.EUROS),new l.Money(25,s.CURRENCY_CONSTANTS.CURRENCY_CODES.EUROS),new l.Money(10,s.CURRENCY_CONSTANTS.CURRENCY_CODES.EUROS)],GBP:[new l.Money(80,s.CURRENCY_CONSTANTS.CURRENCY_CODES.POUNDS),new l.Money(40,s.CURRENCY_CONSTANTS.CURRENCY_CODES.POUNDS),new l.Money(20,s.CURRENCY_CONSTANTS.CURRENCY_CODES.POUNDS),new l.Money(10,s.CURRENCY_CONSTANTS.CURRENCY_CODES.POUNDS)],CAD:[new l.Money(120,s.CURRENCY_CONSTANTS.CURRENCY_CODES.CA_DOLLARS),new l.Money(60,s.CURRENCY_CONSTANTS.CURRENCY_CODES.CA_DOLLARS),new l.Money(30,s.CURRENCY_CONSTANTS.CURRENCY_CODES.CA_DOLLARS),new l.Money(15,s.CURRENCY_CONSTANTS.CURRENCY_CODES.CA_DOLLARS)],AUD:[new l.Money(140,s.CURRENCY_CONSTANTS.CURRENCY_CODES.AU_DOLLARS),new l.Money(70,s.CURRENCY_CONSTANTS.CURRENCY_CODES.AU_DOLLARS),new l.Money(35,s.CURRENCY_CONSTANTS.CURRENCY_CODES.AU_DOLLARS),new l.Money(15,s.CURRENCY_CONSTANTS.CURRENCY_CODES.AU_DOLLARS)],NZD:[new l.Money(140,s.CURRENCY_CONSTANTS.CURRENCY_CODES.NZ_DOLLARS),new l.Money(70,s.CURRENCY_CONSTANTS.CURRENCY_CODES.NZ_DOLLARS),new l.Money(35,s.CURRENCY_CONSTANTS.CURRENCY_CODES.NZ_DOLLARS),new l.Money(15,s.CURRENCY_CONSTANTS.CURRENCY_CODES.NZ_DOLLARS)],TRY:[new l.Money(600,s.CURRENCY_CONSTANTS.CURRENCY_CODES.LIRAS),new l.Money(300,s.CURRENCY_CONSTANTS.CURRENCY_CODES.LIRAS),new l.Money(150,s.CURRENCY_CONSTANTS.CURRENCY_CODES.LIRAS),new l.Money(50,s.CURRENCY_CONSTANTS.CURRENCY_CODES.LIRAS)],PHP:[new l.Money(5e3,s.CURRENCY_CONSTANTS.CURRENCY_CODES.PISOS),new l.Money(2500,s.CURRENCY_CONSTANTS.CURRENCY_CODES.PISOS),new l.Money(1300,s.CURRENCY_CONSTANTS.CURRENCY_CODES.PISOS),new l.Money(500,s.CURRENCY_CONSTANTS.CURRENCY_CODES.PISOS)],RUB:[new l.Money(6e3,s.CURRENCY_CONSTANTS.CURRENCY_CODES.RUBLES),new l.Money(3e3,s.CURRENCY_CONSTANTS.CURRENCY_CODES.RUBLES),new l.Money(1500,s.CURRENCY_CONSTANTS.CURRENCY_CODES.RUBLES),new l.Money(500,s.CURRENCY_CONSTANTS.CURRENCY_CODES.RUBLES)],CNY:[new l.Money(600,s.CURRENCY_CONSTANTS.CURRENCY_CODES.YUAN),new l.Money(300,s.CURRENCY_CONSTANTS.CURRENCY_CODES.YUAN),new l.Money(150,s.CURRENCY_CONSTANTS.CURRENCY_CODES.YUAN),new l.Money(50,s.CURRENCY_CONSTANTS.CURRENCY_CODES.YUAN)]};t.getRadioButtonAmounts=function(e,t){if(a.default.isEmpty(e)){var n=a.default.extend([],u[t]);return n.push("custom"),n}var i=[],o=e.avg||null;o?(i.push(o.plus(.1).ceil()),i=i.concat(a.default.filter(e,function(e){return o.lt(e)}))):i=a.default.flatMap(e),i.sort(function(e,t){return e.minus(t).amount});var r=i[i.length-1],s=u[t][2];return r.lt(s)&&i.push(s),(i=a.default.sortedUniq(i)).push("custom"),i},t.hashObject=function(e){var t=function e(t,n){if(Array.isArray(t))return"["+t.map(function(t){return e(t,n)}).join(",")+"]";if("object"===(void 0===t?"undefined":o(t))){var i=Object.keys(t).sort(n);return"{"+(i=i.map(function(n){return JSON.stringify(n)+": "+e(t[n])})).join(",")+"}"}return JSON.stringify(t)}(e),n=0;if(!t.length)return n;for(var i=0;i<t.length;i++){n=(n<<5)-n+t.charCodeAt(i),n&=n}return n}},841:function(e,t){e.exports='<aside class="order-form-error-msg <%- identifierClass %> <%- warningClass %>">\n  <div class="order-form-error-text-container">\n    <p class="order-form-error-text"><%= errorText %></p>\n<% if (typeof price !== \'undefined\' && warningClass !== \'warning-unlocked\') { %>\n    <a href="#" class="js-readjust-order-amount order-form-error-call-to-action"><%- gtxt(\'Add {difference}\').format({\'difference\': localizeMoney(priceDifference, MoneyFormatConstants.SHOW_ZERO_CENTS)}) %></a>\n<% } %>\n  </div>\n</aside>\n'},842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowSize=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=a(n(2)),r=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.WindowSize=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Model),i(t,[{key:"initialize",value:function(){this.$window=(0,r.default)(window),this.updateSize(),this.$window.resize(this.updateSize.bind(this))}},{key:"updateSize",value:function(){this.set({medium:window.innerWidth<=this.MEDIUM_BREAKPOINT,small:window.innerWidth<=this.SMALL_BREAKPOINT})}}]),t}();s.prototype.MEDIUM_BREAKPOINT=900,s.prototype.SMALL_BREAKPOINT=750},85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayModal=void 0;var i=n(17);(t.DisplayModal=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.HumbleModal),t}()).prototype.prefix="display-modal"},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setupYoutubeAPI=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var n=[],i=!1;return window.onYouTubeIframeAPIReady=function(){i=!0;for(var e=0;e<n.length;e++)n[e](window.YT)},function(e){e&&(i?e(window.YT):n.push(e))}};var i=t.youtubeUrlRegex=/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\/?\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,})/;t.extractYoutubeID=function(e){var t=null;if(e){var n=e.match(i);n&&n.length>1&&(t=n[1])}return t}},9:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initI18nTemplateFunctions=exports.getMonths=exports.getLocale=exports.localizePercent=exports.localizeList=exports.localizeNumber=exports.localizeMoney=exports.localizeDate=exports.localizeDateTime=exports.gtxt=exports.ngtxt=exports.ListTypeConstants=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_lodash=__webpack_require__(0),_lodash2=_interopRequireDefault(_lodash),_countryNames=__webpack_require__(15),_dateFormatConstants=__webpack_require__(42),_dateTimeFormatConstants=__webpack_require__(37),_moneyFormatConstants=__webpack_require__(12),_decimal=__webpack_require__(5),_main=__webpack_require__(4);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var dateFormatOptions={short:{year:"2-digit",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{year:"numeric",month:"long",day:"numeric",weekday:"long"},"MMMM YYY":{month:"long",year:"numeric"}},timeFormatOptions={short:{hour:"numeric",minute:"2-digit"},medium:{hour:"numeric",minute:"2-digit",second:"2-digit"},long:{hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:"short"},full:{hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:"long"}},datetimeFormatOptions=_lodash2.default.merge({},dateFormatOptions,timeFormatOptions),ListTypeConstants=exports.ListTypeConstants={AND:"conjunction",OR:"disjunction",UNIT:"unit"},getTranslations=function(){return window.humble&&window.humble.translations||{}},getValueFromTranslations=function(e,t){if(e&&e.catalog){var n=e.catalog[t];return void 0===n?t:n}},pluralIndex=function pluralIndex(count,translations){var n=count,result=eval(translations.plural);return"boolean"==typeof result?result?1:0:result},ngtxt=exports.ngtxt=function(e,t,n){if(n<0)throw new Error("Negative numbers not supported");var i=getTranslations(),o=getValueFromTranslations(i,e);return _lodash2.default.isArray(o)?o[pluralIndex(n,i)]:1==n?e:t},gtxt=exports.gtxt=function(e){var t=getValueFromTranslations(getTranslations(),e);return void 0===t?e:"string"==typeof t?t:t[0]},localizeDateTime=exports.localizeDateTime=function(e,t){assertFormatIsInConstants(t,_dateTimeFormatConstants.DateTimeFormatConstants),assertObjectIsType(e,_lodash2.default.isDate);var n=datetimeFormatOptions[t];return e.toLocaleString(window.humble.locale,_lodash2.default.assign({timeZone:window.humble.timezone},n))},localizeDate=exports.localizeDate=function(e,t){assertFormatIsInConstants(t,_dateFormatConstants.DateFormatConstants),assertObjectIsType(e,_lodash2.default.isDate);var n=dateFormatOptions[t];return e.toLocaleDateString(window.humble.locale,_lodash2.default.assign({timeZone:window.humble.timezone},n))},localizeMoney=exports.localizeMoney=function(e,t){assertFormatIsInConstants(t,_moneyFormatConstants.MoneyFormatConstants);var n=window.models&&window.models.request?window.models.request.country_code:_countryNames.COUNTRY_CONSTANTS.US_CC;return e._localize(window.humble.locale,n,t)},localizeNumber=exports.localizeNumber=function(e){return assertObjectIsType(e,isNumberType),e.toLocaleString(window.humble.locale)},localizeList=exports.localizeList=function(e,t){assertObjectIsType(e,_lodash2.default.isArray),assertFormatIsInConstants(t,ListTypeConstants);var n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if("string"!=typeof s)throw new Error("localizeList() expects a list of strings but received a list containing a "+(void 0===s?"undefined":_typeof(s)))}}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}if((0,_main.isIE11)()){var l="and";switch(t){case"disjunction":l="or";break;case"unit":l=""}return(0,_main.listToEnglishStr)(e,l)}return new Intl.ListFormat(window.humble.locale,{style:"long",type:t}).format(e)},localizePercent=exports.localizePercent=function(e){return assertObjectIsType(e,isNumberType),Intl.NumberFormat(window.humble.locale,{style:"percent"}).format(e)},getLocale=exports.getLocale=function(){return window.humble.locale},getMonths=exports.getMonths=function(){return _lodash2.default.map(_lodash2.default.range(1,13),function(e){return new Date(Date.UTC(1970,e,0,0,0,0)).toLocaleString(window.humble.locale,{month:"long"})})},initI18nTemplateFunctions=exports.initI18nTemplateFunctions=function(){window.gtxt=gtxt,window.ngtxt=ngtxt,window.localizeDate=localizeDate,window.localizeDateTime=localizeDateTime,window.localizeMoney=localizeMoney,window.localizeNumber=localizeNumber,window.localizeList=localizeList,window.localizePercent=localizePercent,window.DateFormatConstants=_dateFormatConstants.DateFormatConstants,window.DateTimeFormatConstants=_dateTimeFormatConstants.DateTimeFormatConstants,window.MoneyFormatConstants=_moneyFormatConstants.MoneyFormatConstants,window.ListTypeConstants=ListTypeConstants},assertFormatIsInConstants=function(e,t){if(!_lodash2.default.includes(t,e))throw new Error(e+" not in "+t)},assertObjectIsType=function(e,t){if(!t(e))throw new Error((void 0===e?"undefined":_typeof(e))+" is not the expected type of "+t.name)},isNumberType=function(e){return _lodash2.default.isNumber(e)||e instanceof _decimal.Decimal}}});